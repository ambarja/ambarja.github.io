<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Karat Sidhu</title>
<link>https://karatsidhu.com/blog.html</link>
<atom:link href="https://karatsidhu.com/blog.xml" rel="self" type="application/rss+xml"/>
<description></description>
<image>
<url>https://karatsidhu.com/data/images/karat.png</url>
<title>Karat Sidhu</title>
<link>https://karatsidhu.com/blog.html</link>
<height>150</height>
<width>144</width>
</image>
<generator>quarto-1.1.113</generator>
<lastBuildDate>Mon, 20 Jun 2022 05:00:00 GMT</lastBuildDate>
<item>
  <title>Web scraping with R and RVest</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/webscraping-with-rvest/rvest-imdb.html</link>
  <description><![CDATA[ 




<div class="page-columns page-full"><p><img src="https://karatsidhu.com/posts/webscraping-with-rvest/images/logo.jpeg" class="img-fluid" data-fig-width="300px"> </p><div class="no-row-height column-margin column-container"><span class="aside">Image from Reddit.com by u/booooooop123</span></div></div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>There are a few tutorials available for scraping IMDB for TV Series ratings and votes using Python but I wanted to write my own tutorial to learn how to scrape IMDB for TV Series ratings and votes using R and <code>rvest</code> package because of the lack of such tutorials in R. Even when such guides are available, they are not very clear and usually deal with scraping data from IMDB data related to top 100/top 1000 lists and not specific seasons of a particular TV Series.</p>
<p>The series I am going to scrape is <a href="https://www.imdb.com/title/tt0121955/">South Park</a>. This is a TV Series that is popular in the US and is one of the most popular TV Shows in the world. Moreover, this show has over 25 seasons and a lot of episodes, so it helps with the learning of scraping data when dealing with a relatively long dataset compared to a top 100 list.</p>
<p>The basic steps to scrape data are:</p>
<ul>
<li><p>Step 1: Find the URL of the page that contains the data you want to scrape</p></li>
<li><p>Step 2: Parse the data</p></li>
<li><p>Step 3: Repeat the steps above for each page you want to scrape</p></li>
<li><p>Step 4: Transform the data</p></li>
<li><p>Step 5: Check the data, clean it</p></li>
<li><p>Step 6: Save the data</p></li>
</ul>
</section>
<section id="prerequisites" class="level1">
<h1>Prerequisites</h1>
<p>We need to have a working R installation on your computer. In addition, you will need to have the <code>rvest</code> package installed. You can install it by running the following command in your R console:</p>
<p><code>install.packages("rvest")</code></p>
<p><code>rvest</code> package helps us to scrape data from the web.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
RVest Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>RVest is part of the tidyverse. To find out more about it visit <a href="https://rvest.tidyverse.org/">rvest documentation</a>.</p>
</div>
</div>
<p>Additionally, it is recommended you install the <a href="https://chrome.google.com/webstore/detail/selectorgadget/mhjhnkcfbdhnjickkkdbjoemdmbfginb?hl=en">CSS Selector Gadget</a> for your web browser. It is a Chrome extension that helps you to select elements on the web page and makes it much simpler to find the elements you want to scrape. It is not a necessary dependency for this tutorial, but it is recommended, alternatively using the “Inspect Element” option in your browser would work as well.</p>
<p><code>Lubridate</code> package is useful when working with dates. Since we will be extract the airdate of each episode, <code>Lubridate</code> is helpful in converting it to a usable format.</p>
<p>I will be using the following packages for this tutorial:</p>
<ul>
<li><p><code>stringr</code></p></li>
<li><p><code>readr</code></p></li>
<li><p><code>magrittr</code></p></li>
</ul>
<p>To make it simpler, install the entire <code>tidyverse</code> set of packages, because they are useful for analysis and visualization of the data scraped.</p>
</section>
<section id="scraping" class="level1">
<h1>Scraping</h1>
<p>We will be extracting the text elements from the IMDB pages that contain the data we want to scrape. Once extracted, those elements are saved as lists that become the columns of a data frame. Assembling the data frame is the last step of the scraping process.</p>
<section id="find-navigate-to-the-url" class="level2">
<h2 class="anchored" data-anchor-id="find-navigate-to-the-url">Find &amp; navigate to the URL</h2>
<p>To find the exact url of the page that we want to extract the data from, we first look at the <a href="https://www.imdb.com/title/tt0121955/">South Park Homepage on IMDB</a>. This page contains the rating and vote count of the South Park TV Series, but it does not contain the ratings and votes of the seasons of the TV Series for each individual episode/season.</p>
<p>On the top of the page, we see the list of episodes of South Park, and <a href="https://www.imdb.com/title/tt0121955/episodes">clicking that link</a> takes me to the latest season of South Park, which is 25 at the time of writing this post.</p>
<p>For simplicity, we will start with the first season, which is under the link <a href="https://www.imdb.com/title/tt0121955/episodes?season=1">Season 1</a>.</p>
</section>
<section id="parse-the-url" class="level2">
<h2 class="anchored" data-anchor-id="parse-the-url">Parse the URL</h2>
<p>Using the <code>read_html</code> function, we can parse the HTML code of the page</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb1-1"></span>
<span id="cb1-2">link &lt;- "https://www.imdb.com/title/tt0121955/episodes?season=1"</span>
<span id="cb1-3">page &lt;- read_html(link)</span>
<span id="cb1-4"></span></code></pre></div>
<p>This page should now appear in the R console environment. We can see that the page contains a list of HTML elements. It can take a minute to get the page, depending on your internet connection/processor speed.</p>
</section>
<section id="extract-each-element" class="level2">
<h2 class="anchored" data-anchor-id="extract-each-element">Extract each element</h2>
<p>Using the CSS Selector Gadget, we can find the elements we want to scrape. The following code snippet will find the elements that contain the TV Series name, the TV Series rating, the TV Series votes and the TV Series year and then it will extract the text from each of them.</p>
<section id="episode-name" class="level3">
<h3 class="anchored" data-anchor-id="episode-name">Episode Name</h3>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb2-1">    episode_name &lt;- page |&gt;</span>
<span id="cb2-2">        html_nodes("#episodes_content strong a") |&gt;</span>
<span id="cb2-3">        html_text()</span></code></pre></div>
</section>
<section id="episode-number" class="level3">
<h3 class="anchored" data-anchor-id="episode-number">Episode Number</h3>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb3-1">    episode_season &lt;- page |&gt;</span>
<span id="cb3-2">        html_nodes(".zero-z-index div") |&gt;</span>
<span id="cb3-3">        html_text()</span></code></pre></div>
</section>
<section id="episode-rating" class="level3">
<h3 class="anchored" data-anchor-id="episode-rating">Episode Rating</h3>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb4-1">rating &lt;- page |&gt;</span>
<span id="cb4-2">  html_nodes(".ipl-rating-star.small .ipl-rating-star__rating") |&gt;</span>
<span id="cb4-3">        html_text()</span></code></pre></div>
</section>
<section id="episode-votes" class="level3">
<h3 class="anchored" data-anchor-id="episode-votes">Episode Votes</h3>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb5-1">    total_votes &lt;- page |&gt;</span>
<span id="cb5-2">        html_nodes(".ipl-rating-star__total-votes") |&gt;</span>
<span id="cb5-3">        html_text()</span></code></pre></div>
</section>
<section id="air-date" class="level3">
<h3 class="anchored" data-anchor-id="air-date">Air Date</h3>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb6-1"></span>
<span id="cb6-2">    air_date &lt;- page |&gt;</span>
<span id="cb6-3">        html_nodes(".airdate") |&gt;</span>
<span id="cb6-4">        html_text()</span></code></pre></div>
</section>
<section id="episode-description" class="level3">
<h3 class="anchored" data-anchor-id="episode-description">Episode Description</h3>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb7-1">    description &lt;- page |&gt;</span>
<span id="cb7-2">        html_nodes(".item_description") |&gt;</span>
<span id="cb7-3">        html_text()</span></code></pre></div>
</section>
<section id="repeat-for-each-season" class="level3">
<h3 class="anchored" data-anchor-id="repeat-for-each-season">Repeat for each season</h3>
<p>The codes above will scrape the data for one season. To scrape the data for all seasons, we need to repeat the above steps for each season. To do that, we need to use the <code>for</code> loop. Additionally, we need to change the <code>url</code> variable to point to the correct URL for each season.</p>
</section>
</section>
<section id="final-code" class="level2">
<h2 class="anchored" data-anchor-id="final-code">Final Code</h2>
<p>The final code snippet will look like the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;">library</span>(rvest)</span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ ggplot2 3.3.6     ✔ purrr   0.3.4
✔ tibble  3.1.7     ✔ dplyr   1.0.9
✔ tidyr   1.2.0     ✔ stringr 1.4.0
✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter()         masks stats::filter()
✖ readr::guess_encoding() masks rvest::guess_encoding()
✖ dplyr::lag()            masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">south_park <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">data.frame</span>()</span>
<span id="cb12-2"></span>
<span id="cb12-3"><span class="cf" style="color: #003B4F;">for</span> (seasons <span class="cf" style="color: #003B4F;">in</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="at" style="color: #657422;">from =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">to =</span> <span class="dv" style="color: #AD0000;">25</span>, <span class="at" style="color: #657422;">by =</span> <span class="dv" style="color: #AD0000;">1</span>)) {</span>
<span id="cb12-4">    link <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">paste0</span>(<span class="st" style="color: #20794D;">"https://www.imdb.com/title/tt0121955/episodes?season="</span>, seasons)</span>
<span id="cb12-5"></span>
<span id="cb12-6">    page <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">read_html</span>(link)</span>
<span id="cb12-7"></span>
<span id="cb12-8">    episode_name <span class="ot" style="color: #003B4F;">&lt;-</span> page <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-9">        <span class="fu" style="color: #4758AB;">html_nodes</span>(<span class="st" style="color: #20794D;">"#episodes_content strong a"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-10">        <span class="fu" style="color: #4758AB;">html_text</span>()</span>
<span id="cb12-11"></span>
<span id="cb12-12">    rating <span class="ot" style="color: #003B4F;">&lt;-</span> page <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-13">        <span class="fu" style="color: #4758AB;">html_nodes</span>(<span class="st" style="color: #20794D;">".ipl-rating-star.small .ipl-rating-star__rating"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-14">        <span class="fu" style="color: #4758AB;">html_text</span>()</span>
<span id="cb12-15"></span>
<span id="cb12-16">    total_votes <span class="ot" style="color: #003B4F;">&lt;-</span> page <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-17">        <span class="fu" style="color: #4758AB;">html_nodes</span>(<span class="st" style="color: #20794D;">".ipl-rating-star__total-votes"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-18">        <span class="fu" style="color: #4758AB;">html_text</span>()</span>
<span id="cb12-19"></span>
<span id="cb12-20">    air_date <span class="ot" style="color: #003B4F;">&lt;-</span> page <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-21">        <span class="fu" style="color: #4758AB;">html_nodes</span>(<span class="st" style="color: #20794D;">".airdate"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-22">        <span class="fu" style="color: #4758AB;">html_text</span>()</span>
<span id="cb12-23"></span>
<span id="cb12-24">    description <span class="ot" style="color: #003B4F;">&lt;-</span> page <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-25">        <span class="fu" style="color: #4758AB;">html_nodes</span>(<span class="st" style="color: #20794D;">".item_description"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-26">        <span class="fu" style="color: #4758AB;">html_text</span>()</span>
<span id="cb12-27"></span>
<span id="cb12-28">    episode_season <span class="ot" style="color: #003B4F;">&lt;-</span> page <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-29">        <span class="fu" style="color: #4758AB;">html_nodes</span>(<span class="st" style="color: #20794D;">".zero-z-index div"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-30">        <span class="fu" style="color: #4758AB;">html_text</span>()</span>
<span id="cb12-31"></span>
<span id="cb12-32">    south_park <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">rbind</span>(south_park, <span class="fu" style="color: #4758AB;">data.frame</span>(episode_name, episode_season,</span>
<span id="cb12-33">        rating,</span>
<span id="cb12-34">        total_votes,</span>
<span id="cb12-35">        air_date,</span>
<span id="cb12-36">        description,</span>
<span id="cb12-37">        <span class="at" style="color: #657422;">stringsAsFactors =</span> <span class="cn" style="color: #8f5902;">FALSE</span></span>
<span id="cb12-38">    ))</span>
<span id="cb12-39">}</span></code></pre></div>
</div>
</section>
<section id="make-the-dataframe" class="level2">
<h2 class="anchored" data-anchor-id="make-the-dataframe">Make the Dataframe</h2>
<p>The final code snippet will create a data frame with the following columns:</p>
<ul>
<li><p><code>episode_name</code></p></li>
<li><p><code>episode_season</code></p></li>
<li><p><code>rating</code></p></li>
<li><p><code>total_votes</code></p></li>
<li><p><code>air_date</code></p></li>
<li><p><code>description</code></p></li>
</ul>
<p>and save it under the variable <code>south_park</code>.</p>
<p>Let use look at the data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">south_park  <span class="sc" style="color: #5E5E5E;">|&gt;</span> <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">10</span>)  <span class="sc" style="color: #5E5E5E;">|&gt;</span> gt<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">gt</span>()  <span class="sc" style="color: #5E5E5E;">|&gt;</span> gtExtras<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">gt_theme_538</span>()</span></code></pre></div>
<div class="cell-output-display">

<div id="dgtdwmrpuy" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
html {
  font-family: Chivo, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#dgtdwmrpuy) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: 300;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: none;
  border-top-width: 3px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#dgtdwmrpuy) .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#dgtdwmrpuy) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#dgtdwmrpuy) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#dgtdwmrpuy) .gt_bottom_border {
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#dgtdwmrpuy) .gt_col_headings {
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#dgtdwmrpuy) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: normal;
  text-transform: uppercase;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#dgtdwmrpuy) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: normal;
  text-transform: uppercase;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#dgtdwmrpuy) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#dgtdwmrpuy) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#dgtdwmrpuy) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#dgtdwmrpuy) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#dgtdwmrpuy) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  vertical-align: middle;
}

:where(#dgtdwmrpuy) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#dgtdwmrpuy) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#dgtdwmrpuy) .gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#dgtdwmrpuy) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #FFFFFF;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dgtdwmrpuy) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#dgtdwmrpuy) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#dgtdwmrpuy) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dgtdwmrpuy) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#dgtdwmrpuy) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#dgtdwmrpuy) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#dgtdwmrpuy) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dgtdwmrpuy) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#dgtdwmrpuy) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#dgtdwmrpuy) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#dgtdwmrpuy) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#dgtdwmrpuy) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dgtdwmrpuy) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#dgtdwmrpuy) .gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dgtdwmrpuy) .gt_left {
  text-align: left;
}

:where(#dgtdwmrpuy) .gt_center {
  text-align: center;
}

:where(#dgtdwmrpuy) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#dgtdwmrpuy) .gt_font_normal {
  font-weight: normal;
}

:where(#dgtdwmrpuy) .gt_font_bold {
  font-weight: bold;
}

:where(#dgtdwmrpuy) .gt_font_italic {
  font-style: italic;
}

:where(#dgtdwmrpuy) .gt_super {
  font-size: 65%;
}

:where(#dgtdwmrpuy) .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

:where(#dgtdwmrpuy) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#dgtdwmrpuy) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#dgtdwmrpuy) .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

:where(#dgtdwmrpuy) .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

:where(#dgtdwmrpuy) .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}

tbody tr:last-child {
  border-bottom: 2px solid #ffffff00;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">episode_name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">episode_season</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">rating</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">total_votes</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">air_date</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">description</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Unaired Pilot</td>
<td class="gt_row gt_left">S1, Ep0</td>
<td class="gt_row gt_left">7.6</td>
<td class="gt_row gt_left">(816)</td>
<td class="gt_row gt_left">
            26 Sep. 2019
    </td>
<td class="gt_row gt_left">
Cartman wakes up and realizes he was abducted by aliens after hearing it from his friends. He is in major denial at first though, but even Chef is a believer.    </td></tr>
    <tr><td class="gt_row gt_left">Cartman Gets an Anal Probe</td>
<td class="gt_row gt_left">S1, Ep1</td>
<td class="gt_row gt_left">7.9</td>
<td class="gt_row gt_left">(4,459)</td>
<td class="gt_row gt_left">
            13 Aug. 1997
    </td>
<td class="gt_row gt_left">
Cartman's dream about being abducted by aliens turns out to have actually happened, and when the aliens take Kyle's brother, all of them must find a way to bring the aliens back and confront them.    </td></tr>
    <tr><td class="gt_row gt_left">Weight Gain 4000</td>
<td class="gt_row gt_left">S1, Ep2</td>
<td class="gt_row gt_left">7.6</td>
<td class="gt_row gt_left">(3,518)</td>
<td class="gt_row gt_left">
            27 Aug. 1997
    </td>
<td class="gt_row gt_left">
Kathie Lee Gifford comes to South Park to present an award to Cartman, and Mr. Garrison hopes to use the event to assassinate her.    </td></tr>
    <tr><td class="gt_row gt_left">Volcano</td>
<td class="gt_row gt_left">S1, Ep3</td>
<td class="gt_row gt_left">7.7</td>
<td class="gt_row gt_left">(3,398)</td>
<td class="gt_row gt_left">
            20 Aug. 1997
    </td>
<td class="gt_row gt_left">
The kids go hunting with the rather trigger happy Jimbo and Ned. Little do they know that a volcano is on the verge of erupting.    </td></tr>
    <tr><td class="gt_row gt_left">Big Gay Al's Big Gay Boat Ride</td>
<td class="gt_row gt_left">S1, Ep4</td>
<td class="gt_row gt_left">7.6</td>
<td class="gt_row gt_left">(3,286)</td>
<td class="gt_row gt_left">
            3 Sep. 1997
    </td>
<td class="gt_row gt_left">
Stan becomes distracted from the upcoming football game because his dog is gay, so he turns to the gayest man in town for advice, Big Gay Al.    </td></tr>
    <tr><td class="gt_row gt_left">An Elephant Makes Love to a Pig</td>
<td class="gt_row gt_left">S1, Ep5</td>
<td class="gt_row gt_left">7.5</td>
<td class="gt_row gt_left">(3,049)</td>
<td class="gt_row gt_left">
            10 Sep. 1997
    </td>
<td class="gt_row gt_left">
Kyle tries to crossbreed an elephant with a pig to win a science contest.    </td></tr>
    <tr><td class="gt_row gt_left">Death</td>
<td class="gt_row gt_left">S1, Ep6</td>
<td class="gt_row gt_left">8.0</td>
<td class="gt_row gt_left">(3,128)</td>
<td class="gt_row gt_left">
            17 Sep. 1997
    </td>
<td class="gt_row gt_left">
Grampa wants Stan to kill him, the parents all want to kill the Terrance and Philip show, and Death just wants to kill someone.    </td></tr>
    <tr><td class="gt_row gt_left">Pinkeye</td>
<td class="gt_row gt_left">S1, Ep7</td>
<td class="gt_row gt_left">8.3</td>
<td class="gt_row gt_left">(3,262)</td>
<td class="gt_row gt_left">
            29 Oct. 1997
    </td>
<td class="gt_row gt_left">
The living dead beset South Park after a bottle of Worcestershire sauce mixes with embalming fluid at the mortuary; Tina Yothers judged a costume contest.    </td></tr>
    <tr><td class="gt_row gt_left">Starvin' Marvin</td>
<td class="gt_row gt_left">S1, Ep8</td>
<td class="gt_row gt_left">8.1</td>
<td class="gt_row gt_left">(3,141)</td>
<td class="gt_row gt_left">
            19 Nov. 1997
    </td>
<td class="gt_row gt_left">
The boys sponsor a starving Ethiopian child, only to have him show up on their doorstep.    </td></tr>
    <tr><td class="gt_row gt_left">Mr. Hankey, the Christmas Poo</td>
<td class="gt_row gt_left">S1, Ep9</td>
<td class="gt_row gt_left">8.1</td>
<td class="gt_row gt_left">(3,152)</td>
<td class="gt_row gt_left">
            17 Dec. 1997
    </td>
<td class="gt_row gt_left">
The town is forced to remove anything that either has anything to do with Christmas or is offensive in the least bit to anyone. And Kyle tries to convince everyone of the existence of "Mr. Hankey, the Christmas Poo."    </td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>The scraped data is now in the <code>south_park</code> data frame, and can be saved from here. However, to further analyze the data, it needs to be cleaned up.</p>
</section>
</section>
<section id="data-cleaning" class="level1">
<h1>Data Cleaning</h1>
<p>The data frame we created above contains the data we want to analyze. However, the data is not in the most usable format. We need to clean the data to make it more useful.</p>
<section id="total-votes-to-integer" class="level2">
<h2 class="anchored" data-anchor-id="total-votes-to-integer">Total Votes to Integer</h2>
<p>Remove the () from the total votes string, and convert it into an integer type.</p>
<div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb14-1">south_park$total_votes &lt;- south_park$total_votes |&gt;</span>
<span id="cb14-2">    str_replace_all("\\(|\\)|\\,", "") |&gt;</span>
<span id="cb14-3">    as.integer()</span></code></pre></div>
</section>
<section id="rating-to-a-double" class="level2">
<h2 class="anchored" data-anchor-id="rating-to-a-double">Rating to a double</h2>
<div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb15-1">south_park$rating &lt;- as.double(south_park$rating)</span></code></pre></div>
</section>
<section id="air_date-to-a-date" class="level2">
<h2 class="anchored" data-anchor-id="air_date-to-a-date">Air_date to a Date</h2>
<div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb16-1">south_park$air_date &lt;-</span>
<span id="cb16-2">    str_replace_all(south_park$air_date, "\\n", "") |&gt;</span>
<span id="cb16-3">    trimws() |&gt;</span>
<span id="cb16-4">    lubridate::dmy()</span></code></pre></div>
</section>
<section id="description-column-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="description-column-cleaning">Description column cleaning</h2>
<p>The description column contains a new line, so need to remove it.</p>
<div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb17-1">south_park$description &lt;-</span>
<span id="cb17-2">    str_replace_all(south_park$description, "\\n", "")</span></code></pre></div>
</section>
<section id="save-the-data" class="level2">
<h2 class="anchored" data-anchor-id="save-the-data">Save the data</h2>
<p>Finally save the data as a new dataframe:</p>
<div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb18-1">clean_sp &lt;- south_park |&gt;</span>
<span id="cb18-2">    mutate(</span>
<span id="cb18-3">        season = str_extract(episode_season, "(?&lt;=S)[:digit:]+"),</span>
<span id="cb18-4">        episode = str_extract(episode_season, "[:digit:]+$")</span>
<span id="cb18-5">    ) |&gt;</span>
<span id="cb18-6">    relocate(season, .before = rating) |&gt;</span>
<span id="cb18-7">    relocate(episode, .before = rating) |&gt;</span>
<span id="cb18-8">    select(-episode_season) |&gt;</span>
<span id="cb18-9">    mutate(</span>
<span id="cb18-10">        id = row_number()</span>
<span id="cb18-11">    )</span></code></pre></div>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>For static webpages, Rvest package is a great tool to scrape data from a webpage. It is easy to use, and it is very flexible. Further, the data is in a very usable format, and does not need to be cleaned up a great deal. Each function in the package is well documented, and the code is easy to read, like most tidyverse packages.</p>
</section>
<section id="references" class="level1">
<h1>References</h1>
<ul>
<li><a href="https://rvest.tidyverse.org/">Rvest</a></li>
</ul>
<div class="callout-caution callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Session Info
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>R version 4.2.0 (2022-04-22) Platform: aarch64-apple-darwin20 (64-bit) Running under: macOS Monterey 12.4</p>
<p>Matrix products: default BLAS: /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/lib/libRblas.0.dylib LAPACK: /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/lib/libRlapack.dylib</p>
<p>locale: [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8</p>
<p>attached base packages: [1] stats graphics grDevices utils datasets methods base</p>
<p>other attached packages: [1] forcats_0.5.1 stringr_1.4.0 dplyr_1.0.9 purrr_0.3.4<br>
[5] readr_2.1.2 tidyr_1.2.0 tibble_3.1.7 ggplot2_3.3.6<br>
[9] tidyverse_1.3.1 rvest_1.0.2</p>
<p>loaded via a namespace (and not attached): [1] tidyselect_1.1.2 rematch2_2.1.2 haven_2.5.0 paletteer_1.4.0<br>
[5] colorspace_2.0-3 vctrs_0.4.1 generics_0.1.2 htmltools_0.5.2<br>
[9] utf8_1.2.2 rlang_1.0.2 pillar_1.7.0 glue_1.6.2<br>
[13] withr_2.5.0 DBI_1.1.2 gtExtras_0.3.1 selectr_0.4-2<br>
[17] dbplyr_2.1.1 modelr_0.1.8 readxl_1.4.0 lifecycle_1.0.1<br>
[21] munsell_0.5.0 gtable_0.3.0 cellranger_1.1.0 fontawesome_0.2.2 [25] tzdb_0.3.0 fastmap_1.1.0 curl_4.3.2 fansi_1.0.3<br>
[29] broom_0.8.0 checkmate_2.1.0 scales_1.2.0 backports_1.4.1<br>
[33] jsonlite_1.8.0 fs_1.5.2 hms_1.1.1 digest_0.6.29<br>
[37] stringi_1.7.6 grid_4.2.0 cli_3.3.0 tools_4.2.0<br>
[41] sass_0.4.1 magrittr_2.0.3 crayon_1.5.1 pkgconfig_2.0.3<br>
[45] ellipsis_0.3.2 xml2_1.3.3 reprex_2.0.1 lubridate_1.8.0<br>
[49] assertthat_0.2.1 gt_0.6.0 httr_1.4.3 rstudioapi_0.13<br>
[53] R6_2.5.1 compiler_4.2.0</p>
</div>
</div>
</div>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {Web Scraping with {R} and {RVest}},
  date = {2022-06-20},
  url = {https://karatsidhu.com/posts/webscraping-with-rvest/rvest-imdb.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“Web Scraping with R and RVest.”</span> June
20, 2022. <a href="https://karatsidhu.com/posts/webscraping-with-rvest/rvest-imdb.html">https://karatsidhu.com/posts/webscraping-with-rvest/rvest-imdb.html</a>.
</div></div></section></div> ]]></description>
  <category>Data-Analysis</category>
  <category>Tidyverse</category>
  <category>misc</category>
  <category>Long-Read</category>
  <guid>https://karatsidhu.com/posts/webscraping-with-rvest/rvest-imdb.html</guid>
  <pubDate>Mon, 20 Jun 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/webscraping-with-rvest/images/logo.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>A Quick Guide to Formatting with Quarto</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/quarto-tutorial/quarto-tutorial.html</link>
  <description><![CDATA[ 




<section id="quarto-formatting" class="level1 page-columns page-full">
<h1>Quarto Formatting</h1>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>I decided to start working with Quarto for majority of my writing needs and have been experimenting with its various features, formatting and quirks. I am by no means anywhere close to an expert, however, with this write-up I hope to help out anyone starting out working with QMD files. This is a few small tips and notes (mostly for me) to use as a reference.</p>
<p>QMD works similar to markdown so basic markdown syntax<sup>1</sup> applies for formatting text.</p>
</section>
<section id="basic-code-formatting" class="level3">
<h3 class="anchored" data-anchor-id="basic-code-formatting">Basic Code Formatting</h3>
<p>A lot of Quarto users are coming from RMarkdown, so formatting locations feel familiar and different at the same time. Code chunks format locations are inside the cells preceded with a <code>#|</code>, at the beginning of each code block.</p>
<p>A simple example of this behavior:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><span class="in" style="color: #5E5E5E;">```{r}</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;">#| code-fold: true</span></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;">#| label: fig-mtcars</span></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;">#| fig-cap: "Fig. 1 Mpg and hp  of Cars"</span></span>
<span id="cb1-5"></span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;">library</span>(ggplot2)</span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> mtcars, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> mpg, <span class="at" style="color: #657422;">y=</span>hp)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb1-9"><span class="fu" style="color: #4758AB;">geom_smooth</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb1-10"><span class="fu" style="color: #4758AB;">geom_jitter</span>()</span>
<span id="cb1-11"></span>
<span id="cb1-12"><span class="in" style="color: #5E5E5E;">```</span></span></code></pre></div>
<p>which generates the following output:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;">library</span>(ggplot2)</span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> mtcars, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> mpg, <span class="at" style="color: #657422;">y=</span>hp)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;">geom_smooth</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;">geom_jitter</span>()</span></code></pre></div>
</details>
<div class="cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-mtcars" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://karatsidhu.com/posts/quarto-tutorial/quarto-tutorial_files/figure-html/fig-mtcars-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Mpg and hp of Cars</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Figure caption, code folding are applied from the commands in the first line of the code block.</p>
</section>
<section id="margin-content" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="margin-content">Margin Content</h3>
<p>In certain situations, be it for aesthetics or to maximize the use of whitespace, Quarto allows the user to place content including figures, tables, captions etc on the “margin” area.</p>
<p>The syntax to add a figure to the margin is:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb4-1"></span>
<span id="cb4-2">::: {.column-margin}</span>
<span id="cb4-3">![A margin image](image.png)</span>
<span id="cb4-4">:::</span></code></pre></div>
<section id="margin-figures-tables" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="margin-figures-tables">Margin Figures &amp; Tables</h4>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">mtcars[<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">6</span>, <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">3</span>]  <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb5-2">gt<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">gt</span>()  <span class="sc" style="color: #5E5E5E;">|&gt;</span> gtExtras<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">gt_theme_538</span>()</span></code></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">

<div id="nljrehzijt" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
html {
  font-family: Chivo, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#nljrehzijt) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: 300;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: none;
  border-top-width: 3px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#nljrehzijt) .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#nljrehzijt) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#nljrehzijt) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#nljrehzijt) .gt_bottom_border {
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nljrehzijt) .gt_col_headings {
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#nljrehzijt) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: normal;
  text-transform: uppercase;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#nljrehzijt) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: normal;
  text-transform: uppercase;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#nljrehzijt) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#nljrehzijt) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#nljrehzijt) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#nljrehzijt) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#nljrehzijt) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  vertical-align: middle;
}

:where(#nljrehzijt) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#nljrehzijt) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#nljrehzijt) .gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#nljrehzijt) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #FFFFFF;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nljrehzijt) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#nljrehzijt) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#nljrehzijt) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nljrehzijt) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#nljrehzijt) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#nljrehzijt) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nljrehzijt) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nljrehzijt) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#nljrehzijt) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#nljrehzijt) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nljrehzijt) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#nljrehzijt) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nljrehzijt) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#nljrehzijt) .gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nljrehzijt) .gt_left {
  text-align: left;
}

:where(#nljrehzijt) .gt_center {
  text-align: center;
}

:where(#nljrehzijt) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#nljrehzijt) .gt_font_normal {
  font-weight: normal;
}

:where(#nljrehzijt) .gt_font_bold {
  font-weight: bold;
}

:where(#nljrehzijt) .gt_font_italic {
  font-style: italic;
}

:where(#nljrehzijt) .gt_super {
  font-size: 65%;
}

:where(#nljrehzijt) .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

:where(#nljrehzijt) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#nljrehzijt) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#nljrehzijt) .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

:where(#nljrehzijt) .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

:where(#nljrehzijt) .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}

tbody tr:last-child {
  border-bottom: 2px solid #ffffff00;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">mpg</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">cyl</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">disp</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">21.0</td>
<td class="gt_row gt_right">6</td>
<td class="gt_row gt_right">160</td></tr>
    <tr><td class="gt_row gt_right">21.0</td>
<td class="gt_row gt_right">6</td>
<td class="gt_row gt_right">160</td></tr>
    <tr><td class="gt_row gt_right">22.8</td>
<td class="gt_row gt_right">4</td>
<td class="gt_row gt_right">108</td></tr>
    <tr><td class="gt_row gt_right">21.4</td>
<td class="gt_row gt_right">6</td>
<td class="gt_row gt_right">258</td></tr>
    <tr><td class="gt_row gt_right">18.7</td>
<td class="gt_row gt_right">8</td>
<td class="gt_row gt_right">360</td></tr>
    <tr><td class="gt_row gt_right">18.1</td>
<td class="gt_row gt_right">6</td>
<td class="gt_row gt_right">225</td></tr>
  </tbody>
  
  
</table>
</div>
</div></div></div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;">library</span>(ggplot2)</span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> mtcars, <span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> mpg, <span class="at" style="color: #657422;">y=</span>hp)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-3"><span class="fu" style="color: #4758AB;">geom_smooth</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb6-4"><span class="fu" style="color: #4758AB;">geom_jitter</span>()</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula 'y ~ x'</code></pre>
</div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<div id="fig-mtcars3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://karatsidhu.com/posts/quarto-tutorial/quarto-tutorial_files/figure-html/fig-mtcars3-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Mpg and hp of Cars</figcaption><p></p>
</figure>
</div>
</div></div></div>
<p>Additionally, captions, comments and text blocks can be added to the margin area in the output.</p>
</section>
</section>
<section id="overflowing-content" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="overflowing-content">Overflowing Content</h3>
<p>To extend the functionality, qmd files also allow us to ignore margins altogether by adding <code>column:screen</code> function to the code chunk. This can result in great looking articles and blogs by adding functions.</p>
<p>Using screen fill function, here is a map of NYC embedded into the blog.</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;">library</span>(leaflet)</span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;">leaflet</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;">addTiles</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span>  <span class="co" style="color: #5E5E5E;"># Add default OpenStreetMap map tiles</span></span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;">addMarkers</span>(<span class="at" style="color: #657422;">lat=</span><span class="fl" style="color: #AD0000;">40.7128</span>, <span class="at" style="color: #657422;">lng=</span><span class="sc" style="color: #5E5E5E;">-</span><span class="fl" style="color: #AD0000;">74.0060</span>, <span class="at" style="color: #657422;">popup=</span><span class="st" style="color: #20794D;">"NY City"</span>)</span></code></pre></div>
<div class="cell-output-display column-screen">
<div id="htmlwidget-f750f918ee45a44ea8c6" style="width:100%;height:464px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-f750f918ee45a44ea8c6">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[40.7128,-74.006,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"NY City",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[40.7128,40.7128],"lng":[-74.006,-74.006]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Further, content can be filled partially on the screen.</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb9-1"></span>
<span id="cb9-2">::: {..column-screen-left}</span>
<span id="cb9-3">:::</span></code></pre></div>
<div class="{..column-screen-left} page-columns page-full">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">knitr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">kable</span>(</span>
<span id="cb10-2">  mtcars[<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">6</span>, <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">10</span>]</span>
<span id="cb10-3">)</span></code></pre></div>
<div class="cell-output-display column-screen-inset-left">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 28%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">mpg</th>
<th style="text-align: right;">cyl</th>
<th style="text-align: right;">disp</th>
<th style="text-align: right;">hp</th>
<th style="text-align: right;">drat</th>
<th style="text-align: right;">wt</th>
<th style="text-align: right;">qsec</th>
<th style="text-align: right;">vs</th>
<th style="text-align: right;">am</th>
<th style="text-align: right;">gear</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Mazda RX4</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.620</td>
<td style="text-align: right;">16.46</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mazda RX4 Wag</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.875</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Datsun 710</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">3.85</td>
<td style="text-align: right;">2.320</td>
<td style="text-align: right;">18.61</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hornet 4 Drive</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">258</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.08</td>
<td style="text-align: right;">3.215</td>
<td style="text-align: right;">19.44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hornet Sportabout</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">360</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">3.15</td>
<td style="text-align: right;">3.440</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Valiant</td>
<td style="text-align: right;">18.1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">225</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">2.76</td>
<td style="text-align: right;">3.460</td>
<td style="text-align: right;">20.22</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="callout-blocks" class="level3">
<h3 class="anchored" data-anchor-id="callout-blocks">Callout Blocks</h3>
<p>To draw attention towards something in the text, a block of text call be used as a callout blog in Quarto.</p>
<p>Inline code</p>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb11-1">:::{.callout-note}</span>
<span id="cb11-2">Note: This is a callout of type `note`</span>
<span id="cb11-3">:::</span></code></pre></div>
<p>renders the following output</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note: This is a callout of type <code>note</code></p>
</div>
</div>
<p>Other types of callouts like warning, tip and important are also built in for multiple types of callout blocks.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip With Caption
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is an example of a callout with a caption.</p>
</div>
</div>
</section>
<section id="further-reading" class="level3">
<h3 class="anchored" data-anchor-id="further-reading">Further Reading</h3>
<ul>
<li>Official Documents: https://quarto.org/docs/guide/</li>
</ul>
</section>
<section id="acknowledgments" class="level3">
<h3 class="anchored" data-anchor-id="acknowledgments">Acknowledgments</h3>
<p>Acknowledgments section can be added to the end of article/text by using the <code>.appendix</code> command. It will appear at the end of the article/blog with footnotes and citations,etc. formatted as a smaller text font.</p>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb12-1"></span>
<span id="cb12-2">## Acknowledgments {.appendix}</span>
<span id="cb12-3"></span>
<span id="cb12-4">This is the sample text for the acknowledgement section. I made use of the Official Quarto documentation to help me with writing this post. </span>
<span id="cb12-5"></span></code></pre></div>
</section>

</section>


<div id="quarto-appendix" class="default"><section id="acknowledgments-1" class="level2 appendix"><h2 class="quarto-appendix-heading">Acknowledgments</h2><div class="quarto-appendix-contents">

<p>This is the sample text for the acknowledgement section. I made use of the Official Quarto documentation to help me with writing this post.</p>


</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://www.markdownguide.org/basic-syntax/↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {A {Quick} {Guide} to {Formatting} with {Quarto}},
  date = {2022-06-06},
  url = {https://karatsidhu.com/posts/quarto-tutorial/quarto-tutorial.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“A Quick Guide to Formatting with
Quarto.”</span> June 6, 2022. <a href="https://karatsidhu.com/posts/quarto-tutorial/quarto-tutorial.html">https://karatsidhu.com/posts/quarto-tutorial/quarto-tutorial.html</a>.
</div></div></section></div> ]]></description>
  <category>Quarto</category>
  <category>Review</category>
  <guid>https://karatsidhu.com/posts/quarto-tutorial/quarto-tutorial.html</guid>
  <pubDate>Mon, 06 Jun 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/quarto-tutorial/images/logo.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title>TidyModels - XGBoost</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/tidymodels-xgboost/xgboost.html</link>
  <description><![CDATA[ 




<section id="xgboost-with-tidymodels" class="level1">
<h1>XGBoost with TidyModels</h1>
<p>TidyTuesday Volleyball Data</p>
<p>This is my ongoing series<sup>1</sup> of learning a bit more about how different algorithms in TidyModels packages work and performing some of those with the help of available material online.</p>
<p>The source of this code is from a Julie Silgie video of the same dataset<sup>2</sup> that I used to follow along.</p>
<p>I have never had to use XGBoost in my line of work so it was a completely new experience for me.</p>
<p>I trimmed the data because it takes forever to run the workflow on my local machine, so the model produced is not very good.</p>
<p>I have linked to the original in the footnotes, please use that tutorial instead. This is very bare-bones.</p>
<section id="the-roc-curve-is-terrible-this-post-is-merely-for-learning-purposes." class="level3">
<h3 class="anchored" data-anchor-id="the-roc-curve-is-terrible-this-post-is-merely-for-learning-purposes.">The ROC curve is terrible, this post is merely for learning purposes.</h3>
<p>If anyome decides to use this code, a lot more tuning is necessary before the XGBoost is useful for this dataset.</p>
<p>Now, onto the coding:</p>
</section>
</section>
<section id="loading-the-packages" class="level1">
<h1>Loading the packages</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(tidymodels)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 0.2.0 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ broom        0.8.0     ✔ recipes      0.2.0
✔ dials        0.1.1     ✔ rsample      0.1.1
✔ dplyr        1.0.9     ✔ tibble       3.1.7
✔ ggplot2      3.3.6     ✔ tidyr        1.2.0
✔ infer        1.0.0     ✔ tune         0.2.0
✔ modeldata    0.1.1     ✔ workflows    0.2.6
✔ parsnip      0.2.1     ✔ workflowsets 0.2.1
✔ purrr        0.3.4     ✔ yardstick    0.0.9</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ purrr::discard() masks scales::discard()
✖ dplyr::filter()  masks stats::filter()
✖ dplyr::lag()     masks stats::lag()
✖ recipes::step()  masks stats::step()
• Use tidymodels_prefer() to resolve common conflicts.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ readr   2.1.2     ✔ forcats 0.5.1
✔ stringr 1.4.0     </code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ readr::col_factor() masks scales::col_factor()
✖ purrr::discard()    masks scales::discard()
✖ dplyr::filter()     masks stats::filter()
✖ stringr::fixed()    masks recipes::fixed()
✖ dplyr::lag()        masks stats::lag()
✖ readr::spec()       masks yardstick::spec()</code></pre>
</div>
</div>
</section>
<section id="loading-the-data" class="level1">
<h1>Loading the data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;">library</span>(readr)</span>
<span id="cb9-2">vb_matches <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">read_csv</span>(<span class="st" style="color: #20794D;">"~/Downloads/vb_matches.txt"</span>)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Rows: 76756 Columns: 65
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (17): circuit, tournament, country, gender, w_player1, w_p1_country, w_...
dbl  (42): year, match_num, w_p1_age, w_p1_hgt, w_p2_age, w_p2_hgt, l_p1_age...
date  (5): date, w_p1_birthdate, w_p2_birthdate, l_p1_birthdate, l_p2_birthdate
time  (1): duration

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;">View</span>(vb_matches)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Warning in system2("/usr/bin/otool", c("-L", shQuote(DSO)), stdout = TRUE):
running command ''/usr/bin/otool' -L '/Library/Frameworks/R.framework/Resources/
modules/R_de.so'' had status 1</code></pre>
</div>
</div>
<section id="taking-only-the-top-1000-rows" class="level2">
<h2 class="anchored" data-anchor-id="taking-only-the-top-1000-rows">Taking only the top 1000 rows</h2>
<p>the original dataset is ~80x bigger</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">vb_matches <span class="ot" style="color: #003B4F;">&lt;-</span> vb_matches <span class="sc" style="color: #5E5E5E;">|&gt;</span> <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(w_p1_tot_kills)) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb13-2">  <span class="fu" style="color: #4758AB;">slice_head</span>(<span class="at" style="color: #657422;">n=</span><span class="dv" style="color: #AD0000;">1000</span>)</span></code></pre></div>
</div>
</section>
<section id="cleaning-the-columns-and-combining-some-variables-into-new-total-variables" class="level2">
<h2 class="anchored" data-anchor-id="cleaning-the-columns-and-combining-some-variables-into-new-total-variables">cleaning the columns, and combining some variables into new “total” variables</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">vb_parsed <span class="ot" style="color: #003B4F;">&lt;-</span> vb_matches <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb14-2">  <span class="fu" style="color: #4758AB;">transmute</span>(</span>
<span id="cb14-3">    circuit,</span>
<span id="cb14-4">    gender,</span>
<span id="cb14-5">    year,</span>
<span id="cb14-6">    <span class="at" style="color: #657422;">w_attacks =</span> w_p1_tot_attacks <span class="sc" style="color: #5E5E5E;">+</span> w_p2_tot_attacks,</span>
<span id="cb14-7">    <span class="at" style="color: #657422;">w_kills =</span> w_p1_tot_kills <span class="sc" style="color: #5E5E5E;">+</span> w_p2_tot_kills,</span>
<span id="cb14-8">    <span class="at" style="color: #657422;">w_errors =</span> w_p1_tot_errors <span class="sc" style="color: #5E5E5E;">+</span> w_p2_tot_errors,</span>
<span id="cb14-9">    <span class="at" style="color: #657422;">w_aces =</span> w_p1_tot_aces <span class="sc" style="color: #5E5E5E;">+</span> w_p2_tot_aces,</span>
<span id="cb14-10">    <span class="at" style="color: #657422;">w_serve_errors =</span> w_p1_tot_serve_errors <span class="sc" style="color: #5E5E5E;">+</span> w_p2_tot_serve_errors,</span>
<span id="cb14-11">    <span class="at" style="color: #657422;">w_blocks =</span> w_p1_tot_blocks <span class="sc" style="color: #5E5E5E;">+</span> w_p2_tot_blocks,</span>
<span id="cb14-12">    <span class="at" style="color: #657422;">w_digs =</span> w_p1_tot_digs <span class="sc" style="color: #5E5E5E;">+</span> w_p2_tot_digs,</span>
<span id="cb14-13">    <span class="at" style="color: #657422;">l_attacks =</span> l_p1_tot_attacks <span class="sc" style="color: #5E5E5E;">+</span> l_p2_tot_attacks,</span>
<span id="cb14-14">    <span class="at" style="color: #657422;">l_kills =</span> l_p1_tot_kills <span class="sc" style="color: #5E5E5E;">+</span> l_p2_tot_kills,</span>
<span id="cb14-15">    <span class="at" style="color: #657422;">l_errors =</span> l_p1_tot_errors <span class="sc" style="color: #5E5E5E;">+</span> l_p2_tot_errors,</span>
<span id="cb14-16">    <span class="at" style="color: #657422;">l_aces =</span> l_p1_tot_aces <span class="sc" style="color: #5E5E5E;">+</span> l_p2_tot_aces,</span>
<span id="cb14-17">    <span class="at" style="color: #657422;">l_serve_errors =</span> l_p1_tot_serve_errors <span class="sc" style="color: #5E5E5E;">+</span> l_p2_tot_serve_errors,</span>
<span id="cb14-18">    <span class="at" style="color: #657422;">l_blocks =</span> l_p1_tot_blocks <span class="sc" style="color: #5E5E5E;">+</span> l_p2_tot_blocks,</span>
<span id="cb14-19">    <span class="at" style="color: #657422;">l_digs =</span> l_p1_tot_digs <span class="sc" style="color: #5E5E5E;">+</span> l_p2_tot_digs</span>
<span id="cb14-20">  )  <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb14-21">  <span class="fu" style="color: #4758AB;">na.omit</span>()</span></code></pre></div>
</div>
</section>
</section>
<section id="splitting-the-data-into-winners-and-losers" class="level1">
<h1>splitting the data into winners and losers</h1>
<p>and further making a dataframe to use as a starting spot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">winners <span class="ot" style="color: #003B4F;">&lt;-</span> vb_parsed <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-2">  <span class="fu" style="color: #4758AB;">select</span>(circuit, gender, year,</span>
<span id="cb15-3">         w_attacks<span class="sc" style="color: #5E5E5E;">:</span>w_digs) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-4">  <span class="fu" style="color: #4758AB;">rename_with</span>(<span class="sc" style="color: #5E5E5E;">~</span> <span class="fu" style="color: #4758AB;">str_remove_all</span>(., <span class="st" style="color: #20794D;">"w_"</span>), w_attacks<span class="sc" style="color: #5E5E5E;">:</span>w_digs) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-5">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">win =</span> <span class="st" style="color: #20794D;">"win"</span>)</span>
<span id="cb15-6"></span>
<span id="cb15-7">losers <span class="ot" style="color: #003B4F;">&lt;-</span> vb_parsed <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-8">  <span class="fu" style="color: #4758AB;">select</span>(circuit, gender, year,</span>
<span id="cb15-9">         l_attacks<span class="sc" style="color: #5E5E5E;">:</span>l_digs) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-10">  <span class="fu" style="color: #4758AB;">rename_with</span>(<span class="sc" style="color: #5E5E5E;">~</span> <span class="fu" style="color: #4758AB;">str_remove_all</span>(., <span class="st" style="color: #20794D;">"l_"</span>), l_attacks<span class="sc" style="color: #5E5E5E;">:</span>l_digs) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-11">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">win =</span> <span class="st" style="color: #20794D;">"lose"</span>)</span>
<span id="cb15-12"></span>
<span id="cb15-13">vb_df <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">bind_rows</span>(winners, losers) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-14">  <span class="fu" style="color: #4758AB;">mutate_if</span>(is.character, factor)</span></code></pre></div>
</div>
</section>
<section id="data-viz" class="level1">
<h1>Data Viz</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">vb_df <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-2">  <span class="fu" style="color: #4758AB;">pivot_longer</span>(attacks<span class="sc" style="color: #5E5E5E;">:</span>digs, <span class="at" style="color: #657422;">names_to =</span> <span class="st" style="color: #20794D;">"stat"</span>, <span class="at" style="color: #657422;">values_to =</span> <span class="st" style="color: #20794D;">"value"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-3">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(gender, value, <span class="at" style="color: #657422;">fill =</span> win, <span class="at" style="color: #657422;">color =</span> win)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-4">  <span class="fu" style="color: #4758AB;">geom_boxplot</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.4</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-5">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;">~</span>stat, <span class="at" style="color: #657422;">scales =</span> <span class="st" style="color: #20794D;">"free_y"</span>, <span class="at" style="color: #657422;">nrow =</span> <span class="dv" style="color: #AD0000;">2</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-6">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">y =</span> <span class="cn" style="color: #8f5902;">NULL</span>, <span class="at" style="color: #657422;">color =</span> <span class="cn" style="color: #8f5902;">NULL</span>, <span class="at" style="color: #657422;">fill =</span> <span class="cn" style="color: #8f5902;">NULL</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-xgboost/xgboost_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="splitting-the-data-into-train-and-test" class="level1">
<h1>Splitting the data into train and test</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="fu" style="color: #4758AB;">set.seed</span>(<span class="dv" style="color: #AD0000;">123</span>)</span>
<span id="cb17-2">vb_split <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">initial_split</span>(vb_df, <span class="at" style="color: #657422;">strata =</span> win)</span>
<span id="cb17-3">vb_train <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">training</span>(vb_split)</span>
<span id="cb17-4">vb_test <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">testing</span>(vb_split)</span></code></pre></div>
</div>
</section>
<section id="spec-the-xgboost-model-with-no-tuning-params" class="level1">
<h1>Spec the XGBoost model with no tuning params</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">xgb_spec <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">boost_tree</span>(</span>
<span id="cb18-2">  <span class="at" style="color: #657422;">trees =</span> <span class="dv" style="color: #AD0000;">1000</span>, </span>
<span id="cb18-3">  <span class="at" style="color: #657422;">tree_depth =</span> <span class="fu" style="color: #4758AB;">tune</span>(), <span class="at" style="color: #657422;">min_n =</span> <span class="fu" style="color: #4758AB;">tune</span>(), </span>
<span id="cb18-4">  <span class="at" style="color: #657422;">loss_reduction =</span> <span class="fu" style="color: #4758AB;">tune</span>(),                     <span class="do" style="color: #5E5E5E;
font-style: italic;">## first three: model complexity</span></span>
<span id="cb18-5">  <span class="at" style="color: #657422;">sample_size =</span> <span class="fu" style="color: #4758AB;">tune</span>(), <span class="at" style="color: #657422;">mtry =</span> <span class="fu" style="color: #4758AB;">tune</span>(),         <span class="do" style="color: #5E5E5E;
font-style: italic;">## randomness</span></span>
<span id="cb18-6">  <span class="at" style="color: #657422;">learn_rate =</span> <span class="fu" style="color: #4758AB;">tune</span>(),                         <span class="do" style="color: #5E5E5E;
font-style: italic;">## step size</span></span>
<span id="cb18-7">) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb18-8">  <span class="fu" style="color: #4758AB;">set_engine</span>(<span class="st" style="color: #20794D;">"xgboost"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb18-9">  <span class="fu" style="color: #4758AB;">set_mode</span>(<span class="st" style="color: #20794D;">"classification"</span>)</span>
<span id="cb18-10"></span>
<span id="cb18-11">xgb_spec</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>Boosted Tree Model Specification (classification)

Main Arguments:
  mtry = tune()
  trees = 1000
  min_n = tune()
  tree_depth = tune()
  learn_rate = tune()
  loss_reduction = tune()
  sample_size = tune()

Computational engine: xgboost </code></pre>
</div>
</div>
</section>
<section id="xgboost-grid" class="level1">
<h1>XGBoost grid</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">xgb_grid <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">grid_latin_hypercube</span>(</span>
<span id="cb20-2">  <span class="fu" style="color: #4758AB;">tree_depth</span>(),</span>
<span id="cb20-3">  <span class="fu" style="color: #4758AB;">min_n</span>(),</span>
<span id="cb20-4">  <span class="fu" style="color: #4758AB;">loss_reduction</span>(),</span>
<span id="cb20-5">  <span class="at" style="color: #657422;">sample_size =</span> <span class="fu" style="color: #4758AB;">sample_prop</span>(),</span>
<span id="cb20-6">  <span class="fu" style="color: #4758AB;">finalize</span>(<span class="fu" style="color: #4758AB;">mtry</span>(), vb_train),</span>
<span id="cb20-7">  <span class="fu" style="color: #4758AB;">learn_rate</span>(),</span>
<span id="cb20-8">  <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">30</span></span>
<span id="cb20-9">)</span>
<span id="cb20-10"></span>
<span id="cb20-11">xgb_grid</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 30 × 6
   tree_depth min_n loss_reduction sample_size  mtry    learn_rate
        &lt;int&gt; &lt;int&gt;          &lt;dbl&gt;       &lt;dbl&gt; &lt;int&gt;         &lt;dbl&gt;
 1          3    14   0.000242           0.129     3 0.000786     
 2          5     2   0.00862            0.794    11 0.00154      
 3          1    21   0.0000000171       0.533     2 0.0000188    
 4         11    27  12.1                0.162     5 0.00000450   
 5          5    19   0.152              0.580     1 0.0155       
 6          5    23   0.0000150          0.590     9 0.0356       
 7          8    17   0.00000433         0.677     5 0.000347     
 8          6     9   0.630              0.287     8 0.00622      
 9          1     6   0.000460           0.201     6 0.000000146  
10          2    36   0.00315            0.625     8 0.00000000168
# … with 20 more rows</code></pre>
</div>
</div>
</section>
<section id="preparing-the-workflow-formula" class="level1">
<h1>Preparing the workflow formula</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">xgb_wf <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">workflow</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb22-2">  <span class="fu" style="color: #4758AB;">add_formula</span>(win <span class="sc" style="color: #5E5E5E;">~</span> .) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb22-3">  <span class="fu" style="color: #4758AB;">add_model</span>(xgb_spec)</span>
<span id="cb22-4"></span>
<span id="cb22-5">xgb_wf</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>══ Workflow ════════════════════════════════════════════════════════════════════
Preprocessor: Formula
Model: boost_tree()

── Preprocessor ────────────────────────────────────────────────────────────────
win ~ .

── Model ───────────────────────────────────────────────────────────────────────
Boosted Tree Model Specification (classification)

Main Arguments:
  mtry = tune()
  trees = 1000
  min_n = tune()
  tree_depth = tune()
  learn_rate = tune()
  loss_reduction = tune()
  sample_size = tune()

Computational engine: xgboost </code></pre>
</div>
</div>
</section>
<section id="data-folds" class="level1">
<h1>Data folds</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="fu" style="color: #4758AB;">set.seed</span>(<span class="dv" style="color: #AD0000;">123</span>)</span>
<span id="cb24-2">vb_folds <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">vfold_cv</span>(vb_train, <span class="at" style="color: #657422;">strata =</span> win)</span>
<span id="cb24-3"></span>
<span id="cb24-4">vb_folds</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>#  10-fold cross-validation using stratification 
# A tibble: 10 × 2
   splits             id    
   &lt;list&gt;             &lt;chr&gt; 
 1 &lt;split [1320/148]&gt; Fold01
 2 &lt;split [1320/148]&gt; Fold02
 3 &lt;split [1320/148]&gt; Fold03
 4 &lt;split [1320/148]&gt; Fold04
 5 &lt;split [1322/146]&gt; Fold05
 6 &lt;split [1322/146]&gt; Fold06
 7 &lt;split [1322/146]&gt; Fold07
 8 &lt;split [1322/146]&gt; Fold08
 9 &lt;split [1322/146]&gt; Fold09
10 &lt;split [1322/146]&gt; Fold10</code></pre>
</div>
</div>
</section>
<section id="running-the-model" class="level1">
<h1>Running the model</h1>
<section id="note-takes-a-long-time-to-process." class="level2">
<h2 class="anchored" data-anchor-id="note-takes-a-long-time-to-process.">Note: Takes a long time to process.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1">doParallel<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">registerDoParallel</span>()</span>
<span id="cb26-2"></span>
<span id="cb26-3"><span class="fu" style="color: #4758AB;">set.seed</span>(<span class="dv" style="color: #AD0000;">234</span>)</span>
<span id="cb26-4">xgb_res <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">tune_grid</span>(</span>
<span id="cb26-5">  xgb_wf,</span>
<span id="cb26-6">  <span class="at" style="color: #657422;">resamples =</span> vb_folds,</span>
<span id="cb26-7">  <span class="at" style="color: #657422;">grid =</span> xgb_grid,</span>
<span id="cb26-8">  <span class="at" style="color: #657422;">control =</span> <span class="fu" style="color: #4758AB;">control_grid</span>(<span class="at" style="color: #657422;">save_pred =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb26-9">)</span>
<span id="cb26-10"></span>
<span id="cb26-11">xgb_res</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># Tuning results
# 10-fold cross-validation using stratification 
# A tibble: 10 × 5
   splits             id     .metrics           .notes           .predictions
   &lt;list&gt;             &lt;chr&gt;  &lt;list&gt;             &lt;list&gt;           &lt;list&gt;      
 1 &lt;split [1320/148]&gt; Fold01 &lt;tibble [60 × 10]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 2 &lt;split [1320/148]&gt; Fold02 &lt;tibble [60 × 10]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 3 &lt;split [1320/148]&gt; Fold03 &lt;tibble [60 × 10]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 4 &lt;split [1320/148]&gt; Fold04 &lt;tibble [60 × 10]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 5 &lt;split [1322/146]&gt; Fold05 &lt;tibble [60 × 10]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 6 &lt;split [1322/146]&gt; Fold06 &lt;tibble [60 × 10]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 7 &lt;split [1322/146]&gt; Fold07 &lt;tibble [60 × 10]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 8 &lt;split [1322/146]&gt; Fold08 &lt;tibble [60 × 10]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
 9 &lt;split [1322/146]&gt; Fold09 &lt;tibble [60 × 10]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    
10 &lt;split [1322/146]&gt; Fold10 &lt;tibble [60 × 10]&gt; &lt;tibble [0 × 3]&gt; &lt;tibble&gt;    </code></pre>
</div>
</div>
</section>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><span class="fu" style="color: #4758AB;">collect_metrics</span>(xgb_res)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 60 × 12
    mtry min_n tree_depth learn_rate loss_reduction sample_size .metric 
   &lt;int&gt; &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;   
 1     3    14          3 0.000786     0.000242           0.129 accuracy
 2     3    14          3 0.000786     0.000242           0.129 roc_auc 
 3    11     2          5 0.00154      0.00862            0.794 accuracy
 4    11     2          5 0.00154      0.00862            0.794 roc_auc 
 5     2    21          1 0.0000188    0.0000000171       0.533 accuracy
 6     2    21          1 0.0000188    0.0000000171       0.533 roc_auc 
 7     5    27         11 0.00000450  12.1                0.162 accuracy
 8     5    27         11 0.00000450  12.1                0.162 roc_auc 
 9     1    19          5 0.0155       0.152              0.580 accuracy
10     1    19          5 0.0155       0.152              0.580 roc_auc 
# … with 50 more rows, and 5 more variables: .estimator &lt;chr&gt;, mean &lt;dbl&gt;,
#   n &lt;int&gt;, std_err &lt;dbl&gt;, .config &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="data-viz-results" class="level1">
<h1>Data Viz results</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1">xgb_res <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb30-2">  <span class="fu" style="color: #4758AB;">collect_metrics</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb30-3">  <span class="fu" style="color: #4758AB;">filter</span>(.metric <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"roc_auc"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb30-4">  <span class="fu" style="color: #4758AB;">select</span>(mean, mtry<span class="sc" style="color: #5E5E5E;">:</span>sample_size) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb30-5">  <span class="fu" style="color: #4758AB;">pivot_longer</span>(mtry<span class="sc" style="color: #5E5E5E;">:</span>sample_size,</span>
<span id="cb30-6">               <span class="at" style="color: #657422;">values_to =</span> <span class="st" style="color: #20794D;">"value"</span>,</span>
<span id="cb30-7">               <span class="at" style="color: #657422;">names_to =</span> <span class="st" style="color: #20794D;">"parameter"</span></span>
<span id="cb30-8">  ) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb30-9">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(value, mean, <span class="at" style="color: #657422;">color =</span> parameter)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb30-10">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.8</span>, <span class="at" style="color: #657422;">show.legend =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb30-11">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;">~</span>parameter, <span class="at" style="color: #657422;">scales =</span> <span class="st" style="color: #20794D;">"free_x"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb30-12">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">x =</span> <span class="cn" style="color: #8f5902;">NULL</span>, <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">"AUC"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-xgboost/xgboost_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="fu" style="color: #4758AB;">show_best</span>(xgb_res, <span class="st" style="color: #20794D;">"roc_auc"</span>)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 5 × 12
   mtry min_n tree_depth learn_rate loss_reduction sample_size .metric
  &lt;int&gt; &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;  
1     8     9          6    0.00622   0.630              0.287 roc_auc
2     6    13          9    0.00204   0.0000000676       0.898 roc_auc
3    11     2          5    0.00154   0.00862            0.794 roc_auc
4     1     5         13    0.0639    2.47               0.781 roc_auc
5     9    23          5    0.0356    0.0000150          0.590 roc_auc
# … with 5 more variables: .estimator &lt;chr&gt;, mean &lt;dbl&gt;, n &lt;int&gt;,
#   std_err &lt;dbl&gt;, .config &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1">best_auc <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">select_best</span>(xgb_res, <span class="st" style="color: #20794D;">"roc_auc"</span>)</span>
<span id="cb33-2">best_auc</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 1 × 7
   mtry min_n tree_depth learn_rate loss_reduction sample_size .config          
  &lt;int&gt; &lt;int&gt;      &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;            
1     8     9          6    0.00622          0.630       0.287 Preprocessor1_Mo…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1">final_xgb <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">finalize_workflow</span>(</span>
<span id="cb35-2">  xgb_wf,</span>
<span id="cb35-3">  best_auc</span>
<span id="cb35-4">)</span>
<span id="cb35-5"></span>
<span id="cb35-6">final_xgb</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>══ Workflow ════════════════════════════════════════════════════════════════════
Preprocessor: Formula
Model: boost_tree()

── Preprocessor ────────────────────────────────────────────────────────────────
win ~ .

── Model ───────────────────────────────────────────────────────────────────────
Boosted Tree Model Specification (classification)

Main Arguments:
  mtry = 8
  trees = 1000
  min_n = 9
  tree_depth = 6
  learn_rate = 0.00621594835720267
  loss_reduction = 0.629777153856609
  sample_size = 0.286838799694087

Computational engine: xgboost </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1">final_res <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">last_fit</span>(final_xgb, vb_split)</span>
<span id="cb37-2"></span>
<span id="cb37-3"><span class="fu" style="color: #4758AB;">collect_metrics</span>(final_res)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 2 × 4
  .metric  .estimator .estimate .config             
  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 accuracy binary         0.7   Preprocessor1_Model1
2 roc_auc  binary         0.759 Preprocessor1_Model1</code></pre>
</div>
</div>
</section>
<section id="roc-curve" class="level1">
<h1>ROC Curve</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1">final_res <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb39-2">  <span class="fu" style="color: #4758AB;">collect_predictions</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb39-3">  <span class="fu" style="color: #4758AB;">roc_curve</span>(win, .pred_win) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb39-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> <span class="dv" style="color: #AD0000;">1</span> <span class="sc" style="color: #5E5E5E;">-</span> specificity, <span class="at" style="color: #657422;">y =</span> sensitivity)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb39-5">  <span class="fu" style="color: #4758AB;">geom_line</span>(<span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">1.5</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"midnightblue"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb39-6">  <span class="fu" style="color: #4758AB;">geom_abline</span>(</span>
<span id="cb39-7">    <span class="at" style="color: #657422;">lty =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.5</span>,</span>
<span id="cb39-8">    <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"gray50"</span>,</span>
<span id="cb39-9">    <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">1.2</span></span>
<span id="cb39-10">  )</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-xgboost/xgboost_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="768"></p>
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://karatsidhu.com/posts/netflix-naive_bayes/naive_bayes↩︎</p></li>
<li id="fn2"><p><a href="https://www.youtube.com/watch?v=hpudxAmxHSM" class="uri">https://www.youtube.com/watch?v=hpudxAmxHSM</a>↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {TidyModels - {XGBoost}},
  date = {2022-06-02},
  url = {https://karatsidhu.com/posts/tidymodels-xgboost/xgboost.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“TidyModels - XGBoost.”</span> June 2, 2022. <a href="https://karatsidhu.com/posts/tidymodels-xgboost/xgboost.html">https://karatsidhu.com/posts/tidymodels-xgboost/xgboost.html</a>.
</div></div></section></div> ]]></description>
  <category>TidyModels</category>
  <category>XGBoost</category>
  <category>Machine Learning</category>
  <guid>https://karatsidhu.com/posts/tidymodels-xgboost/xgboost.html</guid>
  <pubDate>Thu, 02 Jun 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/tidymodels-xgboost/images/logo.svg" medium="image" type="image/svg+xml"/>
</item>
<item>
  <title>Naive Bayes with Tidymodels</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/netflix-naive_bayes/Naive_bayes.html</link>
  <description><![CDATA[ 




<section id="naive-bayes-on-netflix-dataset" class="level1">
<h1>Naive Bayes on Netflix Dataset</h1>
<p>This is part 4 of my Tidymodels learning series. Part 1 dealt with SVM&amp; Random Forests<sup>1</sup>, part 2 I tried out PCA analysis and UMAP<sup>2</sup> and part 3 I wanted to try KNN and GLM modelling<sup>3</sup>.</p>
<p>For the next part, I wanted to try something I usually don’t have to run in metabolomics data, so I went with Naive Bayes.</p>
<p>Data set was used from kaggle.com<sup>4</sup>.</p>
<p>Naive Bayes is a basic algorithm for classifying data. It is not often used in my field but is a useful skill to have.</p>
</section>
<section id="loading-the-packages" class="level1">
<h1>Loading the packages</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span></code></pre></div>
</details>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ ggplot2 3.3.6     ✔ purrr   0.3.4
✔ tibble  3.1.7     ✔ dplyr   1.0.9
✔ tidyr   1.2.0     ✔ stringr 1.4.0
✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">library</span>(tidymodels)</span></code></pre></div>
</details>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 0.2.0 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ broom        0.8.0     ✔ rsample      0.1.1
✔ dials        0.1.1     ✔ tune         0.2.0
✔ infer        1.0.0     ✔ workflows    0.2.6
✔ modeldata    0.1.1     ✔ workflowsets 0.2.1
✔ parsnip      0.2.1     ✔ yardstick    0.0.9
✔ recipes      0.2.0     </code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ scales::discard() masks purrr::discard()
✖ dplyr::filter()   masks stats::filter()
✖ recipes::fixed()  masks stringr::fixed()
✖ dplyr::lag()      masks stats::lag()
✖ yardstick::spec() masks readr::spec()
✖ recipes::step()   masks stats::step()
• Use suppressPackageStartupMessages() to eliminate package startup messages</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;">library</span>(tidytext) <span class="co" style="color: #5E5E5E;"># text splitting and analysis</span></span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;">library</span>(naivebayes)</span></code></pre></div>
</details>
<div class="cell-output-stderr">
<pre><code>naivebayes 0.9.7 loaded</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;">library</span>(textrecipes)</span>
<span id="cb11-2"><span class="fu" style="color: #4758AB;">library</span>(themis) <span class="co" style="color: #5E5E5E;"># for unbalance data</span></span></code></pre></div>
</details>
<div class="cell-output-stderr">
<pre><code>
Attaching package: 'themis'</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>The following objects are masked from 'package:recipes':

    step_downsample, step_upsample</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;">library</span>(discrim) <span class="co" style="color: #5E5E5E;"># for discriminant analysis</span></span></code></pre></div>
</details>
<div class="cell-output-stderr">
<pre><code>
Attaching package: 'discrim'</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>The following object is masked from 'package:dials':

    smoothness</code></pre>
</div>
</div>
</section>
<section id="loading-the-data" class="level1">
<h1>Loading the data</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">netflix <span class="ot" style="color: #003B4F;">&lt;-</span> readr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_csv</span>(<span class="st" style="color: #20794D;">"netflix_titles.csv"</span>)</span></code></pre></div>
</details>
<div class="cell-output-stderr">
<pre><code>Rows: 8807 Columns: 12
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (11): show_id, type, title, director, cast, country, date_added, rating,...
dbl  (1): release_year

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
</section>
<section id="using-a-subset-of-data" class="level1">
<h1>Using a subset of data</h1>
<p>I am running it on my local machine and it takes a while to do 8000+ rows, so I decided to use only a small set of data</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">netflix<span class="ot" style="color: #003B4F;">&lt;-</span> netflix  <span class="sc" style="color: #5E5E5E;">|&gt;</span> <span class="fu" style="color: #4758AB;">slice_head</span>(<span class="at" style="color: #657422;">n =</span> <span class="dv" style="color: #AD0000;">600</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="exploratory-data-analysis" class="level1">
<h1>Exploratory data analysis</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">counts <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb20-2">  netflix <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb20-3">  <span class="fu" style="color: #4758AB;">distinct</span>(show_id, <span class="at" style="color: #657422;">.keep_all =</span> <span class="cn" style="color: #8f5902;">TRUE</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb20-4">  <span class="fu" style="color: #4758AB;">unnest_tokens</span>(words, description) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb20-5">  <span class="fu" style="color: #4758AB;">count</span>(type, words, <span class="at" style="color: #657422;">sort =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb20-6"></span>
<span id="cb20-7"></span>
<span id="cb20-8">counts</span></code></pre></div>
</details>
<div class="cell-output-stdout">
<pre><code># A tibble: 5,261 × 3
   type    words     n
   &lt;chr&gt;   &lt;chr&gt; &lt;int&gt;
 1 Movie   a       597
 2 Movie   the     368
 3 Movie   to      318
 4 TV Show a       274
 5 Movie   and     241
 6 Movie   of      221
 7 Movie   in      193
 8 TV Show the     191
 9 TV Show and     185
10 TV Show to      152
# … with 5,251 more rows</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">counts <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb22-2">  tidylo<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">bind_log_odds</span>(type, words, n) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb22-3">  <span class="fu" style="color: #4758AB;">filter</span>(n <span class="sc" style="color: #5E5E5E;">&gt;</span> <span class="dv" style="color: #AD0000;">10</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb22-4">  <span class="fu" style="color: #4758AB;">group_by</span>(type) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb22-5">  <span class="fu" style="color: #4758AB;">slice_max</span>(log_odds_weighted, <span class="at" style="color: #657422;">n =</span> <span class="dv" style="color: #AD0000;">10</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb22-6">  <span class="fu" style="color: #4758AB;">ungroup</span>() <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb22-7">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(log_odds_weighted,</span>
<span id="cb22-8">    <span class="fu" style="color: #4758AB;">fct_reorder</span>(words, log_odds_weighted),</span>
<span id="cb22-9">    <span class="at" style="color: #657422;">fill =</span> type</span>
<span id="cb22-10">  )) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb22-11">  <span class="fu" style="color: #4758AB;">geom_col</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.8</span>, <span class="at" style="color: #657422;">show.legend =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb22-12">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="fu" style="color: #4758AB;">vars</span>(type), <span class="at" style="color: #657422;">scales =</span> <span class="st" style="color: #20794D;">"free_y"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb22-13">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">y =</span> <span class="cn" style="color: #8f5902;">NULL</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/netflix-naive_bayes/Naive_bayes_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="splitting-data-into-train-and-test-bootstrapping" class="level1">
<h1>Splitting data into train and test, bootstrapping</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="fu" style="color: #4758AB;">set.seed</span>(<span class="dv" style="color: #AD0000;">123</span>)</span>
<span id="cb23-2"></span>
<span id="cb23-3">netflix_split <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb23-4">  netflix <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb23-5">  <span class="fu" style="color: #4758AB;">distinct</span>(show_id, <span class="at" style="color: #657422;">.keep_all =</span> <span class="cn" style="color: #8f5902;">TRUE</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb23-6">  <span class="fu" style="color: #4758AB;">select</span>(type, description) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb23-7">  <span class="fu" style="color: #4758AB;">initial_split</span>(<span class="at" style="color: #657422;">prop =</span> <span class="fl" style="color: #AD0000;">0.8</span>, <span class="at" style="color: #657422;">strata =</span> type)</span>
<span id="cb23-8"></span>
<span id="cb23-9">netflix_train <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">training</span>(netflix_split)</span>
<span id="cb23-10">netflix_test <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">testing</span>(netflix_split)</span>
<span id="cb23-11"></span>
<span id="cb23-12"><span class="fu" style="color: #4758AB;">set.seed</span>(<span class="dv" style="color: #AD0000;">234</span>)</span>
<span id="cb23-13">netflix_folds <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">bootstraps</span>(netflix_train, <span class="at" style="color: #657422;">strata =</span> type)</span>
<span id="cb23-14">netflix_folds</span></code></pre></div>
</details>
<div class="cell-output-stdout">
<pre><code># Bootstrap sampling using stratification 
# A tibble: 25 × 2
   splits            id         
   &lt;list&gt;            &lt;chr&gt;      
 1 &lt;split [479/173]&gt; Bootstrap01
 2 &lt;split [479/185]&gt; Bootstrap02
 3 &lt;split [479/174]&gt; Bootstrap03
 4 &lt;split [479/165]&gt; Bootstrap04
 5 &lt;split [479/172]&gt; Bootstrap05
 6 &lt;split [479/175]&gt; Bootstrap06
 7 &lt;split [479/177]&gt; Bootstrap07
 8 &lt;split [479/173]&gt; Bootstrap08
 9 &lt;split [479/180]&gt; Bootstrap09
10 &lt;split [479/181]&gt; Bootstrap10
# … with 15 more rows</code></pre>
</div>
</div>
</section>
<section id="tokenization-and-prepping-the-recipe" class="level1">
<h1>Tokenization and prepping the recipe</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">rec_all <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb25-2">  <span class="fu" style="color: #4758AB;">recipe</span>(type <span class="sc" style="color: #5E5E5E;">~</span> description, <span class="at" style="color: #657422;">data =</span> netflix_train) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb25-3">  <span class="fu" style="color: #4758AB;">step_tokenize</span>(description) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb25-4">  <span class="fu" style="color: #4758AB;">step_tokenfilter</span>(description, <span class="at" style="color: #657422;">max_tokens =</span> <span class="dv" style="color: #AD0000;">80</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb25-5">  <span class="fu" style="color: #4758AB;">step_tfidf</span>(description)</span>
<span id="cb25-6"></span>
<span id="cb25-7">rec_all_norm <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb25-8">  rec_all <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb25-9">  <span class="fu" style="color: #4758AB;">step_normalize</span>(<span class="fu" style="color: #4758AB;">all_predictors</span>())</span>
<span id="cb25-10"></span>
<span id="cb25-11">rec_all_smote <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb25-12">  rec_all_norm <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb25-13">  <span class="fu" style="color: #4758AB;">step_smote</span>(type)</span>
<span id="cb25-14"></span>
<span id="cb25-15"><span class="do" style="color: #5E5E5E;
font-style: italic;">## we can `prep()` just to check if it works</span></span>
<span id="cb25-16"><span class="fu" style="color: #4758AB;">prep</span>(rec_all_smote)</span></code></pre></div>
</details>
<div class="cell-output-stdout">
<pre><code>Recipe

Inputs:

      role #variables
   outcome          1
 predictor          1

Training data contained 479 data points and no missing data.

Operations:

Tokenization for description [trained]
Text filtering for description [trained]
Term frequency-inverse document frequency with description [trained]
Centering and scaling for tfidf_description_a, tfidf_description_about, t... [trained]
SMOTE based on type [trained]</code></pre>
</div>
</div>
<section id="for-stop-words" class="level2">
<h2 class="anchored" data-anchor-id="for-stop-words">For Stop Words</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">rec_stop <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb27-2">  <span class="fu" style="color: #4758AB;">recipe</span>(type <span class="sc" style="color: #5E5E5E;">~</span> description, <span class="at" style="color: #657422;">data =</span> netflix_train) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb27-3">  <span class="fu" style="color: #4758AB;">step_tokenize</span>(description) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb27-4">  <span class="fu" style="color: #4758AB;">step_stopwords</span>(description) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb27-5">  <span class="fu" style="color: #4758AB;">step_tokenfilter</span>(description, <span class="at" style="color: #657422;">max_tokens =</span> <span class="dv" style="color: #AD0000;">80</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb27-6">  <span class="fu" style="color: #4758AB;">step_tfidf</span>(description)</span>
<span id="cb27-7"></span>
<span id="cb27-8">rec_stop_norm <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb27-9">  rec_stop <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb27-10">  <span class="fu" style="color: #4758AB;">step_normalize</span>(<span class="fu" style="color: #4758AB;">all_predictors</span>())</span>
<span id="cb27-11"></span>
<span id="cb27-12">rec_stop_smote <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb27-13">  rec_stop_norm <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb27-14">  <span class="fu" style="color: #4758AB;">step_smote</span>(type)</span>
<span id="cb27-15"></span>
<span id="cb27-16"><span class="do" style="color: #5E5E5E;
font-style: italic;">## again, let's check it</span></span>
<span id="cb27-17"><span class="fu" style="color: #4758AB;">prep</span>(rec_stop_smote)</span></code></pre></div>
</details>
<div class="cell-output-stdout">
<pre><code>Recipe

Inputs:

      role #variables
   outcome          1
 predictor          1

Training data contained 479 data points and no missing data.

Operations:

Tokenization for description [trained]
Stop word removal for description [trained]
Text filtering for description [trained]
Term frequency-inverse document frequency with description [trained]
Centering and scaling for tfidf_description_back, tfidf_description_based... [trained]
SMOTE based on type [trained]</code></pre>
</div>
</div>
</section>
</section>
<section id="naive-bayes-spec" class="level1">
<h1>Naive Bayes spec</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1">nb_spec <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb29-2">  <span class="fu" style="color: #4758AB;">naive_Bayes</span>() <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb29-3">  <span class="fu" style="color: #4758AB;">set_mode</span>(<span class="st" style="color: #20794D;">"classification"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb29-4">  <span class="fu" style="color: #4758AB;">set_engine</span>(<span class="st" style="color: #20794D;">"naivebayes"</span>)</span>
<span id="cb29-5"></span>
<span id="cb29-6">nb_spec</span></code></pre></div>
</details>
<div class="cell-output-stdout">
<pre><code>Naive Bayes Model Specification (classification)

Computational engine: naivebayes </code></pre>
</div>
</div>
</section>
<section id="setting-workflow-for-the-model" class="level1">
<h1>Setting workflow for the model</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1">netflix_models <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb31-2">  <span class="fu" style="color: #4758AB;">workflow_set</span>(</span>
<span id="cb31-3">    <span class="at" style="color: #657422;">preproc =</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb31-4">      <span class="at" style="color: #657422;">all =</span> rec_all,</span>
<span id="cb31-5">      <span class="at" style="color: #657422;">all_norm =</span> rec_all_norm,</span>
<span id="cb31-6">      <span class="at" style="color: #657422;">all_smote =</span> rec_all_smote,</span>
<span id="cb31-7">      <span class="at" style="color: #657422;">stop =</span> rec_stop,</span>
<span id="cb31-8">      <span class="at" style="color: #657422;">stop_norm =</span> rec_stop_norm,</span>
<span id="cb31-9">      <span class="at" style="color: #657422;">stop_smote =</span> rec_stop_smote</span>
<span id="cb31-10">    ),</span>
<span id="cb31-11">    <span class="at" style="color: #657422;">models =</span> <span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">nb =</span> nb_spec),</span>
<span id="cb31-12">    <span class="at" style="color: #657422;">cross =</span> <span class="cn" style="color: #8f5902;">TRUE</span></span>
<span id="cb31-13">  )</span>
<span id="cb31-14"></span>
<span id="cb31-15">netflix_models</span></code></pre></div>
</details>
<div class="cell-output-stdout">
<pre><code># A workflow set/tibble: 6 × 4
  wflow_id      info             option    result    
  &lt;chr&gt;         &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    
1 all_nb        &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
2 all_norm_nb   &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
3 all_smote_nb  &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
4 stop_nb       &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
5 stop_norm_nb  &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;
6 stop_smote_nb &lt;tibble [1 × 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;</code></pre>
</div>
</div>
</section>
<section id="fitting-samples" class="level1">
<h1>Fitting samples</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="fu" style="color: #4758AB;">set.seed</span>(<span class="dv" style="color: #AD0000;">123</span>)</span>
<span id="cb33-2">doParallel<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">registerDoParallel</span>()</span>
<span id="cb33-3"></span>
<span id="cb33-4">netflix_rs <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb33-5">  netflix_models <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb33-6">  <span class="fu" style="color: #4758AB;">workflow_map</span>(</span>
<span id="cb33-7">    <span class="st" style="color: #20794D;">"fit_resamples"</span>,</span>
<span id="cb33-8">    <span class="at" style="color: #657422;">resamples =</span> netflix_folds,</span>
<span id="cb33-9">    <span class="at" style="color: #657422;">metrics =</span> <span class="fu" style="color: #4758AB;">metric_set</span>(accuracy, sensitivity, specificity)</span>
<span id="cb33-10">  )</span></code></pre></div>
</details>
</div>
</section>
<section id="ranking-the-results" class="level1">
<h1>Ranking the results</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><span class="fu" style="color: #4758AB;">rank_results</span>(netflix_rs) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb34-2">  <span class="fu" style="color: #4758AB;">filter</span>(.metric <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"accuracy"</span>)</span></code></pre></div>
</details>
<div class="cell-output-stdout">
<pre><code># A tibble: 6 × 9
  wflow_id      .config     .metric  mean std_err     n preprocessor model  rank
  &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;int&gt;
1 all_nb        Preprocess… accura… 0.646 0.00410    25 recipe       naiv…     1
2 stop_nb       Preprocess… accura… 0.642 0.00548    25 recipe       naiv…     2
3 all_norm_nb   Preprocess… accura… 0.623 0.00946    25 recipe       naiv…     3
4 stop_norm_nb  Preprocess… accura… 0.414 0.00873    25 recipe       naiv…     4
5 all_smote_nb  Preprocess… accura… 0.390 0.00550    25 recipe       naiv…     5
6 stop_smote_nb Preprocess… accura… 0.373 0.00389    25 recipe       naiv…     6</code></pre>
</div>
</div>
</section>
<section id="workflow" class="level1">
<h1>Workflow</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1">netflix_wf <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">workflow</span>(rec_all, nb_spec)</span>
<span id="cb36-2"></span>
<span id="cb36-3">netflix_fitted <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb36-4">  <span class="fu" style="color: #4758AB;">last_fit</span>(</span>
<span id="cb36-5">    netflix_wf,</span>
<span id="cb36-6">    netflix_split,</span>
<span id="cb36-7">    <span class="at" style="color: #657422;">metrics =</span> <span class="fu" style="color: #4758AB;">metric_set</span>(accuracy, sensitivity, specificity)</span>
<span id="cb36-8">  )</span>
<span id="cb36-9"></span>
<span id="cb36-10">netflix_fitted</span></code></pre></div>
</details>
<div class="cell-output-stdout">
<pre><code># Resampling results
# Manual resampling 
# A tibble: 1 × 6
  splits            id               .metrics .notes   .predictions .workflow 
  &lt;list&gt;            &lt;chr&gt;            &lt;list&gt;   &lt;list&gt;   &lt;list&gt;       &lt;list&gt;    
1 &lt;split [479/121]&gt; train/test split &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;     &lt;workflow&gt;</code></pre>
</div>
</div>
</section>
<section id="final-fitted-metrics" class="level1">
<h1>Final Fitted metrics</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><span class="fu" style="color: #4758AB;">collect_metrics</span>(netflix_fitted)</span></code></pre></div>
</details>
<div class="cell-output-stdout">
<pre><code># A tibble: 3 × 4
  .metric     .estimator .estimate .config             
  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 accuracy    binary        0.636  Preprocessor1_Model1
2 sensitivity binary        0.974  Preprocessor1_Model1
3 specificity binary        0.0233 Preprocessor1_Model1</code></pre>
</div>
</div>
</section>
<section id="confusion-matrix" class="level1">
<h1>Confusion Matrix</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><span class="fu" style="color: #4758AB;">collect_predictions</span>(netflix_fitted) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb40-2">  <span class="fu" style="color: #4758AB;">conf_mat</span>(type, .pred_class) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb40-3">  <span class="fu" style="color: #4758AB;">autoplot</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/netflix-naive_bayes/Naive_bayes_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="details-of-the-full-fitted-model." class="level1">
<h1>Details of the full fitted model.</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><span class="fu" style="color: #4758AB;">extract_workflow</span>(netflix_fitted)  </span></code></pre></div>
</details>
<div class="cell-output-stdout">
<pre><code>══ Workflow [trained] ══════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: naive_Bayes()

── Preprocessor ────────────────────────────────────────────────────────────────
3 Recipe Steps

• step_tokenize()
• step_tokenfilter()
• step_tfidf()

── Model ───────────────────────────────────────────────────────────────────────

================================== Naive Bayes ================================== 
 
 Call: 
naive_bayes.default(x = maybe_data_frame(x), y = y, usekernel = TRUE)

--------------------------------------------------------------------------------- 
 
Laplace smoothing: 0

--------------------------------------------------------------------------------- 
 
 A priori probabilities: 

    Movie   TV Show 
0.6450939 0.3549061 

--------------------------------------------------------------------------------- 
 
 Tables: 

--------------------------------------------------------------------------------- 
 ::: tfidf_description_a::Movie (KDE)
--------------------------------------------------------------------------------- 

Call:
    density.default(x = x, na.rm = TRUE)

Data: x (309 obs.); Bandwidth 'bw' = 0.02165

       x                  y           
 Min.   :-0.06496   Min.   :0.000017  
 1st Qu.: 0.10494   1st Qu.:0.034413  
 Median : 0.27483   Median :0.579214  
 Mean   : 0.27483   Mean   :1.469698  
 3rd Qu.: 0.44473   3rd Qu.:2.780068  
 Max.   : 0.61463   Max.   :4.962209  

--------------------------------------------------------------------------------- 
 ::: tfidf_description_a::TV Show (KDE)
--------------------------------------------------------------------------------- 

Call:
    density.default(x = x, na.rm = TRUE)

Data: x (170 obs.); Bandwidth 'bw' = 0.0292

       x                  y           
 Min.   :-0.08760   Min.   :0.000914  
 1st Qu.: 0.07987   1st Qu.:0.108085  

...
and 147 more lines.</code></pre>
</div>
</div>
</section>
<section id="further-reading" class="level1">
<h1>Further Reading</h1>
<ul>
<li><p>https://juliasilge.com/blog/star-trek/</p></li>
<li><p>https://www.tjmahr.com/bayes-theorem-in-three-panels/</p></li>
<li><p>https://www.kaggle.com/datasets/shivamb/netflix-shows</p></li>
<li><p>https://emilhvitfeldt.github.io/ISLR-tidymodels-labs/classification.html#naive-bayes</p></li>
</ul>
<p>You can save this fitted <code>netflix_wf</code> object to use later with new data, for example with <code>readr::write_rds()</code>.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://karatsidhu.com/posts/tidymodels-svm-random-forests/tidymodels-svm-random-forests.html↩︎</p></li>
<li id="fn2"><p>https://karatsidhu.com/posts/tidymodels-pca-and-umap/tidymodels-pca-and-umap.html↩︎</p></li>
<li id="fn3"><p>https://karatsidhu.com/posts/tidymodels-knn-and-glm/tidymodels-knn-and-glm.html↩︎</p></li>
<li id="fn4"><p>https://www.kaggle.com/datasets/shivamb/netflix-shows↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {Naive {Bayes} with {Tidymodels}},
  date = {2022-05-28},
  url = {https://karatsidhu.com/posts/netflix-naive_bayes/Naive_bayes.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“Naive Bayes with Tidymodels.”</span> May 28,
2022. <a href="https://karatsidhu.com/posts/netflix-naive_bayes/Naive_bayes.html">https://karatsidhu.com/posts/netflix-naive_bayes/Naive_bayes.html</a>.
</div></div></section></div> ]]></description>
  <category>Naive Bayes</category>
  <category>TidyModels</category>
  <category>Machine Learning</category>
  <category>Classification</category>
  <guid>https://karatsidhu.com/posts/netflix-naive_bayes/Naive_bayes.html</guid>
  <pubDate>Sat, 28 May 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/netflix-naive_bayes/images/logo.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Converting a distill website to Quarto</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/make-quarto-website/make-quarto-website.html</link>
  <description><![CDATA[ 




<section id="creating-minimal-website-with-quarto-from-an-existing-distill-website" class="level1">
<h1>Creating minimal website with Quarto from an existing <code>distill</code> website</h1>
<section id="my-process-in-building-a-quick-and-great-looking-website-in-quarto" class="level3">
<h3 class="anchored" data-anchor-id="my-process-in-building-a-quick-and-great-looking-website-in-quarto">My process in building a quick and great looking website in Quarto</h3>
</section>
</section>
<section id="distill-vs-rblogdown" class="level1">
<h1>Distill vs RBlogdown</h1>
<p>I recently decided to start blogging to journal and track my coding habits. One of the main things I wanted to do to that end was build a personal website as a online presence that’s not a social media platform like linkedin. Wordpress was the obvious choice but I wasn’t a big fan of how it handled code chunks. Additionally, I felt it was better to make something personal and something that could be customizable, but only to a point where it didn’t feel overwhelming.</p>
<p>Since I was using R for most of my work, I decided to checkout the two main options available: <code>Distill</code> and <code>Blogdown.</code> After a bit of research i went with <code>Distill</code> mainly because of its simplicity and because I preferred the look of the sites it rendered after checking a lot of themes and demos. Additionally playing around with both R packages I liked the way it behaved.</p>
</section>
<section id="moving-away-from-distill" class="level1">
<h1>Moving Away from Distill</h1>
<p>However, I have been itching to try out Quarto ever since I heard of it and I was very intrigued by a one size fits all solution to all my writing needs and possibly publishing needs. There are a number of reasons<sup>1</sup> already highlighted<sup>2</sup> that make quarto a very<sup>3</sup> attractive option for people in academia<sup>4</sup>, so I will not go into further details behind my choice. Moreover, the customization of documents and easier integration of Python (another common language I use) made me decide to see if it was possible to switch from rmd to qmd. I decided to check and see if anyone had tried to convert an existing webpage/blog from distill to Quarto and found a brilliant blog post<sup>5</sup> by Danielle Navarro. It turns out their needs mirrored mine so I used their post as well the existing sourcecode repo as a blueprint to convert my own site. Additionally another blogpost by Nick Tierney<sup>6</sup> is also worth checking out. This article isn’t meant to be a standalone guide but rather a personal experience journal of how I found the overall process to be.</p>
</section>
<section id="build-and-render-a-quarto-webpage" class="level1">
<h1>Build and render a Quarto Webpage</h1>
<p>I now detail the quick and hopefully simple procedure to convert (or setup) your own personal quarto webpage.</p>
<ul>
<li><p>Install quarto</p>
<ul>
<li>I installed it on RStudio because I am comfortable with using RStudio but it can just as easily be used on other code editors like VSCode.</li>
</ul></li>
<li><p>Inside RStudio, click File -&gt; Select New Project -&gt; Select the Quarto Website or Blog as the template which will be the starting point depending on your need.</p>
<p><img src="https://karatsidhu.com/posts/make-quarto-website/images/1.png" class="img-fluid"></p></li>
<li><p>RStudio takes a few seconds to a minute to get the basic template ready, along with an example blog post which will act as the backbone on which the site will be built.</p></li>
<li><p>One the blog is built, render it for the first time using the “build” tab in RStudio and clicking “Render Website” to see what it looks like without any customization</p></li>
<li><p>The basic (example) template made by RStudio is now ready, and can be deployed as such if needed.</p></li>
</ul>
</section>
<section id="adding-content-website-configuration" class="level1">
<h1>Adding Content &amp; Website Configuration</h1>
<ul>
<li><p>Close all files, and RStudio so the rendered website is shut off.</p></li>
<li><p>I wanted to start with a simple 2-page website, with a blog and a landing page (index), so I deleted any other stray .qmd files except the files named “about” and “blog”.</p></li>
<li><p>By default the quarto rendering will make the file named index.qmd the landing page to your domain.</p></li>
<li><p>A blog template has the blogs listed as index.qmd so a quick way to make the landing page different is by swapping file names.</p></li>
<li><p>Rename index.qmd to blog.qmd and about.qmd to index.qmd to make the about-me page as the landing page</p></li>
<li><p>Re-render the blog to see if changes worked (they should)</p></li>
</ul>
<p><img src="https://karatsidhu.com/posts/make-quarto-website/images/2.png" class="img-fluid"></p>
<ul>
<li><p>Check by clicking the site banner, which should now redirect to the recently renamed page.</p>
<p><img src="https://karatsidhu.com/posts/make-quarto-website/images/3.png" class="img-fluid"></p></li>
<li><p>Edit the blog and about pages by adding all the details like socials, website links, etc</p></li>
<li><p>_quarto.yml is the main file that controls all the site-wide settings, make desired changes to that file with the help of settings from the official quarto docs (see footnotes)</p></li>
<li><p>posts/_metadata.yml file is another important file that controls settings for the blog, including the useful “freeze” option<sup>7</sup></p></li>
<li><p>Add remove the navbar options, everything in the parent folder (and more) can be an item on the navbar if needed.</p></li>
<li><p>NOTE: quarto uses lowercase <code>true</code> and <code>false</code> unlike RMarkdown (a welcome change, for me, personally).</p></li>
<li><p>If you have any blog-posts with distill like me, simply mass re-name the rmd files to qmd and they will work with the new sites (more on this below).</p></li>
</ul>
<p>Re-render the site and the entire site should now be populated with the changes and older posts (if applicable)</p>
<p>Now the basic site is working and you can deploy it as is.</p>
</section>
<section id="customize-the-website" class="level1">
<h1>Customize the website</h1>
<p>The basic template of the website looks great, but I wanted to customize it a bit further, and add some elements like the table of contents to the qmd files that were renamed from the existing distill rmd files. In order to customize it further, knowing a bit of scss or css helps:</p>
<p>Theme changes:</p>
<ul>
<li><p>Custom themes can be added by creating and modifying .scss files (see example theme<sup>8</sup> file in my repository)</p></li>
<li><p>CSS files should also work if you’re more comfortable working with css than scss.</p></li>
<li><p>Default bootstrap themes can be changed from a list of available themes on the Quarto website<sup>9</sup></p></li>
<li><p>Change font sizes, font families and other font properties by importing fonts from Google-Fonts api inside the scss files, or using a different type of font face.</p></li>
<li><p>Customize the navbar, and the footer in the .yml file</p></li>
<li><p>Unlike the distill website, footer is added as page-footer inside the _quarto.yml file.</p></li>
<li><p>Adding icons is different than the other blogdown and distill sites, quarto uses bootstrap icon packs, not font awesome, so some icons (like ORCiD) are unavailable</p></li>
<li><p>Quarto posts also support ORCiD IDs, but the tag is now <code>orcid</code> not <code>orcid_id</code></p></li>
<li><p>Added utteranc.es commenting after installing the app on Github.</p></li>
</ul>
<p>Once you are happy with the changes and the theme, deploy it.<sup>10</sup></p>
<p>I used Netlify to deploy my site so I had to change the repository folder (distill default outputs to docs/ folder while Quarto website outputs to _site/)</p>
</section>
<section id="final-result" class="level1">
<h1>Final Result</h1>
<p>The result was my website:</p>
<p><a href="https://karatsidhu.com/" class="uri">https://karatsidhu.com/</a></p>
<section id="source-code" class="level2">
<h2 class="anchored" data-anchor-id="source-code">Source Code</h2>
<p>And the source code can be found on my GitHub:</p>
<p><a href="https://github.com/SidhuK/karat_codes" class="uri">https://github.com/SidhuK/karat_codes</a></p>
</section>
</section>
<section id="things-to-do" class="level1">
<h1>Things to Do</h1>
<p>I am still tweaking around constantly with the theme, and in the future would like to make some improvements including:</p>
<ul>
<li><p>A Dark mode toggle</p></li>
<li><p>Add more pages, like a spot for publications &amp; projects</p></li>
<li><p>A html resume (possibly like pagedown resume)</p></li>
<li><p>Set-up a redirects file to shorten post titles to make them easier to share</p></li>
</ul>
</section>
<section id="final-thoughts" class="level1">
<h1>Final Thoughts</h1>
<p>The more I played with Quarto, the more I’ve enjoyed working with it. The process of switching was fairly straightforward, especially with the number of useful tutorials and source code<sup>11</sup> available . This article isn’t meant to be a standalone guide but rather a personal experience journal of how I found the overall process to be.</p>
</section>
<section id="further-reading" class="level1">
<h1>Further Reading</h1>
<p>Further Reading, and useful links that helped me with the site: (See footnotes)</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://yihui.org/en/2022/04/quarto-r-markdown/↩︎</p></li>
<li id="fn2"><p>https://www.apreshill.com/blog/2022-04-we-dont-talk-about-quarto/↩︎</p></li>
<li id="fn3"><p>https://community.rstudio.com/t/i-use-like-r-markdown-why-should-i-try-out-quarto/133752/2↩︎</p></li>
<li id="fn4"><p>https://jasoncausey.net/post/quarto_early_impressions/↩︎</p></li>
<li id="fn5"><p>https://blog.djnavarro.net/posts/2022-04-20_porting-to-quarto/↩︎</p></li>
<li id="fn6"><p>https://www.njtierney.com/post/2022/04/11/rmd-to-qmd/↩︎</p></li>
<li id="fn7"><p>https://quarto.org/docs/projects/code-execution.html↩︎</p></li>
<li id="fn8"><p>https://github.com/SidhuK/karat_codes↩︎</p></li>
<li id="fn9"><p>https://quarto.org/docs/websites/↩︎</p></li>
<li id="fn10"><p>https://quarto.org/docs/websites/publishing-websites.html↩︎</p></li>
<li id="fn11"><p>https://github.com/quarto-dev/quarto-web↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {Converting a Distill Website to {Quarto}},
  date = {2022-05-26},
  url = {https://karatsidhu.com/posts/make-quarto-website/make-quarto-website.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“Converting a Distill Website to
Quarto.”</span> May 26, 2022. <a href="https://karatsidhu.com/posts/make-quarto-website/make-quarto-website.html">https://karatsidhu.com/posts/make-quarto-website/make-quarto-website.html</a>.
</div></div></section></div> ]]></description>
  <category>Long-Read</category>
  <category>Review</category>
  <guid>https://karatsidhu.com/posts/make-quarto-website/make-quarto-website.html</guid>
  <pubDate>Thu, 26 May 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/make-quarto-website/images/logo.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>MDATools - PLS-DA Analysis</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis.html</link>
  <description><![CDATA[ 




<section id="pls_da-analysis" class="level1">
<h1>PLS_DA Analysis</h1>
<p>Using the MDA-Tools package<sup>1</sup> as an alternative to mixOmics package. I have used mixomics before to perform PLS-DA analysis and the method is fairly straightforward<sup>2</sup>, so I would like to explore this method to compare the two.</p>
<p>PLS-DA is a common algorithm used for metabolomics and other omics datasets<sup>3</sup>, and often used for categorization of features in metabolomics.</p>
<section id="loading-packages" class="level2">
<h2 class="anchored" data-anchor-id="loading-packages">Loading Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(mdatools)</span></code></pre></div>
</div>
</section>
<section id="getting-the-data-ready" class="level2">
<h2 class="anchored" data-anchor-id="getting-the-data-ready">Getting the data ready</h2>
<section id="data-needs-to-be-in-the-form-of-vectors-with-categories" class="level3">
<h3 class="anchored" data-anchor-id="data-needs-to-be-in-the-form-of-vectors-with-categories">Data needs to be in the form of vectors with categories</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;">data</span>(iris)</span>
<span id="cb2-2"></span>
<span id="cb2-3">cal.ind <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">25</span>, <span class="dv" style="color: #AD0000;">51</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">75</span>, <span class="dv" style="color: #AD0000;">101</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">125</span>)</span>
<span id="cb2-4">val.ind <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">26</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">50</span>, <span class="dv" style="color: #AD0000;">76</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">100</span>, <span class="dv" style="color: #AD0000;">126</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">150</span>)</span>
<span id="cb2-5"></span>
<span id="cb2-6">Xc <span class="ot" style="color: #003B4F;">=</span> iris[cal.ind, <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">4</span>]</span>
<span id="cb2-7">Xv <span class="ot" style="color: #003B4F;">=</span> iris[val.ind, <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">4</span>]</span>
<span id="cb2-8"></span>
<span id="cb2-9">cc.all <span class="ot" style="color: #003B4F;">=</span> iris[cal.ind, <span class="dv" style="color: #AD0000;">5</span>]</span>
<span id="cb2-10">cv.all <span class="ot" style="color: #003B4F;">=</span> iris[val.ind, <span class="dv" style="color: #AD0000;">5</span>]</span>
<span id="cb2-11"></span>
<span id="cb2-12"></span>
<span id="cb2-13"><span class="fu" style="color: #4758AB;">show</span>(cc.all)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code> [1] setosa     setosa     setosa     setosa     setosa     setosa    
 [7] setosa     setosa     setosa     setosa     setosa     setosa    
[13] setosa     setosa     setosa     setosa     setosa     setosa    
[19] setosa     setosa     setosa     setosa     setosa     setosa    
[25] setosa     versicolor versicolor versicolor versicolor versicolor
[31] versicolor versicolor versicolor versicolor versicolor versicolor
[37] versicolor versicolor versicolor versicolor versicolor versicolor
[43] versicolor versicolor versicolor versicolor versicolor versicolor
[49] versicolor versicolor virginica  virginica  virginica  virginica 
[55] virginica  virginica  virginica  virginica  virginica  virginica 
[61] virginica  virginica  virginica  virginica  virginica  virginica 
[67] virginica  virginica  virginica  virginica  virginica  virginica 
[73] virginica  virginica  virginica 
Levels: setosa versicolor virginica</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">cc.vir <span class="ot" style="color: #003B4F;">=</span> cc.all <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"virginica"</span></span>
<span id="cb4-2">cv.vir <span class="ot" style="color: #003B4F;">=</span> cv.all <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"virginica"</span></span>
<span id="cb4-3"><span class="fu" style="color: #4758AB;">show</span>(cc.vir)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[49] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[61]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[73]  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
</section>
</section>
<section id="carry-out-pls-da-modelling-and-look-at-the-summaries" class="level2">
<h2 class="anchored" data-anchor-id="carry-out-pls-da-modelling-and-look-at-the-summaries">Carry out PLS-DA modelling and look at the summaries</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;"># Now we can calibrate the models:  </span></span>
<span id="cb6-2">  </span>
<span id="cb6-3">m.all <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">plsda</span>(Xc, cc.all, <span class="dv" style="color: #AD0000;">3</span>, <span class="at" style="color: #657422;">cv =</span> <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb6-4">m.vir <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">plsda</span>(Xc, cc.vir, <span class="dv" style="color: #AD0000;">3</span>, <span class="at" style="color: #657422;">cv =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">classname =</span> <span class="st" style="color: #20794D;">"virginica"</span>)</span>
<span id="cb6-5"></span>
<span id="cb6-6"><span class="fu" style="color: #4758AB;">summary</span>(m.all)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>
PLS-DA model (class plsda) summary
------------------------------------
Info: 
Number of selected components: 1
Cross-validation: full (leave one out)

Class #1 (setosa)
    X cumexpvar Y cumexpvar TP FP TN FN Spec. Sens. Accuracy
Cal       91.97       46.36 25  0 50  0     1     1        1
Cv           NA          NA 25  0 50  0     1     1        1

Class #2 (versicolor)
    X cumexpvar Y cumexpvar TP FP TN FN Spec. Sens. Accuracy
Cal       91.97       46.36  0  0 50 25  1.00     0    0.667
Cv           NA          NA  0  3 47 25  0.94     0    0.627

Class #3 (virginica)
    X cumexpvar Y cumexpvar TP FP TN FN Spec. Sens. Accuracy
Cal       91.97       46.36 24  5 45  1  0.90  0.96    0.920
Cv           NA          NA 24  6 44  1  0.88  0.96    0.907</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;">summary</span>(m.all, <span class="at" style="color: #657422;">nc =</span> <span class="dv" style="color: #AD0000;">3</span>)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>
PLS-DA model (class plsda) summary
------------------------------------
Info: 
Number of selected components: 1
Cross-validation: full (leave one out)

Class #3 (virginica)
    X cumexpvar Y cumexpvar TP FP TN FN Spec. Sens. Accuracy
Cal       91.97       46.36 24  5 45  1  0.90  0.96    0.920
Cv           NA          NA 24  6 44  1  0.88  0.96    0.907</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="fu" style="color: #4758AB;">summary</span>(m.all<span class="sc" style="color: #5E5E5E;">$</span>calres, <span class="at" style="color: #657422;">nc =</span> <span class="dv" style="color: #AD0000;">3</span>)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>
PLS-DA results (class plsdares) summary:
Number of selected components: 1

Class #3 (virginica):
       X expvar X cumexpvar Y expvar Y cumexpvar TP FP TN FN Spec. Sens.
Comp 1   91.969      91.969   46.356      46.356 24  5 45  1  0.90  0.96
Comp 2    5.500      97.468    6.878      53.233 21  5 45  4  0.90  0.84
Comp 3    2.186      99.654    4.816      58.049 24  3 47  1  0.94  0.96
       Accuracy
Comp 1    0.920
Comp 2    0.880
Comp 3    0.947</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;">summary</span>(m.vir)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>
PLS-DA model (class plsda) summary
------------------------------------
Info: 
Number of selected components: 3
Cross-validation: full (leave one out)

Class #1 (virginica)
    X cumexpvar Y cumexpvar TP FP TN FN Spec. Sens. Accuracy
Cal       98.53       61.31 24  3 47  1  0.94  0.96    0.947
Cv           NA          NA 24  3 47  1  0.94  0.96    0.947</code></pre>
</div>
</div>
</section>
<section id="looking-at-the-confusion-matrix" class="level2">
<h2 class="anchored" data-anchor-id="looking-at-the-confusion-matrix">Looking at the confusion Matrix</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;">getConfusionMatrix</span>(m.all<span class="sc" style="color: #5E5E5E;">$</span>calres)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>           setosa versicolor virginica None
setosa         25          0         0    0
versicolor      0          0         5   20
virginica       0          0        24    1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="fu" style="color: #4758AB;">getConfusionMatrix</span>(m.vir<span class="sc" style="color: #5E5E5E;">$</span>calres)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>          virginica None
virginica        24    1
None              3   47</code></pre>
</div>
</div>
</section>
<section id="various-plots-available-in-the-mda-package" class="level2">
<h2 class="anchored" data-anchor-id="various-plots-available-in-the-mda-package">Various plots available in the MDA-Package</h2>
<p>See the documentation for details<sup>4</sup>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="fu" style="color: #4758AB;">par</span>(<span class="at" style="color: #657422;">mfrow =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">2</span>))</span>
<span id="cb18-2"><span class="fu" style="color: #4758AB;">plotPredictions</span>(m.all)</span>
<span id="cb18-3"><span class="fu" style="color: #4758AB;">plotPredictions</span>(m.vir)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="fu" style="color: #4758AB;">par</span>(<span class="at" style="color: #657422;">mfrow =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">2</span>))</span>
<span id="cb19-2"><span class="fu" style="color: #4758AB;">plotPredictions</span>(m.all, <span class="at" style="color: #657422;">nc =</span> <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb19-3"><span class="fu" style="color: #4758AB;">plotPredictions</span>(m.all, <span class="at" style="color: #657422;">nc =</span> <span class="dv" style="color: #AD0000;">3</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="fu" style="color: #4758AB;">par</span>(<span class="at" style="color: #657422;">mfrow =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">2</span>))</span>
<span id="cb20-2"><span class="fu" style="color: #4758AB;">plotMisclassified</span>(m.all, <span class="at" style="color: #657422;">nc =</span> <span class="dv" style="color: #AD0000;">2</span>)</span>
<span id="cb20-3"><span class="fu" style="color: #4758AB;">plotMisclassified</span>(m.vir)</span>
<span id="cb20-4"><span class="fu" style="color: #4758AB;">plotSensitivity</span>(m.all, <span class="at" style="color: #657422;">nc =</span> <span class="dv" style="color: #AD0000;">2</span>)</span>
<span id="cb20-5"><span class="fu" style="color: #4758AB;">plotSensitivity</span>(m.vir)</span>
<span id="cb20-6"><span class="fu" style="color: #4758AB;">plotSpecificity</span>(m.all, <span class="at" style="color: #657422;">nc =</span> <span class="dv" style="color: #AD0000;">2</span>)</span>
<span id="cb20-7"><span class="fu" style="color: #4758AB;">plotSpecificity</span>(m.vir)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis_files/figure-html/unnamed-chunk-5-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="fu" style="color: #4758AB;">par</span>(<span class="at" style="color: #657422;">mfrow =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">2</span>))</span>
<span id="cb21-2"><span class="fu" style="color: #4758AB;">plotRegcoeffs</span>(m.all, <span class="at" style="color: #657422;">ncomp =</span> <span class="dv" style="color: #AD0000;">3</span>, <span class="at" style="color: #657422;">ny =</span> <span class="dv" style="color: #AD0000;">3</span>)</span>
<span id="cb21-3"><span class="fu" style="color: #4758AB;">plotRegcoeffs</span>(m.vir, <span class="at" style="color: #657422;">ncomp =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">show.ci =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis_files/figure-html/unnamed-chunk-5-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="prediction-plots" class="level2">
<h2 class="anchored" data-anchor-id="prediction-plots">Prediction Plots</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">res <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">predict</span>(m.all, Xv, cv.all)</span>
<span id="cb22-2"><span class="fu" style="color: #4758AB;">summary</span>(res)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>
PLS-DA results (class plsdares) summary:
Number of selected components: 1

Class #1 (setosa):
       X expvar X cumexpvar Y expvar Y cumexpvar TP FP TN FN Spec. Sens.
Comp 1   92.924      92.924   42.703      42.703 25  1 49  0  0.98     1
Comp 2    4.560      97.484   11.216      53.920 25  0 50  0  1.00     1
Comp 3    1.790      99.274    1.717      55.637 25  0 50  0  1.00     1
       Accuracy
Comp 1    0.987
Comp 2    1.000
Comp 3    1.000


Class #2 (versicolor):
       X expvar X cumexpvar Y expvar Y cumexpvar TP FP TN FN Spec. Sens.
Comp 1   92.924      92.924   42.703      42.703  0  0 50 25  1.00   0.0
Comp 2    4.560      97.484   11.216      53.920 10  4 46 15  0.92   0.4
Comp 3    1.790      99.274    1.717      55.637 10  6 44 15  0.88   0.4
       Accuracy
Comp 1    0.667
Comp 2    0.747
Comp 3    0.720


Class #3 (virginica):
       X expvar X cumexpvar Y expvar Y cumexpvar TP FP TN FN Spec. Sens.
Comp 1   92.924      92.924   42.703      42.703 25  4 46  0  0.92  1.00
Comp 2    4.560      97.484   11.216      53.920 25  4 46  0  0.92  1.00
Comp 3    1.790      99.274    1.717      55.637 24  4 46  1  0.92  0.96
       Accuracy
Comp 1    0.947
Comp 2    0.947
Comp 3    0.933</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="fu" style="color: #4758AB;">par</span>(<span class="at" style="color: #657422;">mfrow =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">1</span>))</span>
<span id="cb24-2"><span class="fu" style="color: #4758AB;">plotPredictions</span>(res)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">res21 <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">predict</span>(m.vir, Xv, cv.all)</span>
<span id="cb25-2"><span class="fu" style="color: #4758AB;">summary</span>(res21)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>
PLS-DA results (class plsdares) summary:
Number of selected components: 3

Class #1 (virginica):
       X expvar X cumexpvar Y expvar Y cumexpvar TP FP TN FN Spec. Sens.
Comp 1   93.107      93.107   54.394      54.394 25  4 46  0  0.92  1.00
Comp 2    1.588      94.695    6.039      60.433 24  4 46  1  0.92  0.96
Comp 3    2.641      97.336   -0.149      60.284 22  4 46  3  0.92  0.88
       Accuracy
Comp 1    0.947
Comp 2    0.933
Comp 3    0.907</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">res22 <span class="ot" style="color: #003B4F;">=</span> <span class="fu" style="color: #4758AB;">predict</span>(m.vir, Xv, cv.vir)</span>
<span id="cb27-2"><span class="fu" style="color: #4758AB;">summary</span>(res22)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>
PLS-DA results (class plsdares) summary:
Number of selected components: 3

Class #1 (virginica):
       X expvar X cumexpvar Y expvar Y cumexpvar TP FP TN FN Spec. Sens.
Comp 1   93.107      93.107   54.394      54.394 25  4 46  0  0.92  1.00
Comp 2    1.588      94.695    6.039      60.433 24  4 46  1  0.92  0.96
Comp 3    2.641      97.336   -0.149      60.284 22  4 46  3  0.92  0.88
       Accuracy
Comp 1    0.947
Comp 2    0.933
Comp 3    0.907</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="fu" style="color: #4758AB;">par</span>(<span class="at" style="color: #657422;">mfrow =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">2</span>, <span class="dv" style="color: #AD0000;">1</span>))</span>
<span id="cb29-2"><span class="fu" style="color: #4758AB;">plotPredictions</span>(res21)</span>
<span id="cb29-3"><span class="fu" style="color: #4758AB;">plotPredictions</span>(res22)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><span class="fu" style="color: #4758AB;">par</span>(<span class="at" style="color: #657422;">mfrow =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">2</span>))</span>
<span id="cb30-2"><span class="fu" style="color: #4758AB;">plotXResiduals</span>(res21)</span>
<span id="cb30-3"><span class="fu" style="color: #4758AB;">plotYVariance</span>(res22)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis_files/figure-html/unnamed-chunk-6-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="further-reading" class="level2">
<h2 class="anchored" data-anchor-id="further-reading">Further Reading:</h2>
<ul>
<li><p>MixOmics dataset: http://mixomics.org/ (alternate method in R)</p></li>
<li><p>How to perform PLS-DA using Mixomics: https://github.com/SidhuK/R_for_Metabolomics/tree/main/PLS-DA</p></li>
</ul>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://mdatools.com/docs/plsda.html↩︎</p></li>
<li id="fn2"><p>https://github.com/SidhuK/R_for_Metabolomics/tree/main/PLS-DA↩︎</p></li>
<li id="fn3"><p>https://towardsdatascience.com/partial-least-squares-f4e6714452a↩︎</p></li>
<li id="fn4"><p>https://mdatools.com/docs/plsda–performance-plots.html↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {MDATools - {PLS-DA} {Analysis}},
  date = {2022-05-26},
  url = {https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“MDATools - PLS-DA Analysis.”</span> May 26,
2022. <a href="https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis.html">https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis.html</a>.
</div></div></section></div> ]]></description>
  <category>PLS-DA</category>
  <category>Machine Learning</category>
  <category>Discriminant Analysis</category>
  <category>Dimension Reduction</category>
  <category>Algorithm</category>
  <guid>https://karatsidhu.com/posts/mdatools-pls-da-analysis/mdatools-pls-da-analysis.html</guid>
  <pubDate>Thu, 26 May 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/mdatools-pls-da-analysis/images/logo.png" medium="image" type="image/png" height="61" width="144"/>
</item>
<item>
  <title>TidyModels - KNN & GLM</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/tidymodels-knn-and-glm/tidymodels-knn-and-glm.html</link>
  <description><![CDATA[ 




<section id="tidymodels---knn-and-glm" class="level1">
<h1>TidyModels - KNN and GLM</h1>
</section>
<section id="palmer-penguins-time" class="level1">
<h1>Palmer Penguins Time!!</h1>
<p><img src="https://karatsidhu.com/posts/tidymodels-knn-and-glm/https:/allisonhorst.github.io/palmerpenguins/reference/figures/lter_penguins.png" class="img-fluid" alt="image"> (Figure from <code>@Allison_Horst</code>)</p>
<p>This is part 3 of my TidyModels blogs. The first part<sup>1</sup> dealt with Random Forests and SVM while the second part<sup>2</sup> I tried out PCA and UMAP using TidyModels packages.</p>
<p>This time, I will be trying to perform K-Nearest Neighbors and Linear Modelling using TidyModels.</p>
</section>
<section id="loading-datasets-libraries" class="level1">
<h1>Loading Datasets, Libraries</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(tidymodels)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 0.2.0 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ broom        0.8.0     ✔ recipes      0.2.0
✔ dials        0.1.1     ✔ rsample      0.1.1
✔ dplyr        1.0.9     ✔ tibble       3.1.7
✔ ggplot2      3.3.6     ✔ tidyr        1.2.0
✔ infer        1.0.0     ✔ tune         0.2.0
✔ modeldata    0.1.1     ✔ workflows    0.2.6
✔ parsnip      0.2.1     ✔ workflowsets 0.2.1
✔ purrr        0.3.4     ✔ yardstick    0.0.9</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ purrr::discard() masks scales::discard()
✖ dplyr::filter()  masks stats::filter()
✖ dplyr::lag()     masks stats::lag()
✖ recipes::step()  masks stats::step()
• Use suppressPackageStartupMessages() to eliminate package startup messages</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ readr   2.1.2     ✔ forcats 0.5.1
✔ stringr 1.4.0     </code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ readr::col_factor() masks scales::col_factor()
✖ purrr::discard()    masks scales::discard()
✖ dplyr::filter()     masks stats::filter()
✖ stringr::fixed()    masks recipes::fixed()
✖ dplyr::lag()        masks stats::lag()
✖ readr::spec()       masks yardstick::spec()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;">data</span>(<span class="st" style="color: #20794D;">"penguins"</span>)</span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;">glimpse</span>(penguins)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>Rows: 344
Columns: 7
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">penguins <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">na.omit</span>(penguins)</span></code></pre></div>
</div>
<section id="explore-data" class="level2">
<h2 class="anchored" data-anchor-id="explore-data">Explore data</h2>
<p>Exploratory data analysis (EDA) is an important part of the modeling process<sup>3</sup>.I am using the default tidymodels template so will be using the inbuilt EDA performace cells to check the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">penguins <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(bill_depth_mm, bill_length_mm, <span class="at" style="color: #657422;">color =</span> sex, <span class="at" style="color: #657422;">size =</span> body_mass_g)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.5</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;">~</span>species) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb12-5">  hrbrthemes<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">theme_ipsum</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-knn-and-glm/tidymodels-knn-and-glm_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We see a clear relation between the sex of the penguins with and their bill depth. Further, we can also see a relation between the bill length for each of the species looks difference wrt to the other.</p>
</section>
<section id="build-models" class="level2">
<h2 class="anchored" data-anchor-id="build-models">Build models</h2>
<p>Let’s consider how to spend our data budget<sup>4</sup>:</p>
<ul>
<li>create training and testing sets</li>
<li>create resampling folds from the <em>training</em> set</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;">set.seed</span>(<span class="dv" style="color: #AD0000;">123</span>)</span>
<span id="cb13-2">penguin_split <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">initial_split</span>(penguins, <span class="at" style="color: #657422;">strata =</span> sex)</span>
<span id="cb13-3">penguin_train <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">training</span>(penguin_split)</span>
<span id="cb13-4">penguin_test <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">testing</span>(penguin_split)</span>
<span id="cb13-5"></span>
<span id="cb13-6"><span class="fu" style="color: #4758AB;">set.seed</span>(<span class="dv" style="color: #AD0000;">234</span>)</span>
<span id="cb13-7">penguin_folds <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">vfold_cv</span>(penguin_train, <span class="at" style="color: #657422;">strata =</span> sex)</span>
<span id="cb13-8">penguin_folds</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>#  10-fold cross-validation using stratification 
# A tibble: 10 × 2
   splits           id    
   &lt;list&gt;           &lt;chr&gt; 
 1 &lt;split [223/26]&gt; Fold01
 2 &lt;split [223/26]&gt; Fold02
 3 &lt;split [223/26]&gt; Fold03
 4 &lt;split [224/25]&gt; Fold04
 5 &lt;split [224/25]&gt; Fold05
 6 &lt;split [224/25]&gt; Fold06
 7 &lt;split [225/24]&gt; Fold07
 8 &lt;split [225/24]&gt; Fold08
 9 &lt;split [225/24]&gt; Fold09
10 &lt;split [225/24]&gt; Fold10</code></pre>
</div>
</div>
<p>Let’s create a model specification<sup>5</sup> for each model we want to try:</p>
</section>
<section id="glm" class="level2">
<h2 class="anchored" data-anchor-id="glm">GLM</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">glm_spec <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb15-2">  <span class="fu" style="color: #4758AB;">logistic_reg</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-3">  <span class="fu" style="color: #4758AB;">set_engine</span>(<span class="st" style="color: #20794D;">"glm"</span>)</span></code></pre></div>
</div>
</section>
<section id="knn" class="level2">
<h2 class="anchored" data-anchor-id="knn">KNN</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">knn_spec <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">nearest_neighbor</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-2">  <span class="fu" style="color: #4758AB;">set_engine</span>(<span class="st" style="color: #20794D;">"kknn"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-3">  <span class="fu" style="color: #4758AB;">set_mode</span>(<span class="st" style="color: #20794D;">"classification"</span>)</span></code></pre></div>
</div>
<p>To set up your modeling code, consider using the parsnip addin<sup>6</sup> or the usemodels<sup>7</sup> package.</p>
<p>Now let’s build a model workflow<sup>8</sup> combining each model specification with a data preprocessor:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">penguin_formula <span class="ot" style="color: #003B4F;">&lt;-</span> sex <span class="sc" style="color: #5E5E5E;">~</span> .</span>
<span id="cb17-2"></span>
<span id="cb17-3">glm_wf    <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">workflow</span>(penguin_formula, glm_spec)</span>
<span id="cb17-4"></span>
<span id="cb17-5">knn_wf <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">workflow</span>(penguin_formula, knn_spec)</span></code></pre></div>
</div>
<p>If your feature engineering needs are more complex than provided by a formula like <code>sex ~ .</code>, use a recipe<sup>9</sup></p>
</section>
<section id="evaluate-models" class="level2">
<h2 class="anchored" data-anchor-id="evaluate-models">Evaluate models</h2>
<p>These models have no tuning parameters so we can evaluate them as they are. [Learn about tuning hyperparameters here<sup>10</sup></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">contrl_preds <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">control_resamples</span>(<span class="at" style="color: #657422;">save_pred =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb18-2"></span>
<span id="cb18-3">glm_rs <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fit_resamples</span>(</span>
<span id="cb18-4">  glm_wf,</span>
<span id="cb18-5">  <span class="at" style="color: #657422;">resamples =</span> penguin_folds,</span>
<span id="cb18-6">  <span class="at" style="color: #657422;">control =</span> contrl_preds</span>
<span id="cb18-7">)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>! Fold05: preprocessor 1/1, model 1/1: glm.fit: fitted probabilities numerically 0...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">knn_rs <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fit_resamples</span>(</span>
<span id="cb20-2">  knn_wf,</span>
<span id="cb20-3">  <span class="at" style="color: #657422;">resamples =</span> penguin_folds,</span>
<span id="cb20-4">  <span class="at" style="color: #657422;">control =</span> contrl_preds</span>
<span id="cb20-5">)</span></code></pre></div>
</div>
<p>How did these two models compare?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="fu" style="color: #4758AB;">collect_metrics</span>(glm_rs)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 2 × 6
  .metric  .estimator  mean     n std_err .config             
  &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 accuracy binary     0.916    10  0.0173 Preprocessor1_Model1
2 roc_auc  binary     0.975    10  0.0105 Preprocessor1_Model1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="fu" style="color: #4758AB;">collect_metrics</span>(knn_rs)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 2 × 6
  .metric  .estimator  mean     n std_err .config             
  &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 accuracy binary     0.912    10 0.0132  Preprocessor1_Model1
2 roc_auc  binary     0.979    10 0.00697 Preprocessor1_Model1</code></pre>
</div>
</div>
</section>
<section id="roc-curve-comparing-the-two-models." class="level2">
<h2 class="anchored" data-anchor-id="roc-curve-comparing-the-two-models.">ROC Curve comparing the two models.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="fu" style="color: #4758AB;">bind_rows</span>(</span>
<span id="cb25-2">  <span class="fu" style="color: #4758AB;">collect_predictions</span>(glm_rs) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb25-3">    <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">mod =</span> <span class="st" style="color: #20794D;">"glm"</span>),</span>
<span id="cb25-4">  <span class="fu" style="color: #4758AB;">collect_predictions</span>(knn_rs) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb25-5">    <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">mod =</span> <span class="st" style="color: #20794D;">"knn"</span>)</span>
<span id="cb25-6">) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb25-7">  <span class="fu" style="color: #4758AB;">group_by</span>(mod) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb25-8">  <span class="fu" style="color: #4758AB;">roc_curve</span>(sex, .pred_female) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb25-9">  <span class="fu" style="color: #4758AB;">autoplot</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-knn-and-glm/tidymodels-knn-and-glm_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>These models perform very similarly, so perhaps we would choose the simpler, linear model. The function <code>last_fit()</code> <em>fits</em> one final time on the training data and <em>evaluates</em> on the testing data. This is the first time we have used the testing data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1">final_fitted <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">last_fit</span>(glm_wf, penguin_split)</span>
<span id="cb26-2"><span class="fu" style="color: #4758AB;">collect_metrics</span>(final_fitted)  <span class="do" style="color: #5E5E5E;
font-style: italic;">## metrics evaluated on the *testing* data</span></span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 2 × 4
  .metric  .estimator .estimate .config             
  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 accuracy binary         0.857 Preprocessor1_Model1
2 roc_auc  binary         0.937 Preprocessor1_Model1</code></pre>
</div>
</div>
<p>This object contains a fitted workflow that we can use for prediction.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1">final_wf <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">extract_workflow</span>(final_fitted)</span>
<span id="cb28-2"><span class="fu" style="color: #4758AB;">predict</span>(final_wf, penguin_test[<span class="dv" style="color: #AD0000;">59</span>,])</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 1 × 1
  .pred_class
  &lt;fct&gt;      
1 male       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1">penguin_test[<span class="dv" style="color: #AD0000;">59</span>,]</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 1 × 7
  species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g sex  
  &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;int&gt;       &lt;int&gt; &lt;fct&gt;
1 Gentoo  Biscoe           46.5          14.8              217        5200 fema…</code></pre>
</div>
</div>
<p>You can save this fitted <code>final_wf</code> object to use later with new data, for example with <code>readr::write_rds()</code>.</p>
</section>
</section>
<section id="additional-reading" class="level1">
<h1>Additional Reading:</h1>
<ul>
<li><p>https://rstudio-pubs-static.s3.amazonaws.com/749128_01ee1cc430c348438b211f3db0ed6d0a.html</p></li>
<li><p>https://emilhvitfeldt.github.io/ISLR-tidymodels-labs/index.html</p></li>
<li><p>https://www.tidymodels.org/learn/models/</p></li>
<li><p>https://juliasilge.com/blog/palmer-penguins/</p></li>
</ul>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://karatsidhu.com/posts/tidymodels-svm-random-forests/↩︎</p></li>
<li id="fn2"><p>https://karatsidhu.com/posts/tidymodels-pca-and-umap/↩︎</p></li>
<li id="fn3"><p>https://www.tmwr.org/software-modeling.html#model-phases↩︎</p></li>
<li id="fn4"><p>https://www.tmwr.org/splitting.html↩︎</p></li>
<li id="fn5"><p>https://www.tmwr.org/models.html↩︎</p></li>
<li id="fn6"><p>https://parsnip.tidymodels.org/reference/parsnip_addin.html↩︎</p></li>
<li id="fn7"><p>https://usemodels.tidymodels.org/↩︎</p></li>
<li id="fn8"><p>https://www.tmwr.org/workflows.html↩︎</p></li>
<li id="fn9"><p>https://www.tidymodels.org/start/recipes/↩︎</p></li>
<li id="fn10"><p>https://www.tidymodels.org/start/tuning/↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {TidyModels - {KNN} \&amp; {GLM}},
  date = {2022-05-24},
  url = {https://karatsidhu.com/posts/tidymodels-knn-and-glm/tidymodels-knn-and-glm.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“TidyModels - KNN &amp; GLM.”</span> May 24,
2022. <a href="https://karatsidhu.com/posts/tidymodels-knn-and-glm/tidymodels-knn-and-glm.html">https://karatsidhu.com/posts/tidymodels-knn-and-glm/tidymodels-knn-and-glm.html</a>.
</div></div></section></div> ]]></description>
  <category>TidyModels</category>
  <category>KNN</category>
  <category>GLM</category>
  <category>Machine Learning</category>
  <category>Classification</category>
  <guid>https://karatsidhu.com/posts/tidymodels-knn-and-glm/tidymodels-knn-and-glm.html</guid>
  <pubDate>Tue, 24 May 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/tidymodels-knn-and-glm/images/logo.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>EPL 2022 Final Table</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/epl-2022-final-table/epl-2022-final-table.html</link>
  <description><![CDATA[ 




<section id="how-to-make-beautiful-tables-in-r-using-gt" class="level1">
<h1>How to Make beautiful tables in R using gt()</h1>
<section id="using-gt-package-to-create-a-great-looking-table-for-the-epl-standings-2021-22" class="level2">
<h2 class="anchored" data-anchor-id="using-gt-package-to-create-a-great-looking-table-for-the-epl-standings-2021-22">Using gt package to create a great looking table for the EPL Standings 2021-22</h2>
<p>Grammar of tables or gt() package, combined with the gtextras() package provides an easy and simple way to make high quality tables in R.</p>
<p>I wanted to practice the gt() package in R, and decided to document my journey to making a great looking table of the final standings for the English Premier League now that the season is over.</p>
<p>It’s been a season to forget as a Manchester United fan :( and I am hopeful for better performances next season under Ten Hag, but the football as a neutral has been very exciting to watch.I digress, let’s get back on to the coding part.</p>
<p>Code to make this possible, along with a brief explanation of each part of the process:</p>
</section>
</section>
<section id="loading-the-required-packages" class="level1">
<h1>Loading the required packages</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ ggplot2 3.3.6     ✔ purrr   0.3.4
✔ tibble  3.1.7     ✔ dplyr   1.0.9
✔ tidyr   1.2.0     ✔ stringr 1.4.0
✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">library</span>(gt)</span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;">library</span>(gtExtras)</span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;">library</span>(showtext)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Loading required package: sysfonts</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>Loading required package: showtextdb</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;">library</span>(RColorBrewer)</span></code></pre></div>
</div>
<p>The main font I used for the title is similar to the PL official font.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;">showtext_auto</span>()</span>
<span id="cb9-2">sysfonts<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">font_add</span>(<span class="st" style="color: #20794D;">"Premier League"</span>, <span class="at" style="color: #657422;">regular =</span> <span class="st" style="color: #20794D;">"FontsFree-Net-Barclays-Premier-League.ttf"</span>)</span></code></pre></div>
</div>
<p>The data file was downloaded from the FBref database as a .csv, so the loading and cleaning of data was a relatively easy process</p>
</section>
<section id="loading-the-data" class="level1">
<h1>Loading the data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">table <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">read.csv</span>(<span class="st" style="color: #20794D;">"pl_table_gw_38.csv"</span>)</span>
<span id="cb10-2"></span>
<span id="cb10-3"></span>
<span id="cb10-4">logos <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb10-5">    <span class="fu" style="color: #4758AB;">read.csv</span>(</span>
<span id="cb10-6">        <span class="st" style="color: #20794D;">"https://raw.githubusercontent.com/steodose/Club-Soccer-Forecasts/main/team_mapping.csv"</span></span>
<span id="cb10-7">    )</span></code></pre></div>
</div>
<p>Data to be cleaned and the form table needs to be in the form of a list inside a data frame. Cleaning it up:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">logos_cleaned <span class="ot" style="color: #003B4F;">&lt;-</span> logos <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-2">    <span class="fu" style="color: #4758AB;">select</span>(squad_fbref, url_logo_espn) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-3">    <span class="fu" style="color: #4758AB;">rename</span>(<span class="at" style="color: #657422;">Squad =</span> <span class="st" style="color: #20794D;">"squad_fbref"</span>)</span>
<span id="cb11-4"></span>
<span id="cb11-5">table <span class="ot" style="color: #003B4F;">&lt;-</span> table <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-6">    <span class="fu" style="color: #4758AB;">select</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="fu" style="color: #4758AB;">c</span>(Goalkeeper, Notes, Attendance))</span></code></pre></div>
</div>
</section>
<section id="combining-the-two-tables" class="level1">
<h1>Combining the two tables,</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">table2 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">inner_join</span>(table,</span>
<span id="cb12-2">    logos_cleaned,</span>
<span id="cb12-3">    <span class="at" style="color: #657422;">by =</span> <span class="st" style="color: #20794D;">"Squad"</span></span>
<span id="cb12-4">) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb12-5">    <span class="fu" style="color: #4758AB;">relocate</span>(Rk, url_logo_espn)</span></code></pre></div>
</div>
</section>
<section id="making-the-final-table" class="level1">
<h1>Making the final table:</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">final_table <span class="ot" style="color: #003B4F;">&lt;-</span> table2 <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-2">    <span class="fu" style="color: #4758AB;">rename</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;"> </span><span class="st" style="color: #20794D;">`</span> <span class="ot" style="color: #003B4F;">=</span> <span class="st" style="color: #20794D;">"url_logo_espn"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-3">    <span class="fu" style="color: #4758AB;">rename</span>(<span class="at" style="color: #657422;">Rank =</span> <span class="st" style="color: #20794D;">"Rk"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-4">    <span class="fu" style="color: #4758AB;">rename</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Top Scorer</span><span class="st" style="color: #20794D;">`</span> <span class="ot" style="color: #003B4F;">=</span> <span class="st" style="color: #20794D;">"Top.Team.Scorer"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-5">    <span class="fu" style="color: #4758AB;">gt</span>() <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-6">    <span class="fu" style="color: #4758AB;">gt_color_rows</span>(</span>
<span id="cb13-7">        <span class="at" style="color: #657422;">columns =</span> W,</span>
<span id="cb13-8">        <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb13-9">        <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"RColorBrewer::Spectral"</span>,</span>
<span id="cb13-10">        <span class="at" style="color: #657422;">domain =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">max</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>W), <span class="fu" style="color: #4758AB;">min</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>W))</span>
<span id="cb13-11">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-12">    <span class="fu" style="color: #4758AB;">gt_color_rows</span>(</span>
<span id="cb13-13">        <span class="at" style="color: #657422;">columns =</span> D,</span>
<span id="cb13-14">        <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb13-15">        <span class="at" style="color: #657422;">direction =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">1</span>,</span>
<span id="cb13-16">        <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"RColorBrewer::Spectral"</span>,</span>
<span id="cb13-17">        <span class="at" style="color: #657422;">domain =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">max</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>D), <span class="fu" style="color: #4758AB;">min</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>D))</span>
<span id="cb13-18">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-19">    <span class="fu" style="color: #4758AB;">gt_color_rows</span>(</span>
<span id="cb13-20">        <span class="at" style="color: #657422;">columns =</span> L,</span>
<span id="cb13-21">        <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb13-22">        <span class="at" style="color: #657422;">direction =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">1</span>,</span>
<span id="cb13-23">        <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"RColorBrewer::Spectral"</span>,</span>
<span id="cb13-24">        <span class="at" style="color: #657422;">domain =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">max</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>L), <span class="fu" style="color: #4758AB;">min</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>L))</span>
<span id="cb13-25">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-26">    <span class="fu" style="color: #4758AB;">gt_color_rows</span>(</span>
<span id="cb13-27">        <span class="at" style="color: #657422;">columns =</span> GF,</span>
<span id="cb13-28">        <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb13-29">        <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"RColorBrewer::Spectral"</span>,</span>
<span id="cb13-30">        <span class="at" style="color: #657422;">domain =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">max</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>GF), <span class="fu" style="color: #4758AB;">min</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>GF))</span>
<span id="cb13-31">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-32">    <span class="fu" style="color: #4758AB;">gt_color_rows</span>(</span>
<span id="cb13-33">        <span class="at" style="color: #657422;">columns =</span> GA,</span>
<span id="cb13-34">        <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb13-35">        <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"RColorBrewer::Spectral"</span>,</span>
<span id="cb13-36">        <span class="at" style="color: #657422;">direction =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">1</span>,</span>
<span id="cb13-37">        <span class="at" style="color: #657422;">domain =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">min</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>GA), <span class="fu" style="color: #4758AB;">max</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>GA))</span>
<span id="cb13-38">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-39">    <span class="fu" style="color: #4758AB;">gt_color_rows</span>(</span>
<span id="cb13-40">        <span class="at" style="color: #657422;">columns =</span> GD,</span>
<span id="cb13-41">        <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb13-42">        <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"RColorBrewer::Spectral"</span>,</span>
<span id="cb13-43">        <span class="at" style="color: #657422;">domain =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">max</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>GD), <span class="fu" style="color: #4758AB;">min</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>GD))</span>
<span id="cb13-44">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-45">    <span class="fu" style="color: #4758AB;">gt_color_rows</span>(</span>
<span id="cb13-46">        <span class="at" style="color: #657422;">columns =</span> Pts,</span>
<span id="cb13-47">        <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb13-48">        <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"RColorBrewer::Spectral"</span>,</span>
<span id="cb13-49">        <span class="at" style="color: #657422;">domain =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">max</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>Pts), <span class="fu" style="color: #4758AB;">min</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>Pts))</span>
<span id="cb13-50">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-51">    <span class="fu" style="color: #4758AB;">gt_color_rows</span>(</span>
<span id="cb13-52">        xG,</span>
<span id="cb13-53">        <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb13-54">        <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"RColorBrewer::Spectral"</span>,</span>
<span id="cb13-55">        <span class="at" style="color: #657422;">domain =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">max</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>xG), <span class="fu" style="color: #4758AB;">min</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>xG))</span>
<span id="cb13-56">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-57">    <span class="fu" style="color: #4758AB;">gt_color_rows</span>(</span>
<span id="cb13-58">        xGA,</span>
<span id="cb13-59">        <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb13-60">        <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"RColorBrewer::Spectral"</span>,</span>
<span id="cb13-61">        <span class="at" style="color: #657422;">direction =</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">1</span>,</span>
<span id="cb13-62">        <span class="at" style="color: #657422;">domain =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">min</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>xGA), <span class="fu" style="color: #4758AB;">max</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>xGA))</span>
<span id="cb13-63">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-64">    <span class="fu" style="color: #4758AB;">gt_color_rows</span>(</span>
<span id="cb13-65">        xGD,</span>
<span id="cb13-66">        <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb13-67">        <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"RColorBrewer::Spectral"</span>,</span>
<span id="cb13-68">        <span class="at" style="color: #657422;">domain =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">max</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>xGD), <span class="fu" style="color: #4758AB;">min</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>xGD))</span>
<span id="cb13-69">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-70">    <span class="fu" style="color: #4758AB;">gt_color_rows</span>(</span>
<span id="cb13-71">        xGD<span class="fl" style="color: #AD0000;">.90</span>,</span>
<span id="cb13-72">        <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb13-73">        <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"RColorBrewer::Spectral"</span>,</span>
<span id="cb13-74">        <span class="at" style="color: #657422;">domain =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fu" style="color: #4758AB;">max</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>xGD<span class="fl" style="color: #AD0000;">.90</span>), <span class="fu" style="color: #4758AB;">min</span>(table2<span class="sc" style="color: #5E5E5E;">$</span>xGD<span class="fl" style="color: #AD0000;">.90</span>))</span>
<span id="cb13-75">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-76">    <span class="fu" style="color: #4758AB;">gt_img_rows</span>(</span>
<span id="cb13-77">        <span class="at" style="color: #657422;">columns =</span> <span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;"> </span><span class="st" style="color: #20794D;">`</span>,</span>
<span id="cb13-78">        <span class="at" style="color: #657422;">img_source =</span> <span class="st" style="color: #20794D;">"web"</span>,</span>
<span id="cb13-79">        <span class="at" style="color: #657422;">height =</span> <span class="dv" style="color: #AD0000;">35</span></span>
<span id="cb13-80">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-81">    <span class="fu" style="color: #4758AB;">tab_style</span>(</span>
<span id="cb13-82">        <span class="at" style="color: #657422;">style =</span> <span class="fu" style="color: #4758AB;">list</span>(<span class="fu" style="color: #4758AB;">cell_text</span>(<span class="at" style="color: #657422;">weight =</span> <span class="st" style="color: #20794D;">"bold"</span>)),</span>
<span id="cb13-83">        <span class="at" style="color: #657422;">locations =</span> <span class="fu" style="color: #4758AB;">cells_body</span>(<span class="at" style="color: #657422;">rows =</span> Squad <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Manchester Utd"</span>)</span>
<span id="cb13-84">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-85">    <span class="fu" style="color: #4758AB;">gt_theme_espn</span>() <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-86">    <span class="fu" style="color: #4758AB;">tab_style</span>(</span>
<span id="cb13-87">        <span class="at" style="color: #657422;">style =</span> <span class="fu" style="color: #4758AB;">list</span>(<span class="fu" style="color: #4758AB;">cell_text</span>(<span class="at" style="color: #657422;">weight =</span> <span class="st" style="color: #20794D;">"bold"</span>)),</span>
<span id="cb13-88">        <span class="at" style="color: #657422;">locations =</span> <span class="fu" style="color: #4758AB;">cells_body</span>(</span>
<span id="cb13-89">            <span class="at" style="color: #657422;">columns =</span> Squad</span>
<span id="cb13-90">        )</span>
<span id="cb13-91">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-92">    <span class="fu" style="color: #4758AB;">tab_header</span>(</span>
<span id="cb13-93">        <span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"2021-22 Premier League Standings"</span>,</span>
<span id="cb13-94">        <span class="at" style="color: #657422;">subtitle =</span> <span class="st" style="color: #20794D;">"Final Results for the English Premier League saw Manchester City win the league after an exciting last few weeks of competition</span></span>
<span id="cb13-95"><span class="st" style="color: #20794D;">    with Liverpool. The competition came down to the final few minutes of the season where City were crowned winners.</span></span>
<span id="cb13-96"><span class="st" style="color: #20794D;">    The top 4 teams qualified for the UCL, 5th and 6th place teams are in the Europa League while the 7th place West Ham</span></span>
<span id="cb13-97"><span class="st" style="color: #20794D;">    secured the UECL qualification. The bottom 3 teams, Norwich, Watford and Burnley were relegated to the English Championship (2nd tier competition);</span></span>
<span id="cb13-98"><span class="st" style="color: #20794D;">    Everton and Leeds United narrowly escaped relegation."</span></span>
<span id="cb13-99">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-100">    <span class="fu" style="color: #4758AB;">tab_footnote</span>(</span>
<span id="cb13-101">        <span class="at" style="color: #657422;">footnote =</span> <span class="st" style="color: #20794D;">"xG = Expected Goals (Higher is better)"</span>,</span>
<span id="cb13-102">        <span class="at" style="color: #657422;">locations =</span> <span class="fu" style="color: #4758AB;">cells_column_labels</span>(<span class="at" style="color: #657422;">columns =</span> xG)</span>
<span id="cb13-103">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-104">    <span class="fu" style="color: #4758AB;">tab_footnote</span>(</span>
<span id="cb13-105">        <span class="at" style="color: #657422;">footnote =</span> <span class="st" style="color: #20794D;">"xGA = Expect Goals Against (Lower is better) "</span>,</span>
<span id="cb13-106">        <span class="at" style="color: #657422;">locations =</span> <span class="fu" style="color: #4758AB;">cells_column_labels</span>(<span class="at" style="color: #657422;">columns =</span> xGA)</span>
<span id="cb13-107">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-108">    <span class="fu" style="color: #4758AB;">tab_footnote</span>(</span>
<span id="cb13-109">        <span class="at" style="color: #657422;">footnote =</span> <span class="st" style="color: #20794D;">"xGD = xG Difference (xG - xGA (High is better))"</span>,</span>
<span id="cb13-110">        <span class="at" style="color: #657422;">locations =</span> <span class="fu" style="color: #4758AB;">cells_column_labels</span>(<span class="at" style="color: #657422;">columns =</span> xGD)</span>
<span id="cb13-111">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-112">    <span class="fu" style="color: #4758AB;">tab_footnote</span>(</span>
<span id="cb13-113">        <span class="at" style="color: #657422;">footnote =</span> <span class="st" style="color: #20794D;">"xGD.90 = xG Difference per 90 mins (Higher is better)"</span>,</span>
<span id="cb13-114">        <span class="at" style="color: #657422;">locations =</span> <span class="fu" style="color: #4758AB;">cells_column_labels</span>(<span class="at" style="color: #657422;">columns =</span> xGD<span class="fl" style="color: #AD0000;">.90</span>)</span>
<span id="cb13-115">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-116">    <span class="fu" style="color: #4758AB;">tab_footnote</span>(</span>
<span id="cb13-117">        <span class="at" style="color: #657422;">footnote =</span> <span class="st" style="color: #20794D;">"The team that I support :("</span>,</span>
<span id="cb13-118">        <span class="at" style="color: #657422;">locations =</span> <span class="fu" style="color: #4758AB;">cells_body</span>(</span>
<span id="cb13-119">            <span class="at" style="color: #657422;">columns =</span> Squad,</span>
<span id="cb13-120">            <span class="at" style="color: #657422;">rows =</span> <span class="dv" style="color: #AD0000;">6</span></span>
<span id="cb13-121">        )</span>
<span id="cb13-122">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-123">    <span class="fu" style="color: #4758AB;">tab_source_note</span>(</span>
<span id="cb13-124">        <span class="at" style="color: #657422;">source_note =</span> <span class="st" style="color: #20794D;">"Data : FBRef | Table : Github.com/SidhuK"</span></span>
<span id="cb13-125">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-126">    <span class="fu" style="color: #4758AB;">tab_style</span>(</span>
<span id="cb13-127">        <span class="at" style="color: #657422;">locations =</span> <span class="fu" style="color: #4758AB;">cells_title</span>(<span class="at" style="color: #657422;">groups =</span> <span class="st" style="color: #20794D;">"title"</span>), <span class="co" style="color: #5E5E5E;"># format the main title</span></span>
<span id="cb13-128">        <span class="at" style="color: #657422;">style =</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb13-129">            <span class="fu" style="color: #4758AB;">cell_text</span>(</span>
<span id="cb13-130">                <span class="at" style="color: #657422;">font =</span> <span class="st" style="color: #20794D;">"Premier League"</span>,</span>
<span id="cb13-131">                <span class="at" style="color: #657422;">size =</span> <span class="fu" style="color: #4758AB;">px</span>(<span class="dv" style="color: #AD0000;">40</span>),</span>
<span id="cb13-132">                <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"black"</span>,</span>
<span id="cb13-133">                <span class="at" style="color: #657422;">weight =</span> <span class="dv" style="color: #AD0000;">700</span></span>
<span id="cb13-134">            )</span>
<span id="cb13-135">        )</span>
<span id="cb13-136">    ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb13-137">    <span class="fu" style="color: #4758AB;">tab_options</span>(</span>
<span id="cb13-138">        <span class="at" style="color: #657422;">table.background.color =</span> <span class="st" style="color: #20794D;">"#eeeeee"</span>,</span>
<span id="cb13-139">        <span class="at" style="color: #657422;">column_labels.background.color =</span> <span class="st" style="color: #20794D;">"#eeeeee"</span></span>
<span id="cb13-140">    ) <span class="co" style="color: #5E5E5E;"># set the bg color</span></span></code></pre></div>
</div>
</section>
<section id="saving-the-table-as-png-optional" class="level1">
<h1>Saving the table as png (optional)</h1>
<p>(Use gt save to save it as a png and not an html object)</p>
</section>
<section id="final-result" class="level1">
<h1>Final Result:</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">final_table</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Warning in locname == "data" &amp;&amp; colname == .env$colname: 'length(x) = 245 &gt; 1'
in coercion to 'logical(1)'

Warning in locname == "data" &amp;&amp; colname == .env$colname: 'length(x) = 245 &gt; 1'
in coercion to 'logical(1)'</code></pre>
</div>
<div class="cell-output-display">

<div id="nyctumtrqo" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
html {
  font-family: Lato, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#nyctumtrqo) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #EEEEEE;
  width: auto;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #FFFFFF;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#nyctumtrqo) .gt_heading {
  background-color: #EEEEEE;
  text-align: left;
  border-bottom-color: #EEEEEE;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#nyctumtrqo) .gt_title {
  color: #333333;
  font-size: 24px;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #EEEEEE;
  border-bottom-width: 0;
}

:where(#nyctumtrqo) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #EEEEEE;
  border-top-width: 0;
}

:where(#nyctumtrqo) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nyctumtrqo) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#nyctumtrqo) .gt_col_heading {
  color: #333333;
  background-color: #EEEEEE;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#nyctumtrqo) .gt_column_spanner_outer {
  color: #333333;
  background-color: #EEEEEE;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#nyctumtrqo) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#nyctumtrqo) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#nyctumtrqo) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#nyctumtrqo) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #EEEEEE;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#nyctumtrqo) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #EEEEEE;
  font-size: 80%;
  font-weight: bolder;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#nyctumtrqo) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#nyctumtrqo) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#nyctumtrqo) .gt_row {
  padding-top: 7px;
  padding-bottom: 7px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #F6F7F7;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#nyctumtrqo) .gt_stub {
  color: #333333;
  background-color: #EEEEEE;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nyctumtrqo) .gt_stub_row_group {
  color: #333333;
  background-color: #EEEEEE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#nyctumtrqo) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#nyctumtrqo) .gt_summary_row {
  color: #333333;
  background-color: #EEEEEE;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nyctumtrqo) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#nyctumtrqo) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#nyctumtrqo) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nyctumtrqo) .gt_grand_summary_row {
  color: #333333;
  background-color: #EEEEEE;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nyctumtrqo) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#nyctumtrqo) .gt_striped {
  background-color: #FAFAFA;
}

:where(#nyctumtrqo) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nyctumtrqo) .gt_footnotes {
  color: #333333;
  background-color: #EEEEEE;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#nyctumtrqo) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nyctumtrqo) .gt_sourcenotes {
  color: #333333;
  background-color: #EEEEEE;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#nyctumtrqo) .gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nyctumtrqo) .gt_left {
  text-align: left;
}

:where(#nyctumtrqo) .gt_center {
  text-align: center;
}

:where(#nyctumtrqo) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#nyctumtrqo) .gt_font_normal {
  font-weight: normal;
}

:where(#nyctumtrqo) .gt_font_bold {
  font-weight: bold;
}

:where(#nyctumtrqo) .gt_font_italic {
  font-style: italic;
}

:where(#nyctumtrqo) .gt_super {
  font-size: 65%;
}

:where(#nyctumtrqo) .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

:where(#nyctumtrqo) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#nyctumtrqo) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#nyctumtrqo) .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

:where(#nyctumtrqo) .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

:where(#nyctumtrqo) .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="16" class="gt_heading gt_title gt_font_normal" style="color: #000000; font-family: 'Premier League'; font-size: 40px; font-weight: 700;">2021-22 Premier League Standings</th>
    </tr>
    <tr>
      <th colspan="16" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">Final Results for the English Premier League saw Manchester City win the league after an exciting last few weeks of competition
    with Liverpool. The competition came down to the final few minutes of the season where City were crowned winners.
    The top 4 teams qualified for the UCL, 5th and 6th place teams are in the Europa League while the 7th place West Ham
    secured the UECL qualification. The bottom 3 teams, Norwich, Watford and Burnley were relegated to the English Championship (2nd tier competition);
    Everton and Leeds United narrowly escaped relegation.</th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Rank</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"> </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Squad</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">MP</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">W</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">D</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">L</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">GF</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">GA</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">GD</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">Pts</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">xG<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">xGA<sup class="gt_footnote_marks">2</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">xGD<sup class="gt_footnote_marks">3</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">xGD.90<sup class="gt_footnote_marks">4</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Top Scorer</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">1</td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/382.png" style="height:35px;"></td>
<td class="gt_row gt_left" style="font-weight: bold;">Manchester City</td>
<td class="gt_row gt_right">38</td>
<td class="gt_row gt_right" style="background-color: #5E4FA2; color: #FFFFFF;">29</td>
<td class="gt_row gt_right" style="background-color: #8BCFA5; color: #000000;">6</td>
<td class="gt_row gt_right" style="background-color: #5467AD; color: #FFFFFF;">3</td>
<td class="gt_row gt_right" style="background-color: #5E4FA2; color: #FFFFFF;">99</td>
<td class="gt_row gt_right" style="background-color: #5E4FA2; color: #FFFFFF;">26</td>
<td class="gt_row gt_right" style="background-color: #5E4FA2; color: #FFFFFF;">73</td>
<td class="gt_row gt_right" style="background-color: #5E4FA2; color: #FFFFFF;">93</td>
<td class="gt_row gt_right" style="background-color: #5E4FA2; color: #FFFFFF;">86.1</td>
<td class="gt_row gt_right" style="background-color: #5E4FA2; color: #FFFFFF;">26.9</td>
<td class="gt_row gt_right" style="background-color: #5E4FA2; color: #FFFFFF;">59.3</td>
<td class="gt_row gt_right" style="background-color: #5E4FA2; color: #FFFFFF;">1.60</td>
<td class="gt_row gt_left">Kevin De Bruyne - 15</td></tr>
    <tr><td class="gt_row gt_right gt_striped">2</td>
<td class="gt_row gt_left gt_striped"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/364.png" style="height:35px;"></td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;">Liverpool</td>
<td class="gt_row gt_right gt_striped">38</td>
<td class="gt_row gt_right gt_striped" style="background-color: #5367AD; color: #FFFFFF;">28</td>
<td class="gt_row gt_right gt_striped" style="background-color: #EAF79F; color: #000000;">8</td>
<td class="gt_row gt_right gt_striped" style="background-color: #5E4FA2; color: #FFFFFF;">2</td>
<td class="gt_row gt_right gt_striped" style="background-color: #4975B4; color: #FFFFFF;">94</td>
<td class="gt_row gt_right gt_striped" style="background-color: #5E4FA2; color: #FFFFFF;">26</td>
<td class="gt_row gt_right gt_striped" style="background-color: #5465AC; color: #FFFFFF;">68</td>
<td class="gt_row gt_right gt_striped" style="background-color: #5B57A6; color: #FFFFFF;">92</td>
<td class="gt_row gt_right gt_striped" style="background-color: #5E4FA2; color: #FFFFFF;">86.1</td>
<td class="gt_row gt_right gt_striped" style="background-color: #4B9BB6; color: #000000;">33.1</td>
<td class="gt_row gt_right gt_striped" style="background-color: #4A74B3; color: #FFFFFF;">52.9</td>
<td class="gt_row gt_right gt_striped" style="background-color: #4A74B3; color: #FFFFFF;">1.43</td>
<td class="gt_row gt_left gt_striped">Mohamed Salah - 23</td></tr>
    <tr><td class="gt_row gt_right">3</td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/363.png" style="height:35px;"></td>
<td class="gt_row gt_left" style="font-weight: bold;">Chelsea</td>
<td class="gt_row gt_right">38</td>
<td class="gt_row gt_right" style="background-color: #BFE5A0; color: #000000;">21</td>
<td class="gt_row gt_right" style="background-color: #FEBF6F; color: #000000;">11</td>
<td class="gt_row gt_right" style="background-color: #58AAAF; color: #000000;">6</td>
<td class="gt_row gt_right" style="background-color: #ADDEA4; color: #000000;">76</td>
<td class="gt_row gt_right" style="background-color: #4394B8; color: #000000;">33</td>
<td class="gt_row gt_right" style="background-color: #78C8A5; color: #000000;">43</td>
<td class="gt_row gt_right" style="background-color: #96D4A4; color: #000000;">74</td>
<td class="gt_row gt_right" style="background-color: #E6F598; color: #000000;">64.8</td>
<td class="gt_row gt_right" style="background-color: #5DB2AC; color: #000000;">34.9</td>
<td class="gt_row gt_right" style="background-color: #A8DCA4; color: #000000;">29.9</td>
<td class="gt_row gt_right" style="background-color: #A7DBA4; color: #000000;">0.81</td>
<td class="gt_row gt_left">Mason Mount - 11</td></tr>
    <tr><td class="gt_row gt_right gt_striped">4</td>
<td class="gt_row gt_left gt_striped"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/367.png" style="height:35px;"></td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;">Tottenham</td>
<td class="gt_row gt_right gt_striped">38</td>
<td class="gt_row gt_right gt_striped" style="background-color: #A6DBA4; color: #000000;">22</td>
<td class="gt_row gt_right gt_striped" style="background-color: #5AAEAE; color: #000000;">5</td>
<td class="gt_row gt_right gt_striped" style="background-color: #CFEB9D; color: #000000;">11</td>
<td class="gt_row gt_right gt_striped" style="background-color: #E3F499; color: #000000;">69</td>
<td class="gt_row gt_right gt_striped" style="background-color: #85CDA5; color: #000000;">40</td>
<td class="gt_row gt_right gt_striped" style="background-color: #BCE4A1; color: #000000;">29</td>
<td class="gt_row gt_right gt_striped" style="background-color: #B1DFA3; color: #000000;">71</td>
<td class="gt_row gt_right gt_striped" style="background-color: #F6FBB1; color: #000000;">61.5</td>
<td class="gt_row gt_right gt_striped" style="background-color: #92D2A5; color: #000000;">39.0</td>
<td class="gt_row gt_right gt_striped" style="background-color: #D5EE9C; color: #000000;">22.5</td>
<td class="gt_row gt_right gt_striped" style="background-color: #D4ED9C; color: #000000;">0.61</td>
<td class="gt_row gt_left gt_striped">Son Heung-min - 23</td></tr>
    <tr><td class="gt_row gt_right">5</td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/359.png" style="height:35px;"></td>
<td class="gt_row gt_left" style="font-weight: bold;">Arsenal</td>
<td class="gt_row gt_right">38</td>
<td class="gt_row gt_right" style="background-color: #A6DBA4; color: #000000;">22</td>
<td class="gt_row gt_right" style="background-color: #5E4FA2; color: #FFFFFF;">3</td>
<td class="gt_row gt_right" style="background-color: #F0F9A8; color: #000000;">13</td>
<td class="gt_row gt_right" style="background-color: #FFFFBF; color: #000000;">61</td>
<td class="gt_row gt_right" style="background-color: #DAF09B; color: #000000;">48</td>
<td class="gt_row gt_right" style="background-color: #F2FAAB; color: #000000;">13</td>
<td class="gt_row gt_right" style="background-color: #C2E6A0; color: #000000;">69</td>
<td class="gt_row gt_right" style="background-color: #FFEFA4; color: #000000;">56.8</td>
<td class="gt_row gt_right" style="background-color: #E9F69D; color: #000000;">46.0</td>
<td class="gt_row gt_right" style="background-color: #FCFEBA; color: #000000;">10.8</td>
<td class="gt_row gt_right" style="background-color: #FCFEBA; color: #000000;">0.29</td>
<td class="gt_row gt_left">Bukayo Saka - 11</td></tr>
    <tr><td class="gt_row gt_right gt_striped" style="font-weight: bold;">6</td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/360.png" style="height:35px;"></td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;">Manchester Utd<sup class="gt_footnote_marks">5</sup></td>
<td class="gt_row gt_right gt_striped" style="font-weight: bold;">38</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFF2A9; color: #000000; font-weight: bold;">16</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFE594; color: #000000; font-weight: bold;">10</td>
<td class="gt_row gt_right gt_striped" style="background-color: #E6F598; color: #000000; font-weight: bold;">12</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFEFA4; color: #000000; font-weight: bold;">57</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFF4AD; color: #000000; font-weight: bold;">57</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFF1A8; color: #000000; font-weight: bold;">0</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FDFEBC; color: #000000; font-weight: bold;">58</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEDE89; color: #000000; font-weight: bold;">54.0</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEE492; color: #000000; font-weight: bold;">54.1</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEE18D; color: #000000; font-weight: bold;">-0.1</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEE28E; color: #000000; font-weight: bold;">0.00</td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;">Cristiano Ronaldo - 18</td></tr>
    <tr><td class="gt_row gt_right">7</td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/371.png" style="height:35px;"></td>
<td class="gt_row gt_left" style="font-weight: bold;">West Ham</td>
<td class="gt_row gt_right">38</td>
<td class="gt_row gt_right" style="background-color: #FFF2A9; color: #000000;">16</td>
<td class="gt_row gt_right" style="background-color: #EAF79F; color: #000000;">8</td>
<td class="gt_row gt_right" style="background-color: #FAFDB7; color: #000000;">14</td>
<td class="gt_row gt_right" style="background-color: #FFFBB8; color: #000000;">60</td>
<td class="gt_row gt_right" style="background-color: #EEF8A4; color: #000000;">51</td>
<td class="gt_row gt_right" style="background-color: #F9FDB6; color: #000000;">9</td>
<td class="gt_row gt_right" style="background-color: #FFF8B4; color: #000000;">56</td>
<td class="gt_row gt_right" style="background-color: #FEB466; color: #000000;">49.6</td>
<td class="gt_row gt_right" style="background-color: #FBFDB8; color: #000000;">49.3</td>
<td class="gt_row gt_right" style="background-color: #FEE28F; color: #000000;">0.3</td>
<td class="gt_row gt_right" style="background-color: #FEE390; color: #000000;">0.01</td>
<td class="gt_row gt_left">Jarrod Bowen - 12</td></tr>
    <tr><td class="gt_row gt_right gt_striped">8</td>
<td class="gt_row gt_left gt_striped"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/375.png" style="height:35px;"></td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;">Leicester City</td>
<td class="gt_row gt_right gt_striped">38</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FED480; color: #000000;">14</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFE594; color: #000000;">10</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FAFDB7; color: #000000;">14</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FCFEBA; color: #000000;">62</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFEA9B; color: #000000;">59</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFF8B3; color: #000000;">3</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFE797; color: #000000;">52</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FDA95E; color: #000000;">48.5</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FCA85E; color: #000000;">59.8</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FCA95E; color: #000000;">-11.3</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FDAA5F; color: #000000;">-0.30</td>
<td class="gt_row gt_left gt_striped">Jamie Vardy - 15</td></tr>
    <tr><td class="gt_row gt_right">9</td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/331.png" style="height:35px;"></td>
<td class="gt_row gt_left" style="font-weight: bold;">Brighton</td>
<td class="gt_row gt_right">38</td>
<td class="gt_row gt_right" style="background-color: #FDA95E; color: #000000;">12</td>
<td class="gt_row gt_right" style="background-color: #9E0142; color: #FFFFFF;">15</td>
<td class="gt_row gt_right" style="background-color: #CFEB9D; color: #000000;">11</td>
<td class="gt_row gt_right" style="background-color: #F98F52; color: #000000;">42</td>
<td class="gt_row gt_right" style="background-color: #B1DFA3; color: #000000;">44</td>
<td class="gt_row gt_right" style="background-color: #FFECA0; color: #000000;">-2</td>
<td class="gt_row gt_right" style="background-color: #FEE38F; color: #000000;">51</td>
<td class="gt_row gt_right" style="background-color: #F67747; color: #000000;">44.4</td>
<td class="gt_row gt_right" style="background-color: #E3F499; color: #000000;">45.2</td>
<td class="gt_row gt_right" style="background-color: #FEDE89; color: #000000;">-0.9</td>
<td class="gt_row gt_right" style="background-color: #FEDF8A; color: #000000;">-0.02</td>
<td class="gt_row gt_left">Leandro Trossard Neal Maupay - 8</td></tr>
    <tr><td class="gt_row gt_right gt_striped">10</td>
<td class="gt_row gt_left gt_striped"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/380.png" style="height:35px;"></td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;">Wolves</td>
<td class="gt_row gt_right gt_striped">38</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFE594; color: #000000;">15</td>
<td class="gt_row gt_right gt_striped" style="background-color: #8BCFA5; color: #000000;">6</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEE08B; color: #000000;">17</td>
<td class="gt_row gt_right gt_striped" style="background-color: #F36C43; color: #000000;">38</td>
<td class="gt_row gt_right gt_striped" style="background-color: #A7DBA4; color: #000000;">43</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFE694; color: #000000;">-5</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEE38F; color: #000000;">51</td>
<td class="gt_row gt_right gt_striped" style="background-color: #B11E47; color: #FFFFFF;">34.9</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEC775; color: #000000;">57.1</td>
<td class="gt_row gt_right gt_striped" style="background-color: #EE6446; color: #000000;">-22.3</td>
<td class="gt_row gt_right gt_striped" style="background-color: #EF6546; color: #000000;">-0.60</td>
<td class="gt_row gt_left gt_striped">Raúl Jiménez - 6</td></tr>
    <tr><td class="gt_row gt_right">11</td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/361.png" style="height:35px;"></td>
<td class="gt_row gt_left" style="font-weight: bold;">Newcastle Utd</td>
<td class="gt_row gt_right">38</td>
<td class="gt_row gt_right" style="background-color: #FEBF6F; color: #000000;">13</td>
<td class="gt_row gt_right" style="background-color: #FFE594; color: #000000;">10</td>
<td class="gt_row gt_right" style="background-color: #FFF9B5; color: #000000;">15</td>
<td class="gt_row gt_right" style="background-color: #FB9F5A; color: #000000;">44</td>
<td class="gt_row gt_right" style="background-color: #FED682; color: #000000;">62</td>
<td class="gt_row gt_right" style="background-color: #FEB96A; color: #000000;">-18</td>
<td class="gt_row gt_right" style="background-color: #FED683; color: #000000;">49</td>
<td class="gt_row gt_right" style="background-color: #D6404F; color: #FFFFFF;">38.5</td>
<td class="gt_row gt_right" style="background-color: #FFE593; color: #000000;">54.0</td>
<td class="gt_row gt_right" style="background-color: #F98E51; color: #000000;">-15.5</td>
<td class="gt_row gt_right" style="background-color: #F98E51; color: #000000;">-0.42</td>
<td class="gt_row gt_left">Callum Wilson - 8</td></tr>
    <tr><td class="gt_row gt_right gt_striped">12</td>
<td class="gt_row gt_left gt_striped"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/384.png" style="height:35px;"></td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;">Crystal Palace</td>
<td class="gt_row gt_right gt_striped">38</td>
<td class="gt_row gt_right gt_striped" style="background-color: #F98F52; color: #000000;">11</td>
<td class="gt_row gt_right gt_striped" style="background-color: #9E0142; color: #FFFFFF;">15</td>
<td class="gt_row gt_right gt_striped" style="background-color: #E6F598; color: #000000;">12</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FECA78; color: #000000;">50</td>
<td class="gt_row gt_right gt_striped" style="background-color: #C6E89F; color: #000000;">46</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFFAB7; color: #000000;">4</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FECF7D; color: #000000;">48</td>
<td class="gt_row gt_right gt_striped" style="background-color: #F98A50; color: #000000;">45.9</td>
<td class="gt_row gt_right gt_striped" style="background-color: #A1D9A4; color: #000000;">40.1</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFF3AB; color: #000000;">5.7</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFF4AD; color: #000000;">0.16</td>
<td class="gt_row gt_left gt_striped">Wilfried Zaha - 14</td></tr>
    <tr><td class="gt_row gt_right">13</td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/337.png" style="height:35px;"></td>
<td class="gt_row gt_left" style="font-weight: bold;">Brentford</td>
<td class="gt_row gt_right">38</td>
<td class="gt_row gt_right" style="background-color: #FEBF6F; color: #000000;">13</td>
<td class="gt_row gt_right" style="background-color: #BFE5A0; color: #000000;">7</td>
<td class="gt_row gt_right" style="background-color: #FECC7A; color: #000000;">18</td>
<td class="gt_row gt_right" style="background-color: #FEBD6D; color: #000000;">48</td>
<td class="gt_row gt_right" style="background-color: #FFFAB6; color: #000000;">56</td>
<td class="gt_row gt_right" style="background-color: #FEDE89; color: #000000;">-8</td>
<td class="gt_row gt_right" style="background-color: #FEC171; color: #000000;">46</td>
<td class="gt_row gt_right" style="background-color: #FA9454; color: #000000;">46.7</td>
<td class="gt_row gt_right" style="background-color: #F2FAAB; color: #000000;">47.7</td>
<td class="gt_row gt_right" style="background-color: #FEDD89; color: #000000;">-1.0</td>
<td class="gt_row gt_right" style="background-color: #FEDD88; color: #000000;">-0.03</td>
<td class="gt_row gt_left">Ivan Toney - 12</td></tr>
    <tr><td class="gt_row gt_right gt_striped">14</td>
<td class="gt_row gt_left gt_striped"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/362.png" style="height:35px;"></td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;">Aston Villa</td>
<td class="gt_row gt_right gt_striped">38</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEBF6F; color: #000000;">13</td>
<td class="gt_row gt_right gt_striped" style="background-color: #8BCFA5; color: #000000;">6</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEB869; color: #000000;">19</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FED783; color: #000000;">52</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FBFDB8; color: #000000;">54</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFECA0; color: #000000;">-2</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEBA6B; color: #000000;">45</td>
<td class="gt_row gt_right gt_striped" style="background-color: #F46E43; color: #000000;">43.7</td>
<td class="gt_row gt_right gt_striped" style="background-color: #EAF79E; color: #000000;">46.2</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FED682; color: #000000;">-2.5</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FED682; color: #000000;">-0.07</td>
<td class="gt_row gt_left gt_striped">Ollie Watkins - 11</td></tr>
    <tr><td class="gt_row gt_right">15</td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/376.png" style="height:35px;"></td>
<td class="gt_row gt_left" style="font-weight: bold;">Southampton</td>
<td class="gt_row gt_right">38</td>
<td class="gt_row gt_right" style="background-color: #EA5E48; color: #000000;">9</td>
<td class="gt_row gt_right" style="background-color: #EA5E48; color: #000000;">13</td>
<td class="gt_row gt_right" style="background-color: #FFECA0; color: #000000;">16</td>
<td class="gt_row gt_right" style="background-color: #FA9756; color: #000000;">43</td>
<td class="gt_row gt_right" style="background-color: #FDAA5F; color: #000000;">67</td>
<td class="gt_row gt_right" style="background-color: #FB9F5A; color: #000000;">-24</td>
<td class="gt_row gt_right" style="background-color: #FA9153; color: #000000;">40</td>
<td class="gt_row gt_right" style="background-color: #F8864E; color: #000000;">45.6</td>
<td class="gt_row gt_right" style="background-color: #FECF7D; color: #000000;">56.3</td>
<td class="gt_row gt_right" style="background-color: #FDAC60; color: #000000;">-10.7</td>
<td class="gt_row gt_right" style="background-color: #FDAC60; color: #000000;">-0.29</td>
<td class="gt_row gt_left">James Ward-Prowse - 10</td></tr>
    <tr><td class="gt_row gt_right gt_striped">16</td>
<td class="gt_row gt_left gt_striped"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/368.png" style="height:35px;"></td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;">Everton</td>
<td class="gt_row gt_right gt_striped">38</td>
<td class="gt_row gt_right gt_striped" style="background-color: #F98F52; color: #000000;">11</td>
<td class="gt_row gt_right gt_striped" style="background-color: #8BCFA5; color: #000000;">6</td>
<td class="gt_row gt_right gt_striped" style="background-color: #F8884F; color: #000000;">21</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FA9756; color: #000000;">43</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FDB365; color: #000000;">66</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FCA45C; color: #000000;">-23</td>
<td class="gt_row gt_right gt_striped" style="background-color: #F8884F; color: #000000;">39</td>
<td class="gt_row gt_right gt_striped" style="background-color: #E85C48; color: #000000;">41.6</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FFF6B0; color: #000000;">51.4</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FDB164; color: #000000;">-9.8</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FDB265; color: #000000;">-0.26</td>
<td class="gt_row gt_left gt_striped">Richarlison - 10</td></tr>
    <tr><td class="gt_row gt_right">17</td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/357.png" style="height:35px;"></td>
<td class="gt_row gt_left" style="font-weight: bold;">Leeds United</td>
<td class="gt_row gt_right">38</td>
<td class="gt_row gt_right" style="background-color: #EA5E48; color: #000000;">9</td>
<td class="gt_row gt_right" style="background-color: #FEBF6F; color: #000000;">11</td>
<td class="gt_row gt_right" style="background-color: #FECC7A; color: #000000;">18</td>
<td class="gt_row gt_right" style="background-color: #F98F52; color: #000000;">42</td>
<td class="gt_row gt_right" style="background-color: #CD384D; color: #FFFFFF;">79</td>
<td class="gt_row gt_right" style="background-color: #EE6446; color: #000000;">-37</td>
<td class="gt_row gt_right" style="background-color: #F77F4A; color: #000000;">38</td>
<td class="gt_row gt_right" style="background-color: #F9894F; color: #000000;">45.8</td>
<td class="gt_row gt_right" style="background-color: #D13B4E; color: #FFFFFF;">69.0</td>
<td class="gt_row gt_right" style="background-color: #EB6047; color: #000000;">-23.2</td>
<td class="gt_row gt_right" style="background-color: #EB6047; color: #000000;">-0.63</td>
<td class="gt_row gt_left">Raphael Dias Belloli - 11</td></tr>
    <tr><td class="gt_row gt_right gt_striped">18</td>
<td class="gt_row gt_left gt_striped"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/379.png" style="height:35px;"></td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;">Burnley</td>
<td class="gt_row gt_right gt_striped">38</td>
<td class="gt_row gt_right gt_striped" style="background-color: #CC364D; color: #FFFFFF;">7</td>
<td class="gt_row gt_right gt_striped" style="background-color: #CC364D; color: #FFFFFF;">14</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEE08B; color: #000000;">17</td>
<td class="gt_row gt_right gt_striped" style="background-color: #E3544A; color: #FFFFFF;">34</td>
<td class="gt_row gt_right gt_striped" style="background-color: #F6FCB2; color: #000000;">53</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEB567; color: #000000;">-19</td>
<td class="gt_row gt_right gt_striped" style="background-color: #EF6645; color: #000000;">35</td>
<td class="gt_row gt_right gt_striped" style="background-color: #CC374D; color: #FFFFFF;">37.5</td>
<td class="gt_row gt_right gt_striped" style="background-color: #FEDE8A; color: #000000;">54.9</td>
<td class="gt_row gt_right gt_striped" style="background-color: #F7824C; color: #000000;">-17.4</td>
<td class="gt_row gt_right gt_striped" style="background-color: #F7824C; color: #000000;">-0.47</td>
<td class="gt_row gt_left gt_striped">Maxwel Cornet - 9</td></tr>
    <tr><td class="gt_row gt_right">19</td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/395.png" style="height:35px;"></td>
<td class="gt_row gt_left" style="font-weight: bold;">Watford</td>
<td class="gt_row gt_right">38</td>
<td class="gt_row gt_right" style="background-color: #B52148; color: #FFFFFF;">6</td>
<td class="gt_row gt_right" style="background-color: #5AAEAE; color: #000000;">5</td>
<td class="gt_row gt_right" style="background-color: #9E0142; color: #FFFFFF;">27</td>
<td class="gt_row gt_right" style="background-color: #E3544A; color: #FFFFFF;">34</td>
<td class="gt_row gt_right" style="background-color: #DB494D; color: #FFFFFF;">77</td>
<td class="gt_row gt_right" style="background-color: #E04F4C; color: #FFFFFF;">-43</td>
<td class="gt_row gt_right" style="background-color: #A60F44; color: #FFFFFF;">23</td>
<td class="gt_row gt_right" style="background-color: #D03A4E; color: #FFFFFF;">37.8</td>
<td class="gt_row gt_right" style="background-color: #F36B44; color: #000000;">64.2</td>
<td class="gt_row gt_right" style="background-color: #E1524B; color: #FFFFFF;">-26.4</td>
<td class="gt_row gt_right" style="background-color: #E2524B; color: #FFFFFF;">-0.71</td>
<td class="gt_row gt_left">Emmanuel Dennis - 10</td></tr>
    <tr><td class="gt_row gt_right gt_striped">20</td>
<td class="gt_row gt_left gt_striped"><img src="https://karatsidhu.com/posts/epl-2022-final-table/https:/a.espncdn.com/i/teamlogos/soccer/500/381.png" style="height:35px;"></td>
<td class="gt_row gt_left gt_striped" style="font-weight: bold;">Norwich City</td>
<td class="gt_row gt_right gt_striped">38</td>
<td class="gt_row gt_right gt_striped" style="background-color: #9E0142; color: #FFFFFF;">5</td>
<td class="gt_row gt_right gt_striped" style="background-color: #BFE5A0; color: #000000;">7</td>
<td class="gt_row gt_right gt_striped" style="background-color: #B42047; color: #FFFFFF;">26</td>
<td class="gt_row gt_right gt_striped" style="background-color: #9E0142; color: #FFFFFF;">23</td>
<td class="gt_row gt_right gt_striped" style="background-color: #9E0142; color: #FFFFFF;">84</td>
<td class="gt_row gt_right gt_striped" style="background-color: #9E0142; color: #FFFFFF;">-61</td>
<td class="gt_row gt_right gt_striped" style="background-color: #9E0142; color: #FFFFFF;">22</td>
<td class="gt_row gt_right gt_striped" style="background-color: #9E0142; color: #FFFFFF;">33.0</td>
<td class="gt_row gt_right gt_striped" style="background-color: #9E0142; color: #FFFFFF;">73.3</td>
<td class="gt_row gt_right gt_striped" style="background-color: #9E0142; color: #FFFFFF;">-40.3</td>
<td class="gt_row gt_right gt_striped" style="background-color: #9E0142; color: #FFFFFF;">-1.09</td>
<td class="gt_row gt_left gt_striped">Teemu Pukki - 11</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="16">Data : FBRef | Table : Github.com/SidhuK</td>
    </tr>
  </tfoot>
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="16"><sup class="gt_footnote_marks">1</sup> xG = Expected Goals (Higher is better)</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="16"><sup class="gt_footnote_marks">2</sup> xGA = Expect Goals Against (Lower is better) </td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="16"><sup class="gt_footnote_marks">3</sup> xGD = xG Difference (xG - xGA (High is better))</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="16"><sup class="gt_footnote_marks">4</sup> xGD.90 = xG Difference per 90 mins (Higher is better)</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="16"><sup class="gt_footnote_marks">5</sup> The team that I support :(</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {EPL 2022 {Final} {Table}},
  date = {2022-05-23},
  url = {https://karatsidhu.com/posts/epl-2022-final-table/epl-2022-final-table.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“EPL 2022 Final Table.”</span> May 23, 2022. <a href="https://karatsidhu.com/posts/epl-2022-final-table/epl-2022-final-table.html">https://karatsidhu.com/posts/epl-2022-final-table/epl-2022-final-table.html</a>.
</div></div></section></div> ]]></description>
  <category>Data-Viz</category>
  <category>misc</category>
  <category>TidyVerse</category>
  <guid>https://karatsidhu.com/posts/epl-2022-final-table/epl-2022-final-table.html</guid>
  <pubDate>Mon, 23 May 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/epl-2022-final-table/images/logo.png" medium="image" type="image/png" height="96" width="144"/>
</item>
<item>
  <title>TidyModels - PCA and UMAP</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/tidymodels-pca-and-umap/tidymodels-pca-and-umap.html</link>
  <description><![CDATA[ 




<section id="tidymodels---pca-umap" class="level1">
<h1>TidyModels - PCA &amp; UMAP</h1>
<section id="dimensionality-reduction-analysis-with-tidymodels" class="level2">
<h2 class="anchored" data-anchor-id="dimensionality-reduction-analysis-with-tidymodels">Dimensionality Reduction analysis with Tidymodels</h2>
<p><strong>Note: This is part 2 of the tidymodels practise. A few of these RMarkdown files were generated on a date different to the publishing date.</strong></p>
<p>Principal Component analysis (and UMAP to a lesser extent) have been extensively used in Biological Sciences and specifically in Omics. Compared to other components of the TidyVerse, I am fairly comfortable using and running the PCA test on a set of data. However, I typically use either the base R (<code>prcom</code>) or PCA Tools<sup>1</sup> because generating a series of plots using those packages is fairly straightforward<sup>2</sup>.</p>
</section>
</section>
<section id="cocktail-recipes-dataset" class="level1">
<h1>Cocktail Recipes Dataset</h1>
<p>The dataset used is from the Tidytuesday data, where different cocktails and the components used for their recipes is provided.<br>
Reducing dimensions in such a case would help in finding out which cocktail is closely related to the other in terms of their components.</p>
</section>
<section id="loading-packages" class="level1">
<h1>Loading packages</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ ggplot2 3.3.6     ✔ purrr   0.3.4
✔ tibble  3.1.7     ✔ dplyr   1.0.9
✔ tidyr   1.2.0     ✔ stringr 1.4.0
✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">library</span>(tidymodels)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 0.2.0 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ broom        0.8.0     ✔ rsample      0.1.1
✔ dials        0.1.1     ✔ tune         0.2.0
✔ infer        1.0.0     ✔ workflows    0.2.6
✔ modeldata    0.1.1     ✔ workflowsets 0.2.1
✔ parsnip      0.2.1     ✔ yardstick    0.0.9
✔ recipes      0.2.0     </code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ scales::discard() masks purrr::discard()
✖ dplyr::filter()   masks stats::filter()
✖ recipes::fixed()  masks stringr::fixed()
✖ dplyr::lag()      masks stats::lag()
✖ yardstick::spec() masks readr::spec()
✖ recipes::step()   masks stats::step()
• Learn how to get started at https://www.tidymodels.org/start/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;">library</span>(tidytext)</span></code></pre></div>
</div>
</section>
<section id="loading-data" class="level1">
<h1>Loading Data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">boston_cocktails <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb10-2">  readr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_csv</span>(<span class="st" style="color: #20794D;">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-26/boston_cocktails.csv"</span>)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Rows: 3643 Columns: 6
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (4): name, category, ingredient, measure
dbl (2): row_id, ingredient_number

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
</section>
<section id="data-cleaning-and-exploratory-data-analysis" class="level1">
<h1>Data Cleaning and Exploratory Data Analysis</h1>
<p>Preliminary look at the data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">boston_cocktails</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 3,643 × 6
   name            category           row_id ingredient_numb… ingredient measure
   &lt;chr&gt;           &lt;chr&gt;               &lt;dbl&gt;            &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;  
 1 Gauguin         Cocktail Classics       1                1 Light Rum  2 oz   
 2 Gauguin         Cocktail Classics       1                2 Passion F… 1 oz   
 3 Gauguin         Cocktail Classics       1                3 Lemon Jui… 1 oz   
 4 Gauguin         Cocktail Classics       1                4 Lime Juice 1 oz   
 5 Fort Lauderdale Cocktail Classics       2                1 Light Rum  1 1/2 …
 6 Fort Lauderdale Cocktail Classics       2                2 Sweet Ver… 1/2 oz 
 7 Fort Lauderdale Cocktail Classics       2                3 Juice of … 1/4 oz 
 8 Fort Lauderdale Cocktail Classics       2                4 Juice of … 1/4 oz 
 9 Apple Pie       Cordials and Liqu…      3                1 Apple sch… 3 oz   
10 Apple Pie       Cordials and Liqu…      3                2 Cinnamon … 1 oz   
# … with 3,633 more rows</code></pre>
</div>
</div>
<p>So the PCA should be carried out for the “name” field and looking at the relation between the cocktail and the incredients, category and the measured amount of each ingredient used.</p>
<section id="most-common-ingredients" class="level2">
<h2 class="anchored" data-anchor-id="most-common-ingredients">Most Common Ingredients</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">boston_cocktails <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb14-2">  <span class="fu" style="color: #4758AB;">count</span>(ingredient, <span class="at" style="color: #657422;">sort =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 569 × 2
   ingredient            n
   &lt;chr&gt;             &lt;int&gt;
 1 Gin                 176
 2 Fresh lemon juice   138
 3 Simple Syrup        115
 4 Vodka               114
 5 Light Rum           113
 6 Dry Vermouth        107
 7 Fresh Lime Juice    107
 8 Triple Sec          107
 9 Powdered Sugar       90
10 Grenadine            85
# … with 559 more rows</code></pre>
</div>
</div>
<p>A lot of cocktails look like are using Gin, Lemon Juice, Syrup and Vodka as some of the most common ingredients.</p>
</section>
<section id="column-cleaning-and-data-conversion" class="level2">
<h2 class="anchored" data-anchor-id="column-cleaning-and-data-conversion">Column Cleaning and data conversion</h2>
<p>The data isn’t very clean yet. Some ingredients, which are clearly the same are labelled slightly differently. So we need to clean and make the data usable for our analysis.</p>
<p>Some of the main changes needed in the <strong>ingredients</strong>:</p>
<ul>
<li><p>turn all ingredients to lowercase</p></li>
<li><p>“-” needs to be chagned to ” ”</p></li>
<li><p>“lemon” to “lemon Juice”</p></li>
<li><p>“lime” to “lime juice”</p></li>
<li><p>“grapefruit” to “grapefruit juice” (same for orange)</p></li>
</ul>
<p>Some of the main changes needed in the <strong>measure</strong>:</p>
<ul>
<li><p>1/2 to 0.5</p></li>
<li><p>3/4 to 0.75</p></li>
<li><p>1/4 to 0.25</p></li>
<li><p>remove words like “dash”, and “oz” etc.</p></li>
<li><p>Convert the entire column into a number</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">cocktails <span class="ot" style="color: #003B4F;">&lt;-</span> boston_cocktails <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb16-2">  <span class="fu" style="color: #4758AB;">mutate</span>(</span>
<span id="cb16-3">    <span class="at" style="color: #657422;">ingredient =</span> <span class="fu" style="color: #4758AB;">str_to_lower</span>(ingredient),</span>
<span id="cb16-4">    <span class="at" style="color: #657422;">ingredient =</span> <span class="fu" style="color: #4758AB;">str_replace_all</span>(ingredient, <span class="st" style="color: #20794D;">"-"</span>, <span class="st" style="color: #20794D;">" "</span>),</span>
<span id="cb16-5">    <span class="at" style="color: #657422;">ingredient =</span> <span class="fu" style="color: #4758AB;">str_remove</span>(ingredient, <span class="st" style="color: #20794D;">" liqueur$"</span>),</span>
<span id="cb16-6">    <span class="at" style="color: #657422;">ingredient =</span> <span class="fu" style="color: #4758AB;">str_remove</span>(ingredient, <span class="st" style="color: #20794D;">" (if desired)$"</span>),</span>
<span id="cb16-7">    <span class="at" style="color: #657422;">ingredient =</span> <span class="fu" style="color: #4758AB;">case_when</span>(</span>
<span id="cb16-8">      <span class="fu" style="color: #4758AB;">str_detect</span>(ingredient, <span class="st" style="color: #20794D;">"bitters"</span>) <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"bitters"</span>,</span>
<span id="cb16-9">      <span class="fu" style="color: #4758AB;">str_detect</span>(ingredient, <span class="st" style="color: #20794D;">"lemon"</span>) <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"lemon juice"</span>,</span>
<span id="cb16-10">      <span class="fu" style="color: #4758AB;">str_detect</span>(ingredient, <span class="st" style="color: #20794D;">"lime"</span>) <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"lime juice"</span>,</span>
<span id="cb16-11">      <span class="fu" style="color: #4758AB;">str_detect</span>(ingredient, <span class="st" style="color: #20794D;">"grapefruit"</span>) <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"grapefruit juice"</span>,</span>
<span id="cb16-12">      <span class="fu" style="color: #4758AB;">str_detect</span>(ingredient, <span class="st" style="color: #20794D;">"orange"</span>) <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"orange juice"</span>,</span>
<span id="cb16-13">      <span class="cn" style="color: #8f5902;">TRUE</span> <span class="sc" style="color: #5E5E5E;">~</span> ingredient</span>
<span id="cb16-14">    ),</span>
<span id="cb16-15">    <span class="at" style="color: #657422;">measure =</span> <span class="fu" style="color: #4758AB;">case_when</span>(</span>
<span id="cb16-16">      <span class="fu" style="color: #4758AB;">str_detect</span>(ingredient, <span class="st" style="color: #20794D;">"bitters"</span>) <span class="sc" style="color: #5E5E5E;">~</span> <span class="fu" style="color: #4758AB;">str_replace</span>(measure, <span class="st" style="color: #20794D;">"oz$"</span>, <span class="st" style="color: #20794D;">"dash"</span>),</span>
<span id="cb16-17">      <span class="cn" style="color: #8f5902;">TRUE</span> <span class="sc" style="color: #5E5E5E;">~</span> measure</span>
<span id="cb16-18">    ),</span>
<span id="cb16-19">    <span class="at" style="color: #657422;">measure =</span> <span class="fu" style="color: #4758AB;">str_replace</span>(measure, <span class="st" style="color: #20794D;">" ?1/2"</span>, <span class="st" style="color: #20794D;">".5"</span>),</span>
<span id="cb16-20">    <span class="at" style="color: #657422;">measure =</span> <span class="fu" style="color: #4758AB;">str_replace</span>(measure, <span class="st" style="color: #20794D;">" ?3/4"</span>, <span class="st" style="color: #20794D;">".75"</span>),</span>
<span id="cb16-21">    <span class="at" style="color: #657422;">measure =</span> <span class="fu" style="color: #4758AB;">str_replace</span>(measure, <span class="st" style="color: #20794D;">" ?1/4"</span>, <span class="st" style="color: #20794D;">".25"</span>),</span>
<span id="cb16-22">    <span class="at" style="color: #657422;">measure_number =</span> <span class="fu" style="color: #4758AB;">parse_number</span>(measure),</span>
<span id="cb16-23">    <span class="at" style="color: #657422;">measure_number =</span> <span class="fu" style="color: #4758AB;">if_else</span>(<span class="fu" style="color: #4758AB;">str_detect</span>(measure, <span class="st" style="color: #20794D;">"dash$"</span>), <span class="co" style="color: #5E5E5E;"># a few drops = so 0.02 oz</span></span>
<span id="cb16-24">      measure_number <span class="sc" style="color: #5E5E5E;">/</span> <span class="dv" style="color: #AD0000;">50</span>,</span>
<span id="cb16-25">      measure_number</span>
<span id="cb16-26">    )</span>
<span id="cb16-27">  ) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb16-28">  <span class="fu" style="color: #4758AB;">add_count</span>(ingredient) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb16-29">  <span class="fu" style="color: #4758AB;">filter</span>(n <span class="sc" style="color: #5E5E5E;">&gt;</span> <span class="dv" style="color: #AD0000;">15</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb16-30">  <span class="fu" style="color: #4758AB;">select</span>(<span class="sc" style="color: #5E5E5E;">-</span>n) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb16-31">  <span class="fu" style="color: #4758AB;">distinct</span>(row_id, ingredient, <span class="at" style="color: #657422;">.keep_all =</span> <span class="cn" style="color: #8f5902;">TRUE</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb16-32">  <span class="fu" style="color: #4758AB;">na.omit</span>()</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Warning: 20 parsing failures.
row col expected    actual
637  -- a number For glass
671  -- a number For glass
794  -- a number For glass
878  -- a number For glass
928  -- a number For glass
... ... ........ .........
See problems(...) for more details.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">cocktails</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 2,542 × 7
   name       category row_id ingredient_numb… ingredient measure measure_number
   &lt;chr&gt;      &lt;chr&gt;     &lt;dbl&gt;            &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;            &lt;dbl&gt;
 1 Gauguin    Cocktai…      1                1 light rum  2 oz              2   
 2 Gauguin    Cocktai…      1                3 lemon jui… 1 oz              1   
 3 Gauguin    Cocktai…      1                4 lime juice 1 oz              1   
 4 Fort Laud… Cocktai…      2                1 light rum  1.5 oz            1.5 
 5 Fort Laud… Cocktai…      2                2 sweet ver… .5 oz             0.5 
 6 Fort Laud… Cocktai…      2                3 orange ju… .25 oz            0.25
 7 Fort Laud… Cocktai…      2                4 lime juice .25 oz            0.25
 8 Cuban Coc… Cocktai…      4                1 lime juice .5 oz             0.5 
 9 Cuban Coc… Cocktai…      4                2 powdered … .5 oz             0.5 
10 Cuban Coc… Cocktai…      4                3 light rum  2 oz              2   
# … with 2,532 more rows</code></pre>
</div>
</div>
</section>
<section id="new-dataframe-with-a-wide-format" class="level2">
<h2 class="anchored" data-anchor-id="new-dataframe-with-a-wide-format">New Dataframe with a “wide” format</h2>
<p>We’re now close to beginning our analysis. However, the data is in long format and PCA prefers to get the data wider. So we’ll pivot_wide to make the analysis easier.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">cocktails_df <span class="ot" style="color: #003B4F;">&lt;-</span> cocktails <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb20-2">  <span class="fu" style="color: #4758AB;">select</span>(<span class="sc" style="color: #5E5E5E;">-</span>ingredient_number, <span class="sc" style="color: #5E5E5E;">-</span>row_id, <span class="sc" style="color: #5E5E5E;">-</span>measure) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb20-3">  <span class="fu" style="color: #4758AB;">pivot_wider</span>(<span class="at" style="color: #657422;">names_from =</span> ingredient, <span class="at" style="color: #657422;">values_from =</span> measure_number, <span class="at" style="color: #657422;">values_fill =</span> <span class="dv" style="color: #AD0000;">0</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb20-4">  janitor<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">clean_names</span>() <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb20-5">  <span class="fu" style="color: #4758AB;">na.omit</span>()</span>
<span id="cb20-6"></span>
<span id="cb20-7">cocktails_df</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 937 × 42
   name    category light_rum lemon_juice lime_juice sweet_vermouth orange_juice
   &lt;chr&gt;   &lt;chr&gt;        &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;        &lt;dbl&gt;
 1 Gauguin Cocktai…      2           1          1               0           0   
 2 Fort L… Cocktai…      1.5         0          0.25            0.5         0.25
 3 Cuban … Cocktai…      2           0          0.5             0           0   
 4 Cool C… Cocktai…      0           0          0               0           1   
 5 John C… Whiskies      0           1          0               0           0   
 6 Cherry… Cocktai…      1.25        0          0               0           0   
 7 Casa B… Cocktai…      2           0          1.5             0           0   
 8 Caribb… Cocktai…      0.5         0          0               0           0   
 9 Amber … Cordial…      0           0.25       0               0           0   
10 The Jo… Whiskies      0           0.5        0               0           0   
# … with 927 more rows, and 35 more variables: powdered_sugar &lt;dbl&gt;,
#   dark_rum &lt;dbl&gt;, cranberry_juice &lt;dbl&gt;, pineapple_juice &lt;dbl&gt;,
#   bourbon_whiskey &lt;dbl&gt;, simple_syrup &lt;dbl&gt;, cherry_flavored_brandy &lt;dbl&gt;,
#   light_cream &lt;dbl&gt;, triple_sec &lt;dbl&gt;, maraschino &lt;dbl&gt;, amaretto &lt;dbl&gt;,
#   grenadine &lt;dbl&gt;, apple_brandy &lt;dbl&gt;, brandy &lt;dbl&gt;, gin &lt;dbl&gt;,
#   anisette &lt;dbl&gt;, dry_vermouth &lt;dbl&gt;, apricot_flavored_brandy &lt;dbl&gt;,
#   bitters &lt;dbl&gt;, straight_rye_whiskey &lt;dbl&gt;, benedictine &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>This will be the starting dataset used to run PCA (and UMAP)</p>
</section>
</section>
<section id="principal-component-analysis" class="level1">
<h1>Principal Component Analysis</h1>
<p>Henceforth I will be using CMDLineTips Post<sup>3</sup> as a reference because I’ve never done a PCA with TidyModels before.</p>
<section id="prepare-the-analysis" class="level2">
<h2 class="anchored" data-anchor-id="prepare-the-analysis">Prepare the analysis</h2>
<section id="recipe-code" class="level3">
<h3 class="anchored" data-anchor-id="recipe-code">Recipe code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">pca_rec <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">recipe</span>(<span class="sc" style="color: #5E5E5E;">~</span>., <span class="at" style="color: #657422;">data =</span> cocktails_df) <span class="sc" style="color: #5E5E5E;">|&gt;</span>  <span class="co" style="color: #5E5E5E;"># what data to use</span></span>
<span id="cb22-2">  <span class="fu" style="color: #4758AB;">update_role</span>(name, category, <span class="at" style="color: #657422;">new_role =</span> <span class="st" style="color: #20794D;">"id"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span> <span class="co" style="color: #5E5E5E;"># name and category are identifiers not variables</span></span>
<span id="cb22-3">  <span class="fu" style="color: #4758AB;">step_normalize</span>(<span class="fu" style="color: #4758AB;">all_predictors</span>()) <span class="sc" style="color: #5E5E5E;">|&gt;</span> <span class="co" style="color: #5E5E5E;"># normalize all other columns</span></span>
<span id="cb22-4">  <span class="fu" style="color: #4758AB;">step_pca</span>(<span class="fu" style="color: #4758AB;">all_predictors</span>()) <span class="co" style="color: #5E5E5E;"># pca for all other columns</span></span></code></pre></div>
</div>
</section>
<section id="prep-code" class="level3">
<h3 class="anchored" data-anchor-id="prep-code">Prep Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1">pca_prep <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">prep</span>(pca_rec)</span>
<span id="cb23-2"></span>
<span id="cb23-3">pca_prep</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>Recipe

Inputs:

      role #variables
        id          2
 predictor         40

Training data contained 937 data points and no missing data.

Operations:

Centering and scaling for light_rum, lemon_juice, lime_juice, sweet_vermo... [trained]
PCA extraction with light_rum, lemon_juice, lime_juice, sweet_vermou... [trained]</code></pre>
</div>
</div>
<p>The prep object now doesn’t contain any output, and we need to tidy the object to read it. List object contains the PCA “results” and components on the 2nd place under “term_info” (open it in the console to see details).</p>
</section>
</section>
<section id="pca-table" class="level2">
<h2 class="anchored" data-anchor-id="pca-table">PCA Table</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">tidied_pca <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">tidy</span>(pca_prep, <span class="dv" style="color: #AD0000;">2</span>)</span>
<span id="cb25-2"></span>
<span id="cb25-3">tidied_pca</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 1,600 × 4
   terms             value component id       
   &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    
 1 light_rum        0.163  PC1       pca_yx0os
 2 lemon_juice     -0.0140 PC1       pca_yx0os
 3 lime_juice       0.224  PC1       pca_yx0os
 4 sweet_vermouth  -0.0661 PC1       pca_yx0os
 5 orange_juice     0.0308 PC1       pca_yx0os
 6 powdered_sugar  -0.476  PC1       pca_yx0os
 7 dark_rum         0.124  PC1       pca_yx0os
 8 cranberry_juice  0.0954 PC1       pca_yx0os
 9 pineapple_juice  0.119  PC1       pca_yx0os
10 bourbon_whiskey  0.0963 PC1       pca_yx0os
# … with 1,590 more rows</code></pre>
</div>
</div>
</section>
<section id="pca-plots" class="level2">
<h2 class="anchored" data-anchor-id="pca-plots">PCA Plots</h2>
<p>A lot of Principal components seen, plotting the first 4</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">tidied_pca <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb27-2">  <span class="fu" style="color: #4758AB;">filter</span>(</span>
<span id="cb27-3">    component <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"PC1"</span> <span class="sc" style="color: #5E5E5E;">|</span></span>
<span id="cb27-4">      component <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"PC2"</span> <span class="sc" style="color: #5E5E5E;">|</span></span>
<span id="cb27-5">      component <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"PC3"</span> <span class="sc" style="color: #5E5E5E;">|</span></span>
<span id="cb27-6">      component <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"PC4"</span></span>
<span id="cb27-7">   ) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb27-8">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">component =</span> <span class="fu" style="color: #4758AB;">fct_inorder</span>(component)) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb27-9">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(value, terms, <span class="at" style="color: #657422;">fill =</span> terms)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb27-10">  <span class="fu" style="color: #4758AB;">geom_col</span>(<span class="at" style="color: #657422;">show.legend =</span> <span class="cn" style="color: #8f5902;">FALSE</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb27-11">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;">~</span>component, <span class="at" style="color: #657422;">nrow =</span> <span class="dv" style="color: #AD0000;">1</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb27-12">  hrbrthemes<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">theme_ipsum</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb27-13">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">y =</span> <span class="cn" style="color: #8f5902;">NULL</span>) </span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-pca-and-umap/tidymodels-pca-and-umap_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Looking at the PC1, simple syrup and powdered sugar are very different from each other, therefore the cocktails must be using one or the other. They also appear to be the two biggest factors.</p>
<section id="pc1-and-pc2-main-contributors" class="level3">
<h3 class="anchored" data-anchor-id="pc1-and-pc2-main-contributors">PC1 and PC2 main contributors</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1">tidied_pca <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb28-2">  <span class="fu" style="color: #4758AB;">filter</span>(component <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">paste0</span>(<span class="st" style="color: #20794D;">"PC"</span>, <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">2</span>)) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb28-3">  <span class="fu" style="color: #4758AB;">group_by</span>(component) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb28-4">  <span class="fu" style="color: #4758AB;">top_n</span>(<span class="dv" style="color: #AD0000;">8</span>, <span class="fu" style="color: #4758AB;">abs</span>(value)) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb28-5">  <span class="fu" style="color: #4758AB;">ungroup</span>() <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb28-6">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">terms =</span> <span class="fu" style="color: #4758AB;">reorder_within</span>(terms, <span class="fu" style="color: #4758AB;">abs</span>(value), component)) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb28-7">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="fu" style="color: #4758AB;">abs</span>(value), terms, <span class="at" style="color: #657422;">fill =</span> value <span class="sc" style="color: #5E5E5E;">&gt;</span> <span class="dv" style="color: #AD0000;">0</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb28-8">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb28-9">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;">~</span>component, <span class="at" style="color: #657422;">scales =</span> <span class="st" style="color: #20794D;">"free_y"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb28-10">  <span class="fu" style="color: #4758AB;">scale_y_reordered</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb28-11">  <span class="fu" style="color: #4758AB;">labs</span>(</span>
<span id="cb28-12">    <span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">"Absolute value of contribution"</span>,</span>
<span id="cb28-13">    <span class="at" style="color: #657422;">y =</span> <span class="cn" style="color: #8f5902;">NULL</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"Positive?"</span></span>
<span id="cb28-14">  ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb28-15">  hrbrthemes<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">theme_ipsum</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-pca-and-umap/tidymodels-pca-and-umap_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="pca-plot" class="level3">
<h3 class="anchored" data-anchor-id="pca-plot">PCA Plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="fu" style="color: #4758AB;">juice</span>(pca_prep) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb29-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(PC1, PC2, <span class="at" style="color: #657422;">label =</span> name)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb29-3">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">color =</span> category), <span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.7</span>, <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">2</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb29-4">  ggrepel<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">geom_text_repel</span>(<span class="at" style="color: #657422;">max.overlaps =</span> <span class="dv" style="color: #AD0000;">10</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb29-5">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">color =</span> <span class="cn" style="color: #8f5902;">NULL</span>) <span class="sc" style="color: #5E5E5E;">+</span> hrbrthemes<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">theme_ipsum</span>()</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Warning: ggrepel: 927 unlabeled data points (too many overlaps). Consider
increasing max.overlaps</code></pre>
</div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-pca-and-umap/tidymodels-pca-and-umap_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Similar kind of cocktails are clustered together, so PCA analysis appears to be somewhat successful.</p>
</section>
</section>
</section>
<section id="uniform-manifold-automation-projection" class="level1">
<h1>Uniform Manifold Automation &amp; Projection</h1>
<section id="recipe-prep" class="level2">
<h2 class="anchored" data-anchor-id="recipe-prep">Recipe Prep</h2>
<p>The embed package provides recipe steps for ways to create embeddings including UMAP.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="fu" style="color: #4758AB;">library</span>(embed)</span>
<span id="cb31-2"></span>
<span id="cb31-3">umap_rec <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">recipe</span>(<span class="sc" style="color: #5E5E5E;">~</span>., <span class="at" style="color: #657422;">data =</span> cocktails_df) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb31-4">  <span class="fu" style="color: #4758AB;">update_role</span>(name, category, <span class="at" style="color: #657422;">new_role =</span> <span class="st" style="color: #20794D;">"id"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb31-5">  <span class="fu" style="color: #4758AB;">step_normalize</span>(<span class="fu" style="color: #4758AB;">all_predictors</span>()) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb31-6">  <span class="fu" style="color: #4758AB;">step_umap</span>(<span class="fu" style="color: #4758AB;">all_predictors</span>())</span>
<span id="cb31-7"></span>
<span id="cb31-8">umap_prep <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">prep</span>(umap_rec)</span>
<span id="cb31-9"></span>
<span id="cb31-10">umap_prep</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>Recipe

Inputs:

      role #variables
        id          2
 predictor         40

Training data contained 937 data points and no missing data.

Operations:

Centering and scaling for light_rum, lemon_juice, lime_juice, sweet_vermo... [trained]
UMAP embedding for light_rum, lemon_juice, lime_juice, sweet_verm... [trained]</code></pre>
</div>
</div>
<p>So far, the process is exactly the same as PCA. Prep the recipe and get the “non output”-output.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="fu" style="color: #4758AB;">juice</span>(umap_prep) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb33-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(UMAP1, UMAP2, <span class="at" style="color: #657422;">label =</span> name)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb33-3">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">color =</span> category), <span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.7</span>, <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">2</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb33-4">  ggrepel<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">geom_text_repel</span>(<span class="at" style="color: #657422;">max.overlaps =</span> <span class="dv" style="color: #AD0000;">30</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb33-5">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">color =</span> <span class="cn" style="color: #8f5902;">NULL</span>) <span class="sc" style="color: #5E5E5E;">+</span> hrbrthemes<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">theme_ipsum</span>()</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Warning: ggrepel: 932 unlabeled data points (too many overlaps). Consider
increasing max.overlaps</code></pre>
</div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-pca-and-umap/tidymodels-pca-and-umap_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Similarly clustering seen here, but type of cocktails seen here are different.</p>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>The PCA (and UMAP) using TidyModels offers a bit more customization compared to using a regular <code>prcomp</code> or <code>PCA-Tools</code>. However, it requires a bit more code and felt slightly slower in running compared to the other packages (without actually testing the time fyi)<sup>4</sup>.</p>
</section>
<section id="additional-reading" class="level1">
<h1>Additional Reading:</h1>
<ul>
<li><p>Easily the best explanation of PCA on the internet: https://stats.stackexchange.com/questions/2691/making-sense-of-principal-component-analysis-eigenvectors-eigenvalues</p></li>
<li><p>How PCA works - interactive plots: https://setosa.io/ev/</p></li>
<li><p>How UMAP works: https://umap-learn.readthedocs.io/en/latest/how_umap_works.html</p></li>
</ul>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://bioconductor.org/packages/release/bioc/html/PCAtools.html↩︎</p></li>
<li id="fn2"><p>https://github.com/SidhuK/R_for_Metabolomics/tree/main/Principal_Component_Analysis↩︎</p></li>
<li id="fn3"><p>https://cmdlinetips.com/2020/06/pca-with-tidymodels-in-r/↩︎</p></li>
<li id="fn4"><p>Plots were slower to render↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {TidyModels - {PCA} and {UMAP}},
  date = {2022-05-22},
  url = {https://karatsidhu.com/posts/tidymodels-pca-and-umap/tidymodels-pca-and-umap.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“TidyModels - PCA and UMAP.”</span> May 22,
2022. <a href="https://karatsidhu.com/posts/tidymodels-pca-and-umap/tidymodels-pca-and-umap.html">https://karatsidhu.com/posts/tidymodels-pca-and-umap/tidymodels-pca-and-umap.html</a>.
</div></div></section></div> ]]></description>
  <category>TidyModels</category>
  <category>PCA</category>
  <category>UMAP</category>
  <category>Machine Learning</category>
  <category>Dimension Reduction</category>
  <guid>https://karatsidhu.com/posts/tidymodels-pca-and-umap/tidymodels-pca-and-umap.html</guid>
  <pubDate>Sun, 22 May 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/tidymodels-pca-and-umap/images/logo.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>TidyModels - SVM & Random Forests</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/tidymodels-svm-random-forests/tidymodels-svm-random-forests.html</link>
  <description><![CDATA[ 




<section id="tidymodels-text-prediction-using-random-forests-and-svm" class="level1">
<h1>TidyModels Text Prediction using Random Forests and SVM</h1>
<p>The purpose of this post is for me to learn more about tidymodels package, as well as learning and deploying models for prediction. This is hopefully a first in the series of many posts where I try and learn more about various algorithms that are present in this package.</p>
</section>
<section id="chocolate-ratings" class="level1">
<h1>Chocolate Ratings</h1>
<p>The dataset used today will be from the TidyTuesday data<sup>1</sup>. Since I am almost a complete beginner I will be making use of Julie Silge’s great blogs<sup>2</sup> to learn more about how to use and run the models .</p>
<section id="goal" class="level2">
<h2 class="anchored" data-anchor-id="goal">Goal</h2>
<p>The goal of this first exercise is to learn more about text analysis and using various reviews from chocolates to predict the ratings for a particular chocolate bar.</p>
<p>This is a very vague and non specific way of predicting the outcome but a good starting point in learning how the algorithms work. ## Loading the packages</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ ggplot2 3.3.6     ✔ purrr   0.3.4
✔ tibble  3.1.7     ✔ dplyr   1.0.9
✔ tidyr   1.2.0     ✔ stringr 1.4.0
✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">library</span>(tidytext)</span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;">library</span>(tidymodels)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 0.2.0 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ broom        0.8.0     ✔ rsample      0.1.1
✔ dials        0.1.1     ✔ tune         0.2.0
✔ infer        1.0.0     ✔ workflows    0.2.6
✔ modeldata    0.1.1     ✔ workflowsets 0.2.1
✔ parsnip      0.2.1     ✔ yardstick    0.0.9
✔ recipes      0.2.0     </code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ scales::discard() masks purrr::discard()
✖ dplyr::filter()   masks stats::filter()
✖ recipes::fixed()  masks stringr::fixed()
✖ dplyr::lag()      masks stats::lag()
✖ yardstick::spec() masks readr::spec()
✖ recipes::step()   masks stats::step()
• Search for functions across packages at https://www.tidymodels.org/find/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;">library</span>(textrecipes)</span></code></pre></div>
</div>
</section>
<section id="loading-the-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-data">Loading the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">chocolate <span class="ot" style="color: #003B4F;">&lt;-</span> readr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_csv</span>(<span class="st" style="color: #20794D;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-01-18/chocolate.csv'</span>)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Rows: 2530 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (7): company_manufacturer, company_location, country_of_bean_origin, spe...
dbl (3): ref, review_date, rating

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
</section>
</section>
<section id="exploratory-data-analysis" class="level1">
<h1>Exploratory Data Analysis</h1>
<section id="lets-see-how-the-ratings-are-distributed" class="level2">
<h2 class="anchored" data-anchor-id="lets-see-how-the-ratings-are-distributed">Lets see how the ratings are distributed</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">chocolate <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(rating)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">bins =</span> <span class="dv" style="color: #AD0000;">12</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb12-5">  hrbrthemes<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">theme_ipsum</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-svm-random-forests/tidymodels-svm-random-forests_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>From the chart above, it looks like that most chocolates are rated somewhere in the range of 2.5 and 3.75 with a few high-rated and low-rated exceptions.</p>
<p>So we’ll be comparing the ratings and the descriptive words used to describe the corresponding ratings.</p>
</section>
<section id="tidytext-words-analysis" class="level2">
<h2 class="anchored" data-anchor-id="tidytext-words-analysis">TidyText words analysis</h2>
<p>Lets use the tidytext() library to check what are some of the most common words used to describe the flavor of each chocolate in the data-set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;"># split the characteristics column into words using tidytext, and make a new column called word instead of the original.</span></span>
<span id="cb13-2"></span>
<span id="cb13-3">tidy_chocolate <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb13-4">  chocolate <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb13-5">  <span class="fu" style="color: #4758AB;">unnest_tokens</span>(word, most_memorable_characteristics)</span>
<span id="cb13-6"></span>
<span id="cb13-7">tidy_chocolate <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb13-8">  <span class="fu" style="color: #4758AB;">group_by</span>(word) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb13-9">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">total =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">|&gt;</span> <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(total))</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 547 × 2
   word    total
   &lt;chr&gt;   &lt;int&gt;
 1 cocoa     419
 2 sweet     318
 3 nutty     278
 4 fruit     273
 5 roasty    228
 6 mild      226
 7 sour      208
 8 earthy    199
 9 creamy    189
10 intense   178
# … with 537 more rows</code></pre>
</div>
</div>
<p>It looks like the usual expected words like cocoa, sweet, nutty etc are the most prevalent.</p>
<p>Since we know what the most common words are, its time to look at how an average chocolate described by these words is rated.</p>
<section id="rating-vs-word-relationship" class="level3">
<h3 class="anchored" data-anchor-id="rating-vs-word-relationship">Rating vs Word relationship</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">tidy_chocolate <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb15-2">  <span class="fu" style="color: #4758AB;">group_by</span>(word) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb15-3">  <span class="fu" style="color: #4758AB;">summarise</span>(</span>
<span id="cb15-4">    <span class="at" style="color: #657422;">n =</span> <span class="fu" style="color: #4758AB;">n</span>(),</span>
<span id="cb15-5">    <span class="at" style="color: #657422;">rating =</span> <span class="fu" style="color: #4758AB;">mean</span>(rating) </span>
<span id="cb15-6">  ) <span class="sc" style="color: #5E5E5E;">|&gt;</span> </span>
<span id="cb15-7">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(n, rating)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-8">  <span class="fu" style="color: #4758AB;">geom_jitter</span>(<span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"maroon"</span>, <span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.7</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-9">   <span class="fu" style="color: #4758AB;">geom_hline</span>(</span>
<span id="cb15-10">    <span class="at" style="color: #657422;">yintercept =</span> <span class="fu" style="color: #4758AB;">mean</span>(chocolate<span class="sc" style="color: #5E5E5E;">$</span>rating), <span class="at" style="color: #657422;">lty =</span> <span class="dv" style="color: #AD0000;">2</span>,</span>
<span id="cb15-11">    <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"gray50"</span>, <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">1.5</span></span>
<span id="cb15-12">  ) <span class="sc" style="color: #5E5E5E;">+</span> ggrepel<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">geom_text_repel</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">label =</span> word), <span class="at" style="color: #657422;">max.overlaps =</span> <span class="dv" style="color: #AD0000;">15</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-13">  <span class="fu" style="color: #4758AB;">scale_x_log10</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-14">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-15">  hrbrthemes<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">theme_ipsum</span>()</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Warning: ggrepel: 495 unlabeled data points (too many overlaps). Consider
increasing max.overlaps</code></pre>
</div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-svm-random-forests/tidymodels-svm-random-forests_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Words like chemical, burnt, medicinal, pastey, bitter etc look to be associated with generally low rated chocolate, while cocoa, complex, creamy, balanced etc are higher rated chocolates.<sup>3</sup></p>
<p>We now have a bit of an idea of what the general feeling of the data rating, and we can go on to buiding the models.</p>
</section>
</section>
</section>
<section id="model-building" class="level1">
<h1>Model Building</h1>
<section id="building-models-with-tidymodels" class="level2">
<h2 class="anchored" data-anchor-id="building-models-with-tidymodels">Building Models with Tidymodels</h2>
<p>Let’s start our modeling by setting up our “data budget.” We’ll stratify by our outcome “rating” which is what we want to measure using the tokens.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="fu" style="color: #4758AB;">library</span>(tidymodels)</span></code></pre></div>
</div>
<p>Time to split the data into training and testing data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="fu" style="color: #4758AB;">set.seed</span>(<span class="dv" style="color: #AD0000;">123</span>)</span>
<span id="cb18-2">choco_split <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">initial_split</span>(chocolate, <span class="at" style="color: #657422;">strata =</span> rating)</span>
<span id="cb18-3">choco_train <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">training</span>(choco_split)</span>
<span id="cb18-4">choco_test <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">testing</span>(choco_split)</span></code></pre></div>
</div>
<ul>
<li>create resampling folds from the <em>training</em> set</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="fu" style="color: #4758AB;">set.seed</span>(<span class="dv" style="color: #AD0000;">234</span>)</span>
<span id="cb19-2">choco_folds <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">vfold_cv</span>(choco_train, <span class="at" style="color: #657422;">strata =</span> rating)</span>
<span id="cb19-3">choco_folds</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>#  10-fold cross-validation using stratification 
# A tibble: 10 × 2
   splits             id    
   &lt;list&gt;             &lt;chr&gt; 
 1 &lt;split [1705/191]&gt; Fold01
 2 &lt;split [1705/191]&gt; Fold02
 3 &lt;split [1705/191]&gt; Fold03
 4 &lt;split [1706/190]&gt; Fold04
 5 &lt;split [1706/190]&gt; Fold05
 6 &lt;split [1706/190]&gt; Fold06
 7 &lt;split [1707/189]&gt; Fold07
 8 &lt;split [1707/189]&gt; Fold08
 9 &lt;split [1708/188]&gt; Fold09
10 &lt;split [1709/187]&gt; Fold10</code></pre>
</div>
</div>
<p>We’re done with splitting the data into test and train, and we’re using the training data to train the model. So the first step will involve setting up feature engineering. The data right now is complex and we need to transform it into features that are useful for our model tokenization and computing.</p>
</section>
<section id="tokenization" class="level2">
<h2 class="anchored" data-anchor-id="tokenization">Tokenization</h2>
<p>(if that’s a word?)</p>
<p>We’ll use <code>textrecipes</code> package to tokenize “most_memorable_characteristics” wrt “ratings” and look at the 100 most common words used (here they are called tokens).All of this is done on the</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="fu" style="color: #4758AB;">library</span>(textrecipes)</span>
<span id="cb21-2"></span>
<span id="cb21-3">choco_rec <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb21-4">  <span class="fu" style="color: #4758AB;">recipe</span>(rating <span class="sc" style="color: #5E5E5E;">~</span> most_memorable_characteristics, <span class="at" style="color: #657422;">data =</span> choco_train) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb21-5">  <span class="fu" style="color: #4758AB;">step_tokenize</span>(most_memorable_characteristics) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb21-6">  <span class="fu" style="color: #4758AB;">step_tokenfilter</span>(most_memorable_characteristics, <span class="at" style="color: #657422;">max_tokens =</span> <span class="dv" style="color: #AD0000;">100</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># 100 most common words</span></span>
<span id="cb21-7">  <span class="fu" style="color: #4758AB;">step_tfidf</span>(most_memorable_characteristics) <span class="co" style="color: #5E5E5E;"># step frequeence df</span></span>
<span id="cb21-8"></span>
<span id="cb21-9"></span>
<span id="cb21-10"><span class="co" style="color: #5E5E5E;"># looking at the tokenized data</span></span>
<span id="cb21-11"><span class="fu" style="color: #4758AB;">prep</span>(choco_rec) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">bake</span>(<span class="at" style="color: #657422;">new_data =</span> <span class="cn" style="color: #8f5902;">NULL</span>)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 1,896 × 101
   rating tfidf_most_memorab… tfidf_most_memo… tfidf_most_memo… tfidf_most_memo…
    &lt;dbl&gt;               &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
 1   3                   0                   0                0                0
 2   2.75                0                   0                0                0
 3   3                   0                   0                0                0
 4   3                   0                   0                0                0
 5   2.75                0                   0                0                0
 6   3                   1.38                0                0                0
 7   2.75                0                   0                0                0
 8   2.5                 0                   0                0                0
 9   2.75                0                   0                0                0
10   3                   0                   0                0                0
# … with 1,886 more rows, and 96 more variables:
#   tfidf_most_memorable_characteristics_base &lt;dbl&gt;,
#   tfidf_most_memorable_characteristics_basic &lt;dbl&gt;,
#   tfidf_most_memorable_characteristics_berry &lt;dbl&gt;,
#   tfidf_most_memorable_characteristics_bitter &lt;dbl&gt;,
#   tfidf_most_memorable_characteristics_black &lt;dbl&gt;,
#   tfidf_most_memorable_characteristics_bland &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>The result is basically a new dataframe from the “choco_train” data with all the ratings, and the frequency of corresponding 100 most common words.</p>
</section>
<section id="model-specification" class="level2">
<h2 class="anchored" data-anchor-id="model-specification">Model Specification</h2>
<p>The models being used to evaluate the data are random forest, and support vector machine (SVM).</p>
<p>Random Forest Model is usually not great for text based or language data<sup>4</sup> and SVM normally a good model to use for such data, so we’ll be trying both.</p>
<section id="random-forest-model" class="level3">
<h3 class="anchored" data-anchor-id="random-forest-model">Random Forest Model</h3>
<section id="specifying-the-rf-model" class="level4">
<h4 class="anchored" data-anchor-id="specifying-the-rf-model">Specifying the RF model</h4>
<p>Computational engine: ranger (default)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="do" style="color: #5E5E5E;
font-style: italic;">### Computational engine: ranger</span></span>
<span id="cb23-2"></span>
<span id="cb23-3">rf_spec <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb23-4">  <span class="fu" style="color: #4758AB;">rand_forest</span>(<span class="at" style="color: #657422;">trees =</span> <span class="dv" style="color: #AD0000;">500</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb23-5">  <span class="fu" style="color: #4758AB;">set_mode</span>(<span class="st" style="color: #20794D;">"regression"</span>)</span>
<span id="cb23-6"></span>
<span id="cb23-7">rf_spec</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>Random Forest Model Specification (regression)

Main Arguments:
  trees = 500

Computational engine: ranger </code></pre>
</div>
</div>
</section>
</section>
<section id="svm-model" class="level3">
<h3 class="anchored" data-anchor-id="svm-model">SVM Model</h3>
<section id="model-specification-1" class="level4">
<h4 class="anchored" data-anchor-id="model-specification-1">Model Specification</h4>
<p>Computational engine: LiblineaR (default)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">svm_spec <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb25-2">  <span class="fu" style="color: #4758AB;">svm_linear</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb25-3">  <span class="fu" style="color: #4758AB;">set_mode</span>(<span class="st" style="color: #20794D;">"regression"</span>)</span>
<span id="cb25-4"></span>
<span id="cb25-5">svm_spec</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code>Linear Support Vector Machine Specification (regression)

Computational engine: LiblineaR </code></pre>
</div>
</div>
<p>The models have been specified and now we can run each of them in our workflow().</p>
<p>Note: The SVM requires the predictors to all be on the same scale<sup>5</sup>, but all our predictors are now tf-idf values so we should be pretty much fine.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">svm_wf <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">workflow</span>(choco_rec, svm_spec)</span>
<span id="cb27-2">rf_wf <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">workflow</span>(choco_rec, rf_spec)</span></code></pre></div>
</div>
<p>We are done with making the models and now can evaluate both of them.</p>
</section>
</section>
</section>
</section>
<section id="model-evaluation" class="level1">
<h1>Model Evaluation</h1>
<p>These workflows have no tuning parameters so we can evaluate them as they are. (Random forest models can be tuned but they tend to work fine with the defaults as long as you have enough trees.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1">doParallel<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">registerDoParallel</span>() <span class="co" style="color: #5E5E5E;"># run them in parallel</span></span>
<span id="cb28-2"></span>
<span id="cb28-3">contrl_preds <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">control_resamples</span>(<span class="at" style="color: #657422;">save_pred =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb28-4"></span>
<span id="cb28-5">svm_rs <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fit_resamples</span>(</span>
<span id="cb28-6">  svm_wf,</span>
<span id="cb28-7">  <span class="at" style="color: #657422;">resamples =</span> choco_folds,</span>
<span id="cb28-8">  <span class="at" style="color: #657422;">control =</span> contrl_preds</span>
<span id="cb28-9">)</span>
<span id="cb28-10"></span>
<span id="cb28-11">ranger_rs <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">fit_resamples</span>(</span>
<span id="cb28-12">  rf_wf,</span>
<span id="cb28-13">  <span class="at" style="color: #657422;">resamples =</span> choco_folds,</span>
<span id="cb28-14">  <span class="at" style="color: #657422;">control =</span> contrl_preds</span>
<span id="cb28-15">)</span></code></pre></div>
</div>
<section id="how-did-these-two-models-compare" class="level2">
<h2 class="anchored" data-anchor-id="how-did-these-two-models-compare">How did these two models compare?</h2>
<section id="svm" class="level3">
<h3 class="anchored" data-anchor-id="svm">SVM</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="fu" style="color: #4758AB;">collect_metrics</span>(svm_rs)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 2 × 6
  .metric .estimator  mean     n std_err .config             
  &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 rmse    standard   0.347    10 0.00656 Preprocessor1_Model1
2 rsq     standard   0.367    10 0.0181  Preprocessor1_Model1</code></pre>
</div>
</div>
</section>
<section id="random-forest" class="level3">
<h3 class="anchored" data-anchor-id="random-forest">Random Forest</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="fu" style="color: #4758AB;">collect_metrics</span>(ranger_rs)</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 2 × 6
  .metric .estimator  mean     n std_err .config             
  &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 rmse    standard   0.350    10 0.00688 Preprocessor1_Model1
2 rsq     standard   0.359    10 0.0164  Preprocessor1_Model1</code></pre>
</div>
</div>
<p>We can visualize these results by comparing the predicted rating with the true rating:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="fu" style="color: #4758AB;">bind_rows</span>(</span>
<span id="cb33-2">  <span class="fu" style="color: #4758AB;">collect_predictions</span>(svm_rs) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb33-3">    <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">mod =</span> <span class="st" style="color: #20794D;">"SVM"</span>),</span>
<span id="cb33-4">  <span class="fu" style="color: #4758AB;">collect_predictions</span>(ranger_rs) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb33-5">    <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">mod =</span> <span class="st" style="color: #20794D;">"ranger"</span>)</span>
<span id="cb33-6">) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb33-7">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(rating, .pred, <span class="at" style="color: #657422;">color =</span> id)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb33-8">  <span class="fu" style="color: #4758AB;">geom_abline</span>(<span class="at" style="color: #657422;">lty =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"gray50"</span>, <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">1.2</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb33-9">  <span class="fu" style="color: #4758AB;">geom_jitter</span>(<span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.4</span>, <span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.4</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb33-10">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(<span class="fu" style="color: #4758AB;">vars</span>(mod)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb33-11">  <span class="fu" style="color: #4758AB;">coord_fixed</span>() <span class="sc" style="color: #5E5E5E;">+</span> hrbrthemes<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">theme_ipsum</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-svm-random-forests/tidymodels-svm-random-forests_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="choosing-a-model" class="level2">
<h2 class="anchored" data-anchor-id="choosing-a-model">Choosing a model</h2>
<p>Neither of these prediction models look great, judging by their rsq values and the general prediction. However, we can probably use the SVM model for further analysis since it doesn’t take as long as the RF model. The function last_fit() fits one final time on the training data and evaluates on the testing data.</p>
<p><strong>This is the first time we have used the testing data.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1">final_fitted <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">last_fit</span>(svm_wf, choco_split)</span>
<span id="cb34-2"><span class="fu" style="color: #4758AB;">collect_metrics</span>(final_fitted) <span class="do" style="color: #5E5E5E;
font-style: italic;">## metrics evaluated on the *testing* data</span></span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 2 × 4
  .metric .estimator .estimate .config             
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 rmse    standard       0.381 Preprocessor1_Model1
2 rsq     standard       0.348 Preprocessor1_Model1</code></pre>
</div>
</div>
<p>Again the results don’t look particularly great, but its just a practise run.</p>
<p>Now the “final_fitted” object can be used to predict the ratings for everything in the testing data.</p>
<p>This is done by using the workflow to predict the choco_test data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1">final_wf <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">extract_workflow</span>(final_fitted)</span>
<span id="cb36-2"><span class="fu" style="color: #4758AB;">predict</span>(final_wf, choco_test[<span class="dv" style="color: #AD0000;">55</span>, ])</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 1 × 1
  .pred
  &lt;dbl&gt;
1  3.51</code></pre>
</div>
</div>
<p>Note: You can save this fitted final_wf object to use later with new data, for example with readr::write_rds().</p>
</section>
<section id="rating-bais-visualization" class="level2">
<h2 class="anchored" data-anchor-id="rating-bais-visualization">Rating Bais Visualization</h2>
<p>We can now directly visualize the baises for each of the ‘token’ or term and how they affect the rating of a particular chocolate. This is done from the final_fitted object</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><span class="fu" style="color: #4758AB;">extract_workflow</span>(final_fitted) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb38-2">  <span class="fu" style="color: #4758AB;">tidy</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># make a table</span></span>
<span id="cb38-3">  <span class="fu" style="color: #4758AB;">filter</span>(term <span class="sc" style="color: #5E5E5E;">!=</span> <span class="st" style="color: #20794D;">"Bias"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># remove biases</span></span>
<span id="cb38-4">  <span class="fu" style="color: #4758AB;">group_by</span>(estimate <span class="sc" style="color: #5E5E5E;">&gt;</span> <span class="dv" style="color: #AD0000;">0</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb38-5">  <span class="fu" style="color: #4758AB;">slice_max</span>(<span class="fu" style="color: #4758AB;">abs</span>(estimate), <span class="at" style="color: #657422;">n =</span> <span class="dv" style="color: #AD0000;">10</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb38-6">  <span class="fu" style="color: #4758AB;">ungroup</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb38-7">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">term =</span> <span class="fu" style="color: #4758AB;">str_remove</span>(term, <span class="st" style="color: #20794D;">"tfidf_most_memorable_characteristics_"</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb38-8">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(estimate, <span class="fu" style="color: #4758AB;">fct_reorder</span>(term, estimate), <span class="at" style="color: #657422;">fill =</span> estimate <span class="sc" style="color: #5E5E5E;">&gt;</span> <span class="dv" style="color: #AD0000;">0</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb38-9">  <span class="fu" style="color: #4758AB;">geom_col</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.8</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb38-10">  <span class="fu" style="color: #4758AB;">scale_fill_discrete</span>(<span class="at" style="color: #657422;">labels =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"low ratings"</span>, <span class="st" style="color: #20794D;">"high ratings"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb38-11">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">y =</span> <span class="cn" style="color: #8f5902;">NULL</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"More from..."</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb38-12">  hrbrthemes<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">theme_ipsum</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/tidymodels-svm-random-forests/tidymodels-svm-random-forests_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We see what we noticed during our EDA, i.e.&nbsp;the words like off, bitter, chemical heavily turn the rating negative/low while words like creamy, cocoa, complex etc. tend to be associated with higher rated chocolates.</p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2022/2022-01-18/readme.md" class="uri">https://github.com/rfordatascience/tidytuesday/blob/master/data/2022/2022-01-18/readme.md</a>↩︎</p></li>
<li id="fn2"><p><a href="https://juliasilge.com/blog/" class="uri">https://juliasilge.com/blog/</a>↩︎</p></li>
<li id="fn3"><p>General trend observed, and in no ways indicative of the true rating of each chocolate.↩︎</p></li>
<li id="fn4"><p>Random forest in remote sensing: A review of applications and future directions by Mariana Belgiu↩︎</p></li>
<li id="fn5"><p><a href="https://www.tmwr.org/pre-proc-table.html" class="uri">https://www.tmwr.org/pre-proc-table.html</a>↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {TidyModels - {SVM} \&amp; {Random} {Forests}},
  date = {2022-05-22},
  url = {https://karatsidhu.com/posts/tidymodels-svm-random-forests/tidymodels-svm-random-forests.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“TidyModels - SVM &amp; Random Forests.”</span>
May 22, 2022. <a href="https://karatsidhu.com/posts/tidymodels-svm-random-forests/tidymodels-svm-random-forests.html">https://karatsidhu.com/posts/tidymodels-svm-random-forests/tidymodels-svm-random-forests.html</a>.
</div></div></section></div> ]]></description>
  <category>TidyModels</category>
  <category>Random Forest</category>
  <category>SVM</category>
  <category>Machine Learning</category>
  <category>Text-analysis</category>
  <guid>https://karatsidhu.com/posts/tidymodels-svm-random-forests/tidymodels-svm-random-forests.html</guid>
  <pubDate>Sun, 22 May 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/tidymodels-svm-random-forests/images/logo.png" medium="image" type="image/png" height="194" width="144"/>
</item>
<item>
  <title>VSCode vs RStudio — Worth the Switch?</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/vscode-vs-rstudio-worth-the-switch.html</link>
  <description><![CDATA[ 




<p><img src="https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/images/RStudio1.jpg" class="img-fluid"></p>
<section id="rstudio-vs-vscode---should-you-switch" class="level1">
<h1>RStudio vs VSCode - Should you switch?</h1>
<p>RStudio is the preferred IDE/Editor for running R code for most people, but VSCode has rapidly become one of the most popular code editors for a huge number of other languages. This writeup is for people who are very familiar with RStudio and want to see how the two compare. So, I will not be talking a lot about RStudio because for that reason, but going into the strengths and weaknesses of VSCode compared to RStudio.</p>
<p>Further, I this is a very brief overview comparing the community (free) versions of both editors, I cannot speak to the R-Studio paid editions.</p>
<p>I am a low-intermediate level programmer who doesn’t use R as much as some people do but whenever I do, RStudio is my preferred editor of choice. For everything else (Python, Jupyter, HTML, CSS, JS,etc ), I tend to use VSCode. I tried VSCode for R because I wanted to see if I could use a single code editor for everything I do.</p>
<p>RStudio is an outstanding piece of software and has never given me any major problems during my workflows, this was just an experiement to find a one-size-fits all code editor/IDE.</p>
<section id="if-you-are-only-interested-in-my-conclusion-or-the-tldr" class="level3">
<h3 class="anchored" data-anchor-id="if-you-are-only-interested-in-my-conclusion-or-the-tldr">If you are only interested in my conclusion or the TLDR; :</h3>
<p>No, I will not be switching to VSCode for R - FOR NOW. But I love how great R looks and works on it already.</p>
<p>Now that we’re done with that, lets get into some of the details:</p>
</section>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p>Assuming you already have R installed on your system, Installing VSCode and R is very straightforward;</p>
<ul>
<li>download the .pkg or .exe file and install the code editor;</li>
<li>install the <code>languageserver</code> package for R (install.packages(“languageserver”)</li>
<li>install the R extension from the markeplace (https://marketplace.visualstudio.com/items?itemName=REditorSupport)</li>
</ul>
<p>and you’re ready to start coding.</p>
<p>Optional: You can install a better terminal alternative like radian, a debugger and a better plotviewer like httpgd because the builtin plotviewer for VSCode isn’t a particualrly good one.</p>
</section>
<section id="setting-up-the-editor" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-the-editor">Setting up the editor</h2>
<p>You can now start working with code but there are potentially times you could run into errors while running your code.</p>
<p>To eliminate any potential errors/code not work, you must make sure the R path is specified in the VSCode preferences (cmd+shift+p on mac) and search for R path. Finding the path is simple, open R and type: R.home(“bin”) and copy the output path.</p>
<p>Another somewhat major tweak you would want to do to the editor:</p>
<p>Some simple shortcuts like the pipe operator doesn’t work out of the box, so adding a shortcut for “%&gt;%” or “|&gt;” depending on your preference can be done using the following method:</p>
<p>https://stackoverflow.com/questions/58731362/how-do-i-had-an-alias-for-magrittr-pipe-from-r-in-vscode How do I had an alias for magrittr pipe from R in vscode - Stack Overflow</p>
</section>
<section id="working-with-r-code" class="level2">
<h2 class="anchored" data-anchor-id="working-with-r-code">Working with R code</h2>
<p>Here is a comparison of my two setups side by side with the same file and environment:</p>
<p><img src="https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/https:/miro.medium.com/max/1400/1*Rm1L1KMcOuLtDWjcv6pgHA.png" class="img-fluid"></p>
<p><img src="https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/https:/miro.medium.com/max/1400/1*drTBb3k47nPaZfIPvAKdNw.png" class="img-fluid"></p>
<p>working with R is very similar to a regular RStudio IDE,</p>
<p>R-extension provides the same support for</p>
<ul>
<li>installing packages,</li>
<li>plots and plot viewer</li>
<li>grobal enviroment
<ul>
<li>datasets</li>
<li>plots</li>
<li>lists, variables, etc.</li>
</ul></li>
<li>checking loaded packages etc.</li>
</ul>
<p>Terminal and console position can be modified to make get the input and output panes next to each other, something you cannot do well in R-Studio. So VSCode feels very familiar and running code is highly intuitive.</p>
</section>
<section id="running-code" class="level2">
<h2 class="anchored" data-anchor-id="running-code">Running Code</h2>
<p>Running a piece of code is again, very similar to RStudio. A run file button is located at the top of the panel and individual lines of code can be run using the cmd+return shortcut on mac. The shortcut can be easily modified similar to how the pipe operator shortcut is modified above.</p>
<p>In terms of running and getting results for plain R code and .R files; VSCode is a great alternative for a lot of people including me. So if you’re like me and you use R mainly for statistical analysis, data visualization and data analysis; give VSCode a try.</p>
<p>Working with Notebooks and Rmd:</p>
<p>This is where VSCode falls so much behind RStudio it becomes a one horse race. The notebook support in VSCode is in a single word - terrible. Running code chunks in a .Rmd notebook feels and looks dated. My existing notebooks created in RStudio were buggy in VSCode despite not showing any errors in RStudio. Creating new notebooks is unintuitive and still a long way behind RStudio in terms of the overall feel to it.</p>
<p>I have searched for solutions, including globally installing pandoc, knitr and rmarkdown etc and trying multiple versions of R and the packages mentioned previously to no avail. This is one of the biggest reasons I am not completely switching to VSCode just yet.</p>
</section>
<section id="a-note-about-quarto" class="level2">
<h2 class="anchored" data-anchor-id="a-note-about-quarto">A Note About Quarto</h2>
<p>I recently started playing around with Quarto, which looks like the natural successor to Rmarkdown. So far, I have only used Quarto in RStudio and am a big fan of the way it looks and works. I have yet to try it on VSCode, so I cannot comment on it.</p>
</section>
<section id="what-i-love-about-r-in-vscode" class="level2">
<h2 class="anchored" data-anchor-id="what-i-love-about-r-in-vscode">What I love about R in VSCode</h2>
<ul>
<li><p>Speed - VSCode is quick to load up, fast and snappy when the code is running. I did not do any analysis on the times it took to load a piece of code on one vs the other but VSCode ‘feels’ quicker.</p></li>
<li><p>One stop shop for R, Python, HTML, CSS, and dozens other languages - and does it much better than RStudio</p></li>
<li><p>MULTIPLE R SESSIONS!!! - Such a great feature when you’re trying to develop several related projects at the same time.</p></li>
<li><p>Code Refactoring - much better than RStudio</p></li>
<li><p>Color picker and color blocksFor people like me who work with a lot of data visualizations, the ability to see the colors and use the color blocks to pick colors seamlessly is a gamechanger.</p></li>
</ul>
<p><img src="https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/https:/miro.medium.com/max/1400/1*BriosL2ZnWrzfutZAj9mag.png" class="img-fluid"></p>
<ul>
<li><p>Language server - document outline - Navigating through a long line of code (and multiple R files) is painless</p></li>
<li><p>Intellisense and Code Completion - faster, more user friendly</p></li>
</ul>
<p><img src="https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/https:/miro.medium.com/max/1400/1*JfE6quOFsHrhPg7lVYzbBg.png" class="img-fluid"></p>
<ul>
<li>Help and documentation: Same information, much more streamlined</li>
</ul>
<p><img src="https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/https:/miro.medium.com/max/1400/1*0KkBXzf6OgG8UylQIsA1Og.png" class="img-fluid"></p>
<ul>
<li><p>Liveshare and working with teams</p></li>
<li><p>Code Snippets are easier to use and set up than RStudio</p></li>
<li><p>Much easier git and version control integration</p></li>
<li><p>Functions are handled brilliantly. Hover over them and you get all kinds of information and callbacks.</p></li>
<li><p>Code organization: Code sections allow for folding of code, makes fo easier code reading and naviation and cleaner code overall.</p></li>
</ul>
<p><img src="https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/https:/miro.medium.com/max/1400/1*I9fvz_MAETSDMtRUZDPlQg.png" class="img-fluid"></p>
<ul>
<li>Customizable and make it your own by editing the json files inside VSCode.</li>
</ul>
<p>So VSCode has some amazing features that could really tempt an RStudio user.</p>
</section>
<section id="what-i-dont-love-about-r-in-vscode" class="level2">
<h2 class="anchored" data-anchor-id="what-i-dont-love-about-r-in-vscode">What I don’t love about R in VSCode</h2>
<ul>
<li>R-studio works great out of the box, no need to install extensions while VSCode setup for R can be tricky and can sometimes involve trail and error</li>
<li>R-templates inside R studio are amazing, and easy to find and use</li>
<li>Dataviewer in RStudio feels a lot better than VScode, especially when working with a large dataset</li>
<li>Even though I use VSCode for Python, HTML, CSS etc, coding R in it, especially for the first few hours feels very odd and in a way unfamiliar despite the very familiar overall IDE organization</li>
<li>NOTEBOOK SUPPORT - If you work with rmd more than r, DO NOT SWITCH. Running chunks of code is very clunky and poor</li>
<li>Knitting notebooks doesnt work well at all, and can lead to errors a lot of the time.</li>
<li>Plot viewers are still not as good as RStudio</li>
<li>Terminal will sometimes throw errors in VSCode that you wouldn’t find for the same piece of code in RStudio</li>
<li>RStudio just feels a lot more tailored to a data scientist/statistical analysis person, while VSCode can feel like a developer-centric code editor</li>
<li>Feels a lot more tailored to a data scientist/statistical analysis</li>
</ul>
</section>
<section id="things-i-hope-to-try-soon-with-vscode" class="level2">
<h2 class="anchored" data-anchor-id="things-i-hope-to-try-soon-with-vscode">Things I hope to try soon with VScode</h2>
<ul>
<li>Quarto</li>
<li>Rblogdown and Rbookdown</li>
<li>More Debugging</li>
<li>Radian terminal</li>
</ul>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Do I love R in VSCode so far? <strong>Absolutely</strong></p>
<p>Enough to make me want to switch? <strong>Not yet</strong>.</p>
<p>Why? <strong>Notebooks</strong></p>
<p>Will I switch soon? <strong>Hopefully yes</strong>.</p>
<section id="if-you-liked-this-and-have-any-suggestions-for-me-find-me-on-twitter-httpstwitter.comkarat_sidhu" class="level4">
<h4 class="anchored" data-anchor-id="if-you-liked-this-and-have-any-suggestions-for-me-find-me-on-twitter-httpstwitter.comkarat_sidhu">If you liked this, and have any suggestions for me; find me on twitter: <a href="https://twitter.com/karat_sidhu" class="uri">https://twitter.com/karat_sidhu</a></h4>
</section>
</section>
<section id="further-reading" class="level2">
<h2 class="anchored" data-anchor-id="further-reading">Further Reading</h2>
<ul>
<li>A great video and blog by Kun Ren on the subject : <a href="https://youtu.be/9xXBDU2z_8Y" class="uri">https://youtu.be/9xXBDU2z_8Y</a></li>
<li>A blog on the same subject: <a href="https://renkun.me/2019/12/11/writing-r-in-vscode-a-fresh-start/" class="uri">https://renkun.me/2019/12/11/writing-r-in-vscode-a-fresh-start/</a></li>
<li>Running R in VSCode: <a href="https://www.infoworld.com/article/3625488/how-to-run-r-in-visual-studio-code.html" class="uri">https://www.infoworld.com/article/3625488/how-to-run-r-in-visual-studio-code.html</a></li>
<li>Insalling R in VSCode: <a href="https://code.visualstudio.com/docs/languages/r" class="uri">https://code.visualstudio.com/docs/languages/r</a></li>
<li>Bonus: Quarto vs RMD: <a href="https://yihui.org/en/2022/04/quarto-r-markdown/" class="uri">https://yihui.org/en/2022/04/quarto-r-markdown/</a></li>
</ul>
<p>This writeup is also available on Towards Data Science</p>
<p><a href="https://medium.com/towards-data-science/vscode-vs-rstudio-worth-the-switch-7a4415fc3275">VSCode vs RStudio Worth the switch? | Karat Sidhu | Towards Data Science (medium.com)</a></p>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {VSCode Vs {RStudio} — {Worth} the {Switch?}},
  date = {2022-05-19},
  url = {https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/vscode-vs-rstudio-worth-the-switch.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“VSCode Vs RStudio — Worth the Switch?”</span>
May 19, 2022. <a href="https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/vscode-vs-rstudio-worth-the-switch.html">https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/vscode-vs-rstudio-worth-the-switch.html</a>.
</div></div></section></div> ]]></description>
  <category>VSCode</category>
  <category>Review</category>
  <category>Long-Read</category>
  <guid>https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/vscode-vs-rstudio-worth-the-switch.html</guid>
  <pubDate>Thu, 19 May 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/vscode-vs-rstudio-worth-the-switch/images/logo.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Eurovision winners with gt() and gtextras()</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/looking-at-eurovision-winners-with-gt.html</link>
  <description><![CDATA[ 




<p>Making a table using the gt and gtextras package in R to look at the Eurovision winners from 2004 to 2022.</p>
<section id="loading-libraries" class="level2">
<h2 class="anchored" data-anchor-id="loading-libraries">Loading Libraries</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ ggplot2 3.3.6     ✔ purrr   0.3.4
✔ tibble  3.1.7     ✔ dplyr   1.0.9
✔ tidyr   1.2.0     ✔ stringr 1.4.0
✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">library</span>(gt)</span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;">library</span>(gtExtras)</span></code></pre></div>
</div>
</section>
<section id="load-data" class="level2">
<h2 class="anchored" data-anchor-id="load-data">load data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">eurovision <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb6-2">  readr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_csv</span>(</span>
<span id="cb6-3">    <span class="st" style="color: #20794D;">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-17/eurovision.csv"</span></span>
<span id="cb6-4">  )</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Rows: 2005 Columns: 18
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (12): event, host_city, host_country, event_url, section, artist, song, ...
dbl  (4): year, running_order, total_points, rank
lgl  (2): qualified, winner

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
</section>
<section id="cleaning-data" class="level2">
<h2 class="anchored" data-anchor-id="cleaning-data">Cleaning Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">eurovision <span class="ot" style="color: #003B4F;">&lt;-</span> eurovision <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;">select</span>(</span>
<span id="cb8-3">    <span class="sc" style="color: #5E5E5E;">-</span><span class="fu" style="color: #4758AB;">c</span>(</span>
<span id="cb8-4">      event_url,</span>
<span id="cb8-5">      artist_url,</span>
<span id="cb8-6">      country_emoji,</span>
<span id="cb8-7">      rank_ordinal,</span>
<span id="cb8-8">      running_order,</span>
<span id="cb8-9">      qualified,</span>
<span id="cb8-10">      event</span>
<span id="cb8-11">    )</span>
<span id="cb8-12">  )</span></code></pre></div>
</div>
</section>
<section id="just-the-finale-winners" class="level2">
<h2 class="anchored" data-anchor-id="just-the-finale-winners">Just the finale winners</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">eurovision <span class="ot" style="color: #003B4F;">&lt;-</span> eurovision <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb9-2">  <span class="fu" style="color: #4758AB;">filter</span>(section <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"grand-final"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;">group_by</span>(year) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb9-4">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">average_points =</span> <span class="fu" style="color: #4758AB;">mean</span>(total_points)) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb9-5">  <span class="fu" style="color: #4758AB;">ungroup</span>()</span></code></pre></div>
</div>
</section>
<section id="data-to-make-the-table" class="level2">
<h2 class="anchored" data-anchor-id="data-to-make-the-table">Data to make the table</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">eurovision_table <span class="ot" style="color: #003B4F;">&lt;-</span> eurovision <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;">group_by</span>(artist_country) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb10-3">  <span class="fu" style="color: #4758AB;">filter</span>(section <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"grand-final"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb10-4">  <span class="fu" style="color: #4758AB;">filter</span>(winner <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"TRUE"</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb10-5">  <span class="fu" style="color: #4758AB;">select</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="fu" style="color: #4758AB;">c</span>(section, rank, winner)) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb10-6">  <span class="fu" style="color: #4758AB;">select</span>(year, <span class="fu" style="color: #4758AB;">everything</span>())</span></code></pre></div>
</div>
</section>
<section id="making-the-gt-table" class="level2">
<h2 class="anchored" data-anchor-id="making-the-gt-table">Making the gt() table</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">table  <span class="ot" style="color: #003B4F;">&lt;-</span> eurovision_table <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;">gt</span>() <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-3">  <span class="fu" style="color: #4758AB;">gt_color_rows</span>(total_points<span class="sc" style="color: #5E5E5E;">:</span>average_points,</span>
<span id="cb11-4">                <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"discrete"</span>,</span>
<span id="cb11-5">                <span class="at" style="color: #657422;">palette =</span> <span class="st" style="color: #20794D;">"ggsci::orange_material"</span>,</span>
<span id="cb11-6">  ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-7">  <span class="fu" style="color: #4758AB;">gt_img_rows</span>(<span class="at" style="color: #657422;">columns =</span> image_url,</span>
<span id="cb11-8">              <span class="at" style="color: #657422;">img_source =</span> <span class="st" style="color: #20794D;">"web"</span>,</span>
<span id="cb11-9">              <span class="at" style="color: #657422;">height =</span> <span class="dv" style="color: #AD0000;">30</span>) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-10">  <span class="fu" style="color: #4758AB;">gt_theme_538</span>() <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-11">  <span class="fu" style="color: #4758AB;">tab_header</span>(</span>
<span id="cb11-12">    <span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Eurovision Song Contest Winners 2004 - 2022"</span>,</span>
<span id="cb11-13">    <span class="at" style="color: #657422;">subtitle =</span> <span class="st" style="color: #20794D;">"Winners of the Eurovision Song contest grand finales from 2004 to 2022. An average of 26 countries participated</span></span>
<span id="cb11-14"><span class="st" style="color: #20794D;">    in the song contest and the following countries won after advancing to the final rounds. The table details the winning artists</span></span>
<span id="cb11-15"><span class="st" style="color: #20794D;">    and the total points for the corresponding winners; in addition total scores for each winner and the average score for that year.</span></span>
<span id="cb11-16"><span class="st" style="color: #20794D;">    Data grouped by country."</span></span>
<span id="cb11-17">  ) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-18">  <span class="fu" style="color: #4758AB;">tab_source_note</span>(<span class="at" style="color: #657422;">source_note =</span> <span class="fu" style="color: #4758AB;">md</span>(</span>
<span id="cb11-19">    glue<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">glue</span>(</span>
<span id="cb11-20">      <span class="st" style="color: #20794D;">"Data : {fontawesome::fa('twitter')} Tanya Shapiro | Graphic : {fontawesome::fa('github')} github.com/SidhuK"</span></span>
<span id="cb11-21">    )</span>
<span id="cb11-22">  )) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-23">  <span class="fu" style="color: #4758AB;">tab_footnote</span>(<span class="at" style="color: #657422;">footnote =</span> <span class="st" style="color: #20794D;">"Highest Points by a winner"</span>,</span>
<span id="cb11-24">               <span class="at" style="color: #657422;">locations =</span> <span class="fu" style="color: #4758AB;">cells_row_groups</span>(<span class="at" style="color: #657422;">groups =</span> <span class="st" style="color: #20794D;">"Portugal"</span>)) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-25">  <span class="fu" style="color: #4758AB;">tab_style</span>(<span class="at" style="color: #657422;">locations =</span> <span class="fu" style="color: #4758AB;">cells_title</span>(<span class="at" style="color: #657422;">groups =</span> <span class="st" style="color: #20794D;">'title'</span>), <span class="co" style="color: #5E5E5E;"># format the main title</span></span>
<span id="cb11-26">            <span class="at" style="color: #657422;">style =</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb11-27">              <span class="fu" style="color: #4758AB;">cell_text</span>(</span>
<span id="cb11-28">                <span class="at" style="color: #657422;">font =</span> <span class="fu" style="color: #4758AB;">google_font</span>(<span class="at" style="color: #657422;">name =</span> <span class="st" style="color: #20794D;">'Bebas Neue'</span>),</span>
<span id="cb11-29">                <span class="at" style="color: #657422;">size =</span> <span class="fu" style="color: #4758AB;">px</span>(<span class="dv" style="color: #AD0000;">60</span>),</span>
<span id="cb11-30">                <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">'indianred'</span>,</span>
<span id="cb11-31">                <span class="at" style="color: #657422;">weight =</span> <span class="dv" style="color: #AD0000;">700</span></span>
<span id="cb11-32">              )</span>
<span id="cb11-33">            )) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-34">  <span class="fu" style="color: #4758AB;">gt_merge_stack</span>(<span class="at" style="color: #657422;">col1 =</span> host_city,</span>
<span id="cb11-35">                 <span class="at" style="color: #657422;">col2 =</span> host_country) <span class="sc" style="color: #5E5E5E;">|&gt;</span> <span class="co" style="color: #5E5E5E;"># trim the table a bit</span></span>
<span id="cb11-36">  <span class="fu" style="color: #4758AB;">gt_merge_stack</span>(<span class="at" style="color: #657422;">col1 =</span> artist,</span>
<span id="cb11-37">                 <span class="at" style="color: #657422;">col2 =</span> song) <span class="sc" style="color: #5E5E5E;">|&gt;</span></span>
<span id="cb11-38">  <span class="fu" style="color: #4758AB;">tab_options</span>(<span class="at" style="color: #657422;">table.background.color =</span> <span class="st" style="color: #20794D;">"#f1ebda"</span>,</span>
<span id="cb11-39">              <span class="at" style="color: #657422;">column_labels.background.color =</span> <span class="st" style="color: #20794D;">"#f1ebda"</span>) <span class="co" style="color: #5E5E5E;"># set the bg color</span></span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Warning: Domain not specified, defaulting to observed range within each
specified column.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">table</span></code></pre></div>
<div class="cell-output-display">

<div id="snnajruqko" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=Bebas+Neue:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
html {
  font-family: Chivo, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#snnajruqko) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: 300;
  font-style: normal;
  background-color: #F1EBDA;
  width: auto;
  border-top-style: none;
  border-top-width: 3px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#snnajruqko) .gt_heading {
  background-color: #F1EBDA;
  text-align: left;
  border-bottom-color: #F1EBDA;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#snnajruqko) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #F1EBDA;
  border-bottom-width: 0;
}

:where(#snnajruqko) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #F1EBDA;
  border-top-width: 0;
}

:where(#snnajruqko) .gt_bottom_border {
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#snnajruqko) .gt_col_headings {
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#snnajruqko) .gt_col_heading {
  color: #333333;
  background-color: #F1EBDA;
  font-size: 80%;
  font-weight: normal;
  text-transform: uppercase;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#snnajruqko) .gt_column_spanner_outer {
  color: #333333;
  background-color: #F1EBDA;
  font-size: 80%;
  font-weight: normal;
  text-transform: uppercase;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#snnajruqko) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#snnajruqko) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#snnajruqko) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #000000;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#snnajruqko) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #F1EBDA;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#snnajruqko) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #F1EBDA;
  font-size: 80%;
  font-weight: bolder;
  border-top-style: none;
  border-top-width: 2px;
  border-top-color: #000000;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  border-bottom-color: #FFFFFF;
  vertical-align: middle;
}

:where(#snnajruqko) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#snnajruqko) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#snnajruqko) .gt_row {
  padding-top: 3px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#snnajruqko) .gt_stub {
  color: #333333;
  background-color: #F1EBDA;
  font-size: 80%;
  font-weight: bolder;
  text-transform: uppercase;
  border-right-style: solid;
  border-right-width: 0px;
  border-right-color: #FFFFFF;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#snnajruqko) .gt_stub_row_group {
  color: #333333;
  background-color: #F1EBDA;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#snnajruqko) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#snnajruqko) .gt_summary_row {
  color: #333333;
  background-color: #F1EBDA;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#snnajruqko) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#snnajruqko) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#snnajruqko) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#snnajruqko) .gt_grand_summary_row {
  color: #333333;
  background-color: #F1EBDA;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#snnajruqko) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#snnajruqko) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#snnajruqko) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#snnajruqko) .gt_footnotes {
  color: #333333;
  background-color: #F1EBDA;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#snnajruqko) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#snnajruqko) .gt_sourcenotes {
  color: #333333;
  background-color: #F1EBDA;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#snnajruqko) .gt_sourcenote {
  font-size: 12px;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#snnajruqko) .gt_left {
  text-align: left;
}

:where(#snnajruqko) .gt_center {
  text-align: center;
}

:where(#snnajruqko) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#snnajruqko) .gt_font_normal {
  font-weight: normal;
}

:where(#snnajruqko) .gt_font_bold {
  font-weight: bold;
}

:where(#snnajruqko) .gt_font_italic {
  font-style: italic;
}

:where(#snnajruqko) .gt_super {
  font-size: 65%;
}

:where(#snnajruqko) .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

:where(#snnajruqko) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#snnajruqko) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#snnajruqko) .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

:where(#snnajruqko) .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

:where(#snnajruqko) .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}

tbody tr:last-child {
  border-bottom: 2px solid #ffffff00;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="6" class="gt_heading gt_title gt_font_normal" style="color: #CD5C5C; font-family: 'Bebas Neue'; font-size: 60px; font-weight: 700;">Eurovision Song Contest Winners 2004 - 2022</th>
    </tr>
    <tr>
      <th colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="">Winners of the Eurovision Song contest grand finales from 2004 to 2022. An average of 26 countries participated
    in the song contest and the following countries won after advancing to the final rounds. The table details the winning artists
    and the total points for the corresponding winners; in addition total scores for each winner and the average score for that year.
    Data grouped by country.</th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">host_city</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">artist</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">image_url</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">total_points</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="border-top-width: 0px; border-top-style: solid; border-top-color: black;">average_points</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Ukraine</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2022</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Turin</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Italy</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Kalush Orchestra</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Stefania</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/963164d0-060d-4667-96b6-0b0cf1f797e6/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #F67E00; color: #000000;">631</td>
<td class="gt_row gt_right" style="background-color: #EB5F00; color: #FFFFFF;">185.60000</td></tr>
    <tr><td class="gt_row gt_right">2016</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Stockholm</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Netherlands</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Jamala</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Zitti E Buoni</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d917b8e-2a80-4832-9100-a4b47d0088a8/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FE9500; color: #000000;">534</td>
<td class="gt_row gt_right" style="background-color: #E95B00; color: #FFFFFF;">187.38462</td></tr>
    <tr><td class="gt_row gt_right">2004</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Istanbul</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Israel</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Ruslana</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Arcade</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8da92473-088f-4d94-80e4-f3e1a2cba66b/avatar_small.png" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFE0B3; color: #000000;">280</td>
<td class="gt_row gt_right" style="background-color: #FFECCF; color: #000000;">87.00000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Italy</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2021</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Rotterdam</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Portugal</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Måneskin</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">TOY</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/92f1a74f-b230-455c-9833-4667eb612abc/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FF9700; color: #000000;">524</td>
<td class="gt_row gt_right" style="background-color: #F27400; color: #000000;">174.00000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Netherlands</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2019</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Tel Aviv</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Ukraine</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Duncan Laurence</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Amar Pelos Dois</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d9181f0-6b70-44c0-bd27-0867a4547cd2/avatar_small.png" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FF9D12; color: #000000;">498</td>
<td class="gt_row gt_right" style="background-color: #ED6500; color: #000000;">182.92308</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Israel</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2018</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Lisbon</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Sweden</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Netta</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">1944</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d917f66-0b2c-4716-b184-b3554e82af5c/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FE9600; color: #000000;">529</td>
<td class="gt_row gt_right" style="background-color: #E65100; color: #FFFFFF;">191.84615</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Portugal<sup class="gt_footnote_marks">1</sup></td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2017</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Kyiv</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Austria</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Salvador Sobral</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Heroes</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d917d7a-f64e-4cbb-84b1-9f3deae2bb6c/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #E65100; color: #FFFFFF;">758</td>
<td class="gt_row gt_right" style="background-color: #E95B00; color: #FFFFFF;">187.38462</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Sweden</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2015</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Vienna</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Denmark</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Måns Zelmerlöw</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Rise Like a Phoenix</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d9176b2-372a-4821-9823-e5be46a31a30/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFC36C; color: #000000;">365</td>
<td class="gt_row gt_right" style="background-color: #FFEED3; color: #000000;">85.92593</td></tr>
    <tr><td class="gt_row gt_right">2012</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Baku</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Sweden</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Loreen</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Only Teardrops</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d917f59-2009-49ec-8a58-27c7a262488f/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFC166; color: #000000;">372</td>
<td class="gt_row gt_right" style="background-color: #FFE2B6; color: #000000;">93.69231</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Austria</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2014</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Copenhagen</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Azerbaijan</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Conchita Wurst</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Euphoria</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d9173cd-4010-4b88-9bd8-92e3f02a0d31/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFDDAA; color: #000000;">290</td>
<td class="gt_row gt_right" style="background-color: #FFF3E0; color: #000000;">82.53846</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Denmark</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2013</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Malmö</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Germany</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Emmelie de Forest</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Running Scared</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d917205-aa14-49db-8b15-5f5b8d535eff/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFE0B2; color: #000000;">281</td>
<td class="gt_row gt_right" style="background-color: #FFECCF; color: #000000;">87.00000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Azerbaijan</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2011</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Düsseldorf</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Norway</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Ell/Nikki</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Satellite</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d915009-3437-4d4b-999b-a58280c7c02a/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFF3E0; color: #000000;">221</td>
<td class="gt_row gt_right" style="background-color: #FFD89D; color: #000000;">99.76000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Germany</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2010</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Oslo</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Russia</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Lena</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Fairytale</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/9102456c-d878-424a-adf2-93a014cddb51/avatar_small.png" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFEBCD; color: #000000;">246</td>
<td class="gt_row gt_right" style="background-color: #FFE7C2; color: #000000;">90.48000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Norway</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2009</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Moscow</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Serbia</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Alexander Rybak</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Believe</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d914f24-706c-4670-8bb4-e52975530535/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFBC59; color: #000000;">387</td>
<td class="gt_row gt_right" style="background-color: #FFDBA7; color: #000000;">97.44000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Russia</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2008</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Belgrade</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Finland</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Dima Bilan</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Molitva</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d913f0c-4dc8-4d7c-9dcd-d6488e62a3ca/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFE3B9; color: #000000;">272</td>
<td class="gt_row gt_right" style="background-color: #FFD89D; color: #000000;">99.76000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Serbia</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2007</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Helsinki</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Greece</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Marija Šerifović</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Hard Rock Hallelujah</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d913aa9-ade9-4d8c-b68d-e1cd3dbf7cd6/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFE4BC; color: #000000;">268</td>
<td class="gt_row gt_right" style="background-color: #FFD596; color: #000000;">101.50000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Finland</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2006</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Athens</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Ukraine</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Lordi</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">My Number One</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d917645-f14c-498e-8879-db1d5561e3a7/avatar_small.jpg" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFDCA9; color: #000000;">292</td>
<td class="gt_row gt_right" style="background-color: #FFE4BD; color: #000000;">91.83333</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="6" class="gt_group_heading" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black;">Greece</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">2005</td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Kyiv</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Turkey</span></div></td>
<td class="gt_row gt_left"><div style="line-height:10px"><span style="font-weight:bold;font-variant:small-caps;color:black;font-size:14px">Helena Paparizou</span></div>
<div style="line-height:12px"><span style="font-weight:bold;color:grey;font-size:10px">Wild Dances</span></div></td>
<td class="gt_row gt_left"><img src="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/https:/static.eurovision.tv/hb-cgi/images/8d9181f0-0274-453c-b08c-fb4b153dbf92/avatar_small.png" style="height:30px;"></td>
<td class="gt_row gt_right" style="background-color: #FFF0D9; color: #000000;">230</td>
<td class="gt_row gt_right" style="background-color: #FFE1B4; color: #000000;">94.25000</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="6">Data :  Tanya Shapiro | Graphic :  github.com/SidhuK</td>
    </tr>
  </tfoot>
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="6"><sup class="gt_footnote_marks">1</sup> Highest Points by a winner</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {Eurovision Winners with Gt() and Gtextras()},
  date = {2022-05-17},
  url = {https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/looking-at-eurovision-winners-with-gt.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“Eurovision Winners with Gt() and
Gtextras().”</span> May 17, 2022. <a href="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/looking-at-eurovision-winners-with-gt.html">https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/looking-at-eurovision-winners-with-gt.html</a>.
</div></div></section></div> ]]></description>
  <category>TidyTuesday</category>
  <category>Data-Viz</category>
  <category>TidyVerse</category>
  <guid>https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/looking-at-eurovision-winners-with-gt.html</guid>
  <pubDate>Tue, 17 May 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/looking-at-eurovision-winners-with-gt/images/logo.png" medium="image" type="image/png" height="56" width="144"/>
</item>
<item>
  <title>New York Times Bestsellers</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/new-york-times-bestsellers/new-york-times-bestsellers.html</link>
  <description><![CDATA[ 




<p>Looking at the New York Times Bestsellers by Decade; data by Post45</p>
<section id="loading-libraries" class="level2">
<h2 class="anchored" data-anchor-id="loading-libraries">Loading Libraries</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ ggplot2 3.3.6     ✔ purrr   0.3.4
✔ tibble  3.1.7     ✔ dplyr   1.0.9
✔ tidyr   1.2.0     ✔ stringr 1.4.0
✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">library</span>(showtext)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Loading required package: sysfonts</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>Loading required package: showtextdb</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;">showtext_opts</span>(<span class="at" style="color: #657422;">dpi =</span> <span class="dv" style="color: #AD0000;">450</span>)</span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;">showtext_auto</span>(<span class="at" style="color: #657422;">enable =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb8-3"><span class="fu" style="color: #4758AB;">library</span>(ggtext)</span>
<span id="cb8-4"><span class="fu" style="color: #4758AB;">library</span>(ggrepel)</span>
<span id="cb8-5"><span class="fu" style="color: #4758AB;">font_add_google</span>(<span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Roboto"</span>, <span class="at" style="color: #657422;">name =</span> <span class="st" style="color: #20794D;">"Roboto"</span>)</span>
<span id="cb8-6"><span class="fu" style="color: #4758AB;">font_add_google</span>(<span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Outfit"</span>, <span class="at" style="color: #657422;">name =</span> <span class="st" style="color: #20794D;">"Outfit"</span>)</span></code></pre></div>
</div>
</section>
<section id="loading-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-data">Loading Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">nyt_titles <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb9-2">    readr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_tsv</span>(<span class="st" style="color: #20794D;">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-10/nyt_titles.tsv"</span>)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Rows: 7431 Columns: 8
── Column specification ────────────────────────────────────────────────────────
Delimiter: "\t"
chr  (2): title, author
dbl  (5): id, year, total_weeks, debut_rank, best_rank
date (1): first_week

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">nyt_full <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb11-2">    readr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_tsv</span>(<span class="st" style="color: #20794D;">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-10/nyt_full.tsv"</span>)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Rows: 60386 Columns: 6
── Column specification ────────────────────────────────────────────────────────
Delimiter: "\t"
chr  (2): title, author
dbl  (3): year, rank, title_id
date (1): week

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">colors_legend <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(</span>
<span id="cb13-2">    <span class="st" style="color: #20794D;">"#FFB327"</span>,</span>
<span id="cb13-3">    <span class="st" style="color: #20794D;">"#08748f"</span>,</span>
<span id="cb13-4">    <span class="st" style="color: #20794D;">"#4F607C"</span>,</span>
<span id="cb13-5">    <span class="st" style="color: #20794D;">"#2d6554"</span>,</span>
<span id="cb13-6">    <span class="st" style="color: #20794D;">"#8E038E"</span>,</span>
<span id="cb13-7">    <span class="st" style="color: #20794D;">"#5A6D87"</span>,</span>
<span id="cb13-8">    <span class="st" style="color: #20794D;">"#000000"</span>,</span>
<span id="cb13-9">    <span class="st" style="color: #20794D;">"#725050"</span>,</span>
<span id="cb13-10">    <span class="st" style="color: #20794D;">"#542ea5"</span>,</span>
<span id="cb13-11">    <span class="st" style="color: #20794D;">"#304d30"</span>,</span>
<span id="cb13-12">    <span class="st" style="color: #20794D;">"#8E038E"</span></span>
<span id="cb13-13">)</span></code></pre></div>
</div>
</section>
<section id="data-cleaning-and-basic-eda" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning-and-basic-eda">Data Cleaning and basic EDA</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">nytitiles_weeks <span class="ot" style="color: #003B4F;">&lt;-</span> nyt_titles <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb14-2">    <span class="fu" style="color: #4758AB;">mutate</span>(</span>
<span id="cb14-3">        <span class="at" style="color: #657422;">decade =</span> (year <span class="sc" style="color: #5E5E5E;">%/%</span> <span class="dv" style="color: #AD0000;">10</span>) <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span></span>
<span id="cb14-4">    ) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb14-5">    <span class="fu" style="color: #4758AB;">group_by</span>(decade) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb14-6">    <span class="fu" style="color: #4758AB;">slice</span>(<span class="fu" style="color: #4758AB;">which.max</span>(total_weeks)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb14-7">    <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">title_new =</span> <span class="fu" style="color: #4758AB;">paste</span>(title, <span class="st" style="color: #20794D;">"("</span>, total_weeks, <span class="st" style="color: #20794D;">"Weeks )"</span>))</span>
<span id="cb14-8">nytitiles_weeks</span></code></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 10 × 10
# Groups:   decade [10]
      id title   author  year total_weeks first_week debut_rank best_rank decade
   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;date&gt;          &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
 1   481 ANTHON… Herve…  1933          86 1933-07-03          1         1   1930
 2  6157 THE RO… Lloyd…  1942         111 1942-11-09          5         1   1940
 3  4749 THE CA… Herma…  1951         123 1951-04-22         13         1   1950
 4  6887 TO KIL… Harpe…  1960          98 1960-08-07         14         2   1960
 5  2363 ILLUSI… Richa…  1977          80 1977-06-19         10         2   1970
 6  4679 THE BO… Tom W…  1987          56 1987-11-08          1         1   1980
 7  3343 OH, TH… Dr. S…  1990         178 1990-02-25         14         1   1990
 8  4918 THE DA… Dan B…  2003         165 2003-04-06          9         1   2000
 9   381 ALL TH… Antho…  2014         132 2014-05-25          2         1   2010
10   414 AMERIC… Jeani…  2020          34 2020-02-09         12         1   2020
# … with 1 more variable: title_new &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="making-the-plot" class="level2">
<h2 class="anchored" data-anchor-id="making-the-plot">Making the plot</h2>
<div class="cell" data-preview="false">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">nyt_titles <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-2">    <span class="fu" style="color: #4758AB;">mutate</span>(</span>
<span id="cb16-3">        <span class="at" style="color: #657422;">decade =</span> (year <span class="sc" style="color: #5E5E5E;">%/%</span> <span class="dv" style="color: #AD0000;">10</span>) <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span></span>
<span id="cb16-4">    ) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-5">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb16-6">        <span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">as.factor</span>(<span class="fu" style="color: #4758AB;">reorder</span>(decade, <span class="sc" style="color: #5E5E5E;">-</span>decade)),</span>
<span id="cb16-7">        <span class="at" style="color: #657422;">y =</span> total_weeks,</span>
<span id="cb16-8">        <span class="at" style="color: #657422;">group =</span> decade,</span>
<span id="cb16-9">        <span class="at" style="color: #657422;">color =</span> <span class="fu" style="color: #4758AB;">as.factor</span>(decade)</span>
<span id="cb16-10">    )) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-11">    <span class="fu" style="color: #4758AB;">geom_jitter</span>(<span class="at" style="color: #657422;">width =</span> <span class="fl" style="color: #AD0000;">0.25</span>, <span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.2</span>, <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">0.85</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-12">    <span class="fu" style="color: #4758AB;">geom_text_repel</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb16-13">        <span class="at" style="color: #657422;">label =</span> title_new,</span>
<span id="cb16-14">        <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Outfit"</span></span>
<span id="cb16-15">    ),</span>
<span id="cb16-16">    <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">4.5</span>,</span>
<span id="cb16-17">    <span class="at" style="color: #657422;">data =</span> nytitiles_weeks, <span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.9</span>,</span>
<span id="cb16-18">    <span class="at" style="color: #657422;">box.padding =</span> <span class="fl" style="color: #AD0000;">0.35</span></span>
<span id="cb16-19">    ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-20">    <span class="fu" style="color: #4758AB;">geom_point</span>(</span>
<span id="cb16-21">        <span class="at" style="color: #657422;">data =</span> nytitiles_weeks,</span>
<span id="cb16-22">        <span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb16-23">            <span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">as.factor</span>(decade),</span>
<span id="cb16-24">            <span class="at" style="color: #657422;">y =</span> total_weeks</span>
<span id="cb16-25">        ),</span>
<span id="cb16-26">        <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">2</span></span>
<span id="cb16-27">    ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-28">    <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-29">    <span class="fu" style="color: #4758AB;">labs</span>(</span>
<span id="cb16-30">        <span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"NYTIMES BESTSELLERS"</span>,</span>
<span id="cb16-31">        <span class="at" style="color: #657422;">subtitle =</span> <span class="st" style="color: #20794D;">"**Bestsellers; by Decade.** &lt;br&gt;Looking at the number of weeks each book stayed on the NYTimes bestsellers&lt;br&gt; list every decade. Most popular bestselling book with the most weeks on the &lt;br&gt; list is labelled for each decade."</span>,</span>
<span id="cb16-32">        <span class="at" style="color: #657422;">caption =</span> <span class="st" style="color: #20794D;">"Data: Post45 | Graphic: github.com/SidhuK"</span></span>
<span id="cb16-33">    ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-34">    <span class="fu" style="color: #4758AB;">ylab</span>(<span class="st" style="color: #20794D;">"Weeks"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-35">    <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb16-36">        <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb16-37">        <span class="at" style="color: #657422;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb16-38">        <span class="at" style="color: #657422;">panel.grid.minor.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb16-39">        <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_markdown</span>(<span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Cookie"</span>, <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">10</span>),</span>
<span id="cb16-40">        <span class="at" style="color: #657422;">plot.subtitle =</span> <span class="fu" style="color: #4758AB;">element_markdown</span>(<span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Outfit"</span>, <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">18</span>),</span>
<span id="cb16-41">        <span class="at" style="color: #657422;">plot.caption =</span> <span class="fu" style="color: #4758AB;">element_markdown</span>(<span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Outfit"</span>, <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">12</span>),</span>
<span id="cb16-42">        <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb16-43">        <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">18</span>),</span>
<span id="cb16-44">        <span class="at" style="color: #657422;">axis.text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">14</span>),</span>
<span id="cb16-45">    ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-46">    <span class="fu" style="color: #4758AB;">scale_color_manual</span>(</span>
<span id="cb16-47">        <span class="at" style="color: #657422;">values =</span> colors_legend,</span>
<span id="cb16-48">        <span class="at" style="color: #657422;">name =</span> <span class="cn" style="color: #8f5902;">NULL</span></span>
<span id="cb16-49">    ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-50">    <span class="fu" style="color: #4758AB;">coord_flip</span>()</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
family 'Cookie' not found, will use 'sans' instead</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_stringMetric, as.graphicsAnnot(x$label)): font family
'Cookie' not found, will use 'sans' instead</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call(C_textBounds, as.graphicsAnnot(x$label), x$x, x$y, : font
family 'Cookie' not found, will use 'sans' instead</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>Warning in grid.Call.graphics(C_text, as.graphicsAnnot(x$label), x$x, x$y, :
font family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call.graphics(C_text, as.graphicsAnnot(x$label), x$x, x$y, :
font family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call.graphics(C_text, as.graphicsAnnot(x$label), x$x, x$y, :
font family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call.graphics(C_text, as.graphicsAnnot(x$label), x$x, x$y, :
font family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call.graphics(C_text, as.graphicsAnnot(x$label), x$x, x$y, :
font family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call.graphics(C_text, as.graphicsAnnot(x$label), x$x, x$y, :
font family 'Cookie' not found, will use 'sans' instead

Warning in grid.Call.graphics(C_text, as.graphicsAnnot(x$label), x$x, x$y, :
font family 'Cookie' not found, will use 'sans' instead</code></pre>
</div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/new-york-times-bestsellers/new-york-times-bestsellers_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {New {York} {Times} {Bestsellers}},
  date = {2022-05-10},
  url = {https://karatsidhu.com/posts/new-york-times-bestsellers/new-york-times-bestsellers.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“New York Times Bestsellers.”</span> May 10,
2022. <a href="https://karatsidhu.com/posts/new-york-times-bestsellers/new-york-times-bestsellers.html">https://karatsidhu.com/posts/new-york-times-bestsellers/new-york-times-bestsellers.html</a>.
</div></div></section></div> ]]></description>
  <category>TidyTuesday</category>
  <category>Data-Viz</category>
  <category>TidyVerse</category>
  <guid>https://karatsidhu.com/posts/new-york-times-bestsellers/new-york-times-bestsellers.html</guid>
  <pubDate>Tue, 10 May 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/new-york-times-bestsellers/images/logo.png" medium="image" type="image/png" height="35" width="144"/>
</item>
<item>
  <title>Making streamgraphs in R</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/making-streamgraphs-in-r/making-streamgraphs-in-r.html</link>
  <description><![CDATA[ 




<p>TidyTuesday Dataset for Week of May 03, 2022. The dataset featured the hidden gems files from Berkeley Lab/Dept of Energy.</p>
<section id="loading-libraries" class="level2">
<h2 class="anchored" data-anchor-id="loading-libraries">Loading Libraries</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(ggstream)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>✔ ggplot2 3.3.6     ✔ purrr   0.3.4
✔ tibble  3.1.7     ✔ dplyr   1.0.9
✔ tidyr   1.2.0     ✔ stringr 1.4.0
✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">library</span>(patchwork)</span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;">library</span>(showtext)</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Loading required package: sysfonts</code></pre>
</div>
<div class="cell-output-stderr">
<pre><code>Loading required package: showtextdb</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;">showtext_opts</span>(<span class="at" style="color: #657422;">dpi =</span> <span class="dv" style="color: #AD0000;">450</span>)</span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;">showtext_auto</span>(<span class="at" style="color: #657422;">enable =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb8-3"><span class="fu" style="color: #4758AB;">library</span>(ggtext)</span>
<span id="cb8-4"><span class="fu" style="color: #4758AB;">font_add_google</span>(<span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bangers"</span>, <span class="at" style="color: #657422;">name =</span> <span class="st" style="color: #20794D;">"Bangers"</span>)</span></code></pre></div>
</div>
</section>
<section id="loading-and-cleaning-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-and-cleaning-data">Loading and cleaning Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">capacity <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb9-2">  readr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_csv</span>(</span>
<span id="cb9-3">    <span class="st" style="color: #20794D;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-03/capacity.csv'</span></span>
<span id="cb9-4">  )</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Rows: 49 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): type
dbl (6): year, standalone_prior, hybrid_prior, standalone_new, hybrid_new, t...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">wind <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb11-2">  readr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_csv</span>(</span>
<span id="cb11-3">    <span class="st" style="color: #20794D;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-03/wind.csv'</span></span>
<span id="cb11-4">  )</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Rows: 328 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
dbl  (2): wind_mwh, wind_capacity
date (1): date

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">solar <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb13-2">  readr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_csv</span>(</span>
<span id="cb13-3">    <span class="st" style="color: #20794D;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-03/solar.csv'</span></span>
<span id="cb13-4">  )</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Rows: 328 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
dbl  (2): solar_mwh, solar_capacity
date (1): date

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">average_cost <span class="ot" style="color: #003B4F;">&lt;-</span></span>
<span id="cb15-2">  readr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">read_csv</span>(</span>
<span id="cb15-3">    <span class="st" style="color: #20794D;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-03/average_cost.csv'</span></span>
<span id="cb15-4">  )</span></code></pre></div>
<div class="cell-output-stderr">
<pre><code>Rows: 13 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
dbl (4): year, gas_mwh, solar_mwh, wind_mwh

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">capacity <span class="ot" style="color: #003B4F;">&lt;-</span> capacity <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb17-2">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="fu" style="color: #4758AB;">across</span>(<span class="fu" style="color: #4758AB;">where</span>(anyNA), <span class="sc" style="color: #5E5E5E;">~</span> <span class="fu" style="color: #4758AB;">replace_na</span>(., <span class="dv" style="color: #AD0000;">0</span>)))</span>
<span id="cb17-3">capacity <span class="ot" style="color: #003B4F;">&lt;-</span> capacity <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb17-4">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">prior =</span> standalone_prior <span class="sc" style="color: #5E5E5E;">+</span> hybrid_prior) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb17-5">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">new =</span> standalone_new <span class="sc" style="color: #5E5E5E;">+</span> hybrid_new)</span></code></pre></div>
</div>
</section>
<section id="making-the-plot" class="level2">
<h2 class="anchored" data-anchor-id="making-the-plot">Making the plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">colors_legend <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#FFB327"</span>,</span>
<span id="cb18-2">                   <span class="st" style="color: #20794D;">"#D1F1F9"</span>,</span>
<span id="cb18-3">                   <span class="st" style="color: #20794D;">"#4F607C"</span>,</span>
<span id="cb18-4">                   <span class="st" style="color: #20794D;">"#c5b689"</span>,</span>
<span id="cb18-5">                   <span class="st" style="color: #20794D;">"#8E038E"</span>,</span>
<span id="cb18-6">                   <span class="st" style="color: #20794D;">"#5A6D87"</span>,</span>
<span id="cb18-7">                   <span class="st" style="color: #20794D;">"#000000"</span>)</span>
<span id="cb18-8">plot1 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ggplot</span>(capacity, <span class="fu" style="color: #4758AB;">aes</span>(year, prior, <span class="at" style="color: #657422;">fill =</span> type)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-9">  <span class="fu" style="color: #4758AB;">geom_stream</span>(</span>
<span id="cb18-10">    <span class="at" style="color: #657422;">extra_span =</span> .<span class="dv" style="color: #AD0000;">25</span>,</span>
<span id="cb18-11">    <span class="at" style="color: #657422;">true_range =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb18-12">    <span class="at" style="color: #657422;">bw =</span> .<span class="dv" style="color: #AD0000;">85</span>,</span>
<span id="cb18-13">    <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">1.25</span>,</span>
<span id="cb18-14">    <span class="at" style="color: #657422;">sorting =</span> <span class="st" style="color: #20794D;">"onset"</span></span>
<span id="cb18-15">  ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-16">  <span class="fu" style="color: #4758AB;">geom_stream</span>(</span>
<span id="cb18-17">    <span class="at" style="color: #657422;">geom =</span> <span class="st" style="color: #20794D;">"contour"</span>,</span>
<span id="cb18-18">    <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"white"</span>,</span>
<span id="cb18-19">    <span class="at" style="color: #657422;">extra_span =</span> .<span class="dv" style="color: #AD0000;">25</span>,</span>
<span id="cb18-20">    <span class="at" style="color: #657422;">true_range =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb18-21">    <span class="at" style="color: #657422;">bw =</span> .<span class="dv" style="color: #AD0000;">85</span>,</span>
<span id="cb18-22">    <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">0.09</span>,</span>
<span id="cb18-23">    <span class="at" style="color: #657422;">sorting =</span> <span class="st" style="color: #20794D;">"onset"</span></span>
<span id="cb18-24">  ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-25">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> colors_legend,</span>
<span id="cb18-26">                    <span class="at" style="color: #657422;">name =</span> <span class="cn" style="color: #8f5902;">NULL</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-27">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">2013</span>, <span class="dv" style="color: #AD0000;">2014</span>, <span class="dv" style="color: #AD0000;">2015</span>, <span class="dv" style="color: #AD0000;">2016</span>, <span class="dv" style="color: #AD0000;">2017</span>, <span class="dv" style="color: #AD0000;">2018</span>, <span class="dv" style="color: #AD0000;">2019</span>, <span class="dv" style="color: #AD0000;">2020</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-28">  <span class="fu" style="color: #4758AB;">theme_minimal</span>(<span class="at" style="color: #657422;">base_family =</span> <span class="st" style="color: #20794D;">"Bangers"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-29">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb18-30">    <span class="at" style="color: #657422;">plot.background =</span> <span class="fu" style="color: #4758AB;">element_rect</span>(<span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"grey84"</span>, <span class="at" style="color: #657422;">color =</span> <span class="cn" style="color: #8f5902;">NA</span>),</span>
<span id="cb18-31">    <span class="at" style="color: #657422;">panel.grid =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb18-32">    <span class="at" style="color: #657422;">axis.title =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb18-33">    <span class="at" style="color: #657422;">axis.text.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb18-34">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"bottom"</span>,</span>
<span id="cb18-35">    <span class="at" style="color: #657422;">legend.text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"grey40"</span>, <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">14</span>),</span>
<span id="cb18-36">    <span class="at" style="color: #657422;">legend.box.margin =</span> <span class="fu" style="color: #4758AB;">margin</span>(<span class="at" style="color: #657422;">t =</span> <span class="dv" style="color: #AD0000;">30</span>),</span>
<span id="cb18-37">    <span class="at" style="color: #657422;">legend.background =</span> <span class="fu" style="color: #4758AB;">element_rect</span>(<span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"grey40"</span>,</span>
<span id="cb18-38">                                     <span class="at" style="color: #657422;">size =</span> .<span class="dv" style="color: #AD0000;">3</span>,</span>
<span id="cb18-39">                                     <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"grey95"</span>),</span>
<span id="cb18-40">    <span class="at" style="color: #657422;">legend.key.height =</span> <span class="fu" style="color: #4758AB;">unit</span>(.<span class="dv" style="color: #AD0000;">25</span>, <span class="st" style="color: #20794D;">"lines"</span>),</span>
<span id="cb18-41">    <span class="at" style="color: #657422;">legend.key.width =</span> <span class="fu" style="color: #4758AB;">unit</span>(<span class="fl" style="color: #AD0000;">2.5</span>, <span class="st" style="color: #20794D;">"lines"</span>),</span>
<span id="cb18-42">    <span class="at" style="color: #657422;">plot.margin =</span> <span class="fu" style="color: #4758AB;">margin</span>(<span class="fu" style="color: #4758AB;">rep</span>(<span class="dv" style="color: #AD0000;">20</span>, <span class="dv" style="color: #AD0000;">4</span>))</span>
<span id="cb18-43">  ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-44">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Prior Generation Capacity (Gigawatts)"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-45">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">hjust =</span> <span class="fl" style="color: #AD0000;">0.5</span>))</span>
<span id="cb18-46">plot1</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/making-streamgraphs-in-r/making-streamgraphs-in-r_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">plot2 <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ggplot</span>(capacity, <span class="fu" style="color: #4758AB;">aes</span>(year, new, <span class="at" style="color: #657422;">fill =</span> type)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-2">  <span class="fu" style="color: #4758AB;">geom_stream</span>(</span>
<span id="cb19-3">    <span class="at" style="color: #657422;">extra_span =</span> .<span class="dv" style="color: #AD0000;">25</span>,</span>
<span id="cb19-4">    <span class="at" style="color: #657422;">true_range =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb19-5">    <span class="at" style="color: #657422;">bw =</span> .<span class="dv" style="color: #AD0000;">85</span>,</span>
<span id="cb19-6">    <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">1.25</span>,</span>
<span id="cb19-7">    <span class="at" style="color: #657422;">sorting =</span> <span class="st" style="color: #20794D;">"onset"</span></span>
<span id="cb19-8">  ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-9">  <span class="fu" style="color: #4758AB;">geom_stream</span>(</span>
<span id="cb19-10">    <span class="at" style="color: #657422;">geom =</span> <span class="st" style="color: #20794D;">"contour"</span>,</span>
<span id="cb19-11">    <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"white"</span>,</span>
<span id="cb19-12">    <span class="at" style="color: #657422;">extra_span =</span> .<span class="dv" style="color: #AD0000;">25</span>,</span>
<span id="cb19-13">    <span class="at" style="color: #657422;">true_range =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb19-14">    <span class="at" style="color: #657422;">bw =</span> .<span class="dv" style="color: #AD0000;">85</span>,</span>
<span id="cb19-15">    <span class="at" style="color: #657422;">size =</span> <span class="fl" style="color: #AD0000;">0.02</span>,</span>
<span id="cb19-16">    <span class="at" style="color: #657422;">sorting =</span> <span class="st" style="color: #20794D;">"onset"</span></span>
<span id="cb19-17">  ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-18">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> colors_legend,</span>
<span id="cb19-19">                    <span class="at" style="color: #657422;">name =</span> <span class="cn" style="color: #8f5902;">NULL</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-20">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">2013</span>, <span class="dv" style="color: #AD0000;">2014</span>, <span class="dv" style="color: #AD0000;">2015</span>, <span class="dv" style="color: #AD0000;">2016</span>, <span class="dv" style="color: #AD0000;">2017</span>, <span class="dv" style="color: #AD0000;">2018</span>, <span class="dv" style="color: #AD0000;">2019</span>, <span class="dv" style="color: #AD0000;">2020</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-21">  <span class="fu" style="color: #4758AB;">theme_minimal</span>(<span class="at" style="color: #657422;">base_family =</span> <span class="st" style="color: #20794D;">"Bangers"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-22">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb19-23">    <span class="at" style="color: #657422;">plot.background =</span> <span class="fu" style="color: #4758AB;">element_rect</span>(<span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"grey84"</span>, <span class="at" style="color: #657422;">color =</span> <span class="cn" style="color: #8f5902;">NA</span>),</span>
<span id="cb19-24">    <span class="at" style="color: #657422;">panel.grid =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb19-25">    <span class="at" style="color: #657422;">axis.title =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb19-26">    <span class="at" style="color: #657422;">axis.text.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb19-27">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb19-28">    <span class="at" style="color: #657422;">plot.margin =</span> <span class="fu" style="color: #4758AB;">margin</span>(<span class="fu" style="color: #4758AB;">rep</span>(<span class="dv" style="color: #AD0000;">20</span>, <span class="dv" style="color: #AD0000;">4</span>))</span>
<span id="cb19-29">  ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-30">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"New Generation Capacity (Gigawatts)"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-31">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">hjust =</span> <span class="fl" style="color: #AD0000;">0.5</span>))</span>
<span id="cb19-32">plot_final <span class="ot" style="color: #003B4F;">&lt;-</span> plot1 <span class="sc" style="color: #5E5E5E;">/</span> plot2 <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-33">  <span class="fu" style="color: #4758AB;">plot_annotation</span>(</span>
<span id="cb19-34">    <span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">'Power Generation Capacity'</span>,</span>
<span id="cb19-35">    <span class="at" style="color: #657422;">subtitle =</span> <span class="st" style="color: #20794D;">'The shreamcharts describe the power generation from various sources (solar, nuclear, wind, etc) along with &lt;br&gt;</span></span>
<span id="cb19-36"><span class="st" style="color: #20794D;">    their capacity over the years. The graphs are separated into New and Prior Generation &lt;br&gt; In Gigawatts. &lt;br&gt; '</span>,</span>
<span id="cb19-37">    <span class="at" style="color: #657422;">caption =</span> <span class="st" style="color: #20794D;">'Data: Berkeley Lab | Graphic: Github.com/SidhuK '</span>,</span>
<span id="cb19-38">    <span class="at" style="color: #657422;">theme =</span> <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb19-39">      <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">35</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="fl" style="color: #AD0000;">0.5</span>),</span>
<span id="cb19-40">      <span class="at" style="color: #657422;">plot.subtitle =</span> <span class="fu" style="color: #4758AB;">element_markdown</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">15</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="fl" style="color: #AD0000;">0.5</span>),</span>
<span id="cb19-41">      <span class="at" style="color: #657422;">plot.caption =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">11</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="fl" style="color: #AD0000;">0.5</span>),</span>
<span id="cb19-42">      <span class="at" style="color: #657422;">plot.background =</span> <span class="fu" style="color: #4758AB;">element_rect</span>(<span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"grey84"</span>, <span class="at" style="color: #657422;">color =</span> <span class="cn" style="color: #8f5902;">NA</span>)</span>
<span id="cb19-43">    )</span>
<span id="cb19-44">  ) <span class="sc" style="color: #5E5E5E;">&amp;</span></span>
<span id="cb19-45">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="st" style="color: #20794D;">'Bangers'</span>))</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">plot_final</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://karatsidhu.com/posts/making-streamgraphs-in-r/making-streamgraphs-in-r_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<section id="visit-my-tidytuesday-repo-for-a-better-look." class="level3">
<h3 class="anchored" data-anchor-id="visit-my-tidytuesday-repo-for-a-better-look.">Visit my TidyTuesday Repo for a better look.</h3>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {Making Streamgraphs in {R}},
  date = {2022-05-03},
  url = {https://karatsidhu.com/posts/making-streamgraphs-in-r/making-streamgraphs-in-r.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“Making Streamgraphs in R.”</span> May 3, 2022.
<a href="https://karatsidhu.com/posts/making-streamgraphs-in-r/making-streamgraphs-in-r.html">https://karatsidhu.com/posts/making-streamgraphs-in-r/making-streamgraphs-in-r.html</a>.
</div></div></section></div> ]]></description>
  <category>TidyTuesday</category>
  <category>Data-Viz</category>
  <category>TidyVerse</category>
  <guid>https://karatsidhu.com/posts/making-streamgraphs-in-r/making-streamgraphs-in-r.html</guid>
  <pubDate>Tue, 03 May 2022 05:00:00 GMT</pubDate>
</item>
<item>
  <title>Amazon Bestsellers Data Analysis</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/amazon-bestsellers-data-analysis.html</link>
  <description><![CDATA[ 




<section id="amazon-bestsellers" class="level1">
<h1>Amazon Bestsellers</h1>
</section>
<section id="loading-libraries" class="level1">
<h1>Loading libraries</h1>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">suppressPackageStartupMessages</span>(<span class="fu" style="color: #4758AB;">library</span>(tidyverse))</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">suppressPackageStartupMessages</span>(<span class="fu" style="color: #4758AB;">library</span>(skimr))</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">suppressPackageStartupMessages</span>(<span class="fu" style="color: #4758AB;">library</span>(corrplot))</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;">suppressPackageStartupMessages</span>(<span class="fu" style="color: #4758AB;">library</span>(RColorBrewer))</span></code></pre></div>
</section>
<section id="loading-data" class="level1">
<h1>Loading Data</h1>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">bestsellers <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">read.csv</span>(<span class="st" style="color: #20794D;">"bestsellers with categories.csv"</span>)</span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;">head</span>(bestsellers, <span class="dv" style="color: #AD0000;">2</span>)</span></code></pre></div>
<pre><code>##                            Name       Author User.Rating Reviews Price Year
## 1 10-Day Green Smoothie Cleanse     JJ Smith         4.7   17350     8 2016
## 2             11/22/63: A Novel Stephen King         4.6    2052    22 2011
##         Genre
## 1 Non Fiction
## 2     Fiction</code></pre>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;">str</span>(bestsellers)</span></code></pre></div>
<pre><code>## 'data.frame':    550 obs. of  7 variables:
##  $ Name       : chr  "10-Day Green Smoothie Cleanse" "11/22/63: A Novel" "12 Rules for Life: An Antidote to Chaos" "1984 (Signet Classics)" ...
##  $ Author     : chr  "JJ Smith" "Stephen King" "Jordan B. Peterson" "George Orwell" ...
##  $ User.Rating: num  4.7 4.6 4.7 4.7 4.8 4.4 4.7 4.7 4.7 4.6 ...
##  $ Reviews    : int  17350 2052 18979 21424 7665 12643 19735 19699 5983 23848 ...
##  $ Price      : int  8 22 15 6 12 11 30 15 3 8 ...
##  $ Year       : int  2016 2011 2018 2017 2019 2011 2014 2017 2018 2016 ...
##  $ Genre      : chr  "Non Fiction" "Fiction" "Non Fiction" "Fiction" ...</code></pre>
</section>
<section id="exploring-the-data" class="level1">
<h1>Exploring the Data</h1>
<section id="column-names" class="level2">
<h2 class="anchored" data-anchor-id="column-names">Column Names</h2>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">colnames</span>()</span></code></pre></div>
<pre><code>## [1] "Name"        "Author"      "User.Rating" "Reviews"     "Price"      
## [6] "Year"        "Genre"</code></pre>
</section>
<section id="checking-for-missing-values" class="level2">
<h2 class="anchored" data-anchor-id="checking-for-missing-values">Checking for missing Values</h2>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;">any</span>(<span class="fu" style="color: #4758AB;">is.na</span>(bestsellers))</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</section>
<section id="data-at-a-glance" class="level2">
<h2 class="anchored" data-anchor-id="data-at-a-glance">Data at a glance</h2>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="fu" style="color: #4758AB;">unique</span>(bestsellers<span class="sc" style="color: #5E5E5E;">$</span>Year)</span></code></pre></div>
<pre><code>##  [1] 2016 2011 2018 2017 2019 2014 2010 2009 2015 2013 2012</code></pre>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;">unique</span>(bestsellers<span class="sc" style="color: #5E5E5E;">$</span>Genre)</span></code></pre></div>
<pre><code>## [1] "Non Fiction" "Fiction"</code></pre>
</section>
<section id="data-distribution" class="level2">
<h2 class="anchored" data-anchor-id="data-distribution">Data Distribution</h2>
<div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;">skim</span>(bestsellers)</span></code></pre></div>
<table class="table">
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">bestsellers</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">550</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p>Data summary</p>
<p><strong>Variable type: character</strong></p>
<table class="table">
<colgroup>
<col style="width: 18%">
<col style="width: 13%">
<col style="width: 18%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">121</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">351</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Author</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">248</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Genre</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table">
<colgroup>
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">User.Rating</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4.62</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">4.7</td>
<td style="text-align: right;">4.80</td>
<td style="text-align: right;">4.9</td>
<td style="text-align: left;">▁▁▁▂▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">Reviews</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">11953.28</td>
<td style="text-align: right;">11731.13</td>
<td style="text-align: right;">37.0</td>
<td style="text-align: right;">4058.0</td>
<td style="text-align: right;">8580.0</td>
<td style="text-align: right;">17253.25</td>
<td style="text-align: right;">87841.0</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Price</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">13.10</td>
<td style="text-align: right;">10.84</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">7.0</td>
<td style="text-align: right;">11.0</td>
<td style="text-align: right;">16.00</td>
<td style="text-align: right;">105.0</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Year</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2014.00</td>
<td style="text-align: right;">3.17</td>
<td style="text-align: right;">2009.0</td>
<td style="text-align: right;">2011.0</td>
<td style="text-align: right;">2014.0</td>
<td style="text-align: right;">2017.00</td>
<td style="text-align: right;">2019.0</td>
<td style="text-align: left;">▇▅▅▅▅</td>
</tr>
</tbody>
</table>
</section>
<section id="all-data-formats-look-good-no-conversion-needed-for-now" class="level2">
<h2 class="anchored" data-anchor-id="all-data-formats-look-good-no-conversion-needed-for-now">all data formats look good, no conversion needed for now</h2>
</section>
</section>
<section id="data-visualization" class="level1">
<h1>Data Visualization</h1>
</section>
<section id="genres" class="level1">
<h1>Genres</h1>
<section id="bestsellers-distribution-by-genre" class="level2">
<h2 class="anchored" data-anchor-id="bestsellers-distribution-by-genre">Bestsellers distribution by genre</h2>
<div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-2">  <span class="fu" style="color: #4758AB;">group_by</span>(Genre) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-3">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">books =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">""</span>, <span class="at" style="color: #657422;">y =</span> books, <span class="at" style="color: #657422;">fill =</span> Genre)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-5">  <span class="fu" style="color: #4758AB;">geom_bar</span>(<span class="at" style="color: #657422;">stat =</span> <span class="st" style="color: #20794D;">"identity"</span>,</span>
<span id="cb15-6">           <span class="at" style="color: #657422;">width =</span> <span class="dv" style="color: #AD0000;">1</span>,</span>
<span id="cb15-7">           <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"white"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-8">  <span class="fu" style="color: #4758AB;">coord_polar</span>(<span class="st" style="color: #20794D;">"y"</span>, <span class="at" style="color: #657422;">start =</span> <span class="dv" style="color: #AD0000;">0</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-9">  <span class="fu" style="color: #4758AB;">theme_void</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-10">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#ff9900"</span>, <span class="st" style="color: #20794D;">"#000000"</span>))</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-8-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
<section id="genres-through-the-years" class="level1">
<h1>Genres through the years</h1>
<section id="bestsellers-distribution-by-genre-by-year" class="level2">
<h2 class="anchored" data-anchor-id="bestsellers-distribution-by-genre-by-year">Bestsellers distribution by genre by year</h2>
<div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-2">  <span class="fu" style="color: #4758AB;">group_by</span>(Year, Genre) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-3">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">sum =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb16-5">    <span class="at" style="color: #657422;">x =</span> Year,</span>
<span id="cb16-6">    <span class="at" style="color: #657422;">y =</span> sum,</span>
<span id="cb16-7">    <span class="at" style="color: #657422;">fill =</span> Genre</span>
<span id="cb16-8">  )) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-9">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-10">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-11">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">2009</span>, <span class="dv" style="color: #AD0000;">2019</span>, <span class="at" style="color: #657422;">by =</span> <span class="dv" style="color: #AD0000;">1</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-12">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#ff9900"</span>, <span class="st" style="color: #20794D;">"#000000"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-13">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb16-14">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb16-15">    <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb16-16">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb16-17">    <span class="at" style="color: #657422;">legend.title =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb16-18">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()</span>
<span id="cb16-19">  )</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by 'Year'. You can override using the
## `.groups` argument.</code></pre>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-9-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
<section id="correlation-analysis" class="level1">
<h1>Correlation Analysis</h1>
<section id="is-there-any-correlation-seen-between-the-different-numerical-variables" class="level2">
<h2 class="anchored" data-anchor-id="is-there-any-correlation-seen-between-the-different-numerical-variables">Is there any correlation seen between the different numerical variables?</h2>
<div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb18-2">  <span class="fu" style="color: #4758AB;">select</span>(User.Rating, Reviews, Price, Year) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb18-3">  <span class="fu" style="color: #4758AB;">cor</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb18-4">  corrplot<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">corrplot</span>(</span>
<span id="cb18-5">    <span class="at" style="color: #657422;">type =</span> <span class="st" style="color: #20794D;">"lower"</span>,</span>
<span id="cb18-6">    <span class="at" style="color: #657422;">order =</span> <span class="st" style="color: #20794D;">"hclust"</span>,</span>
<span id="cb18-7">    <span class="at" style="color: #657422;">method =</span> <span class="st" style="color: #20794D;">"color"</span>,</span>
<span id="cb18-8">    <span class="at" style="color: #657422;">addgrid.col =</span> <span class="st" style="color: #20794D;">"darkgray"</span>,</span>
<span id="cb18-9">    <span class="at" style="color: #657422;">outline =</span> T,</span>
<span id="cb18-10">    <span class="at" style="color: #657422;">tl.cex =</span> <span class="dv" style="color: #AD0000;">1</span>,</span>
<span id="cb18-11">    <span class="at" style="color: #657422;">tl.col =</span> <span class="st" style="color: #20794D;">"black"</span>,</span>
<span id="cb18-12">    <span class="at" style="color: #657422;">col =</span> <span class="fu" style="color: #4758AB;">brewer.pal</span>(<span class="at" style="color: #657422;">n =</span> <span class="dv" style="color: #AD0000;">6</span>, <span class="at" style="color: #657422;">name =</span> <span class="st" style="color: #20794D;">"RdGy"</span>)</span>
<span id="cb18-13">  )</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-10-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
<section id="user-reviews-vs-year" class="level1">
<h1>User Reviews vs Year</h1>
<section id="most-reviewed-books" class="level2">
<h2 class="anchored" data-anchor-id="most-reviewed-books">Most reviewed books</h2>
<div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb19-2">  <span class="fu" style="color: #4758AB;">select</span>(Name, Reviews) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb19-3">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(Reviews)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb19-4">  <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">20</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb19-5">  <span class="fu" style="color: #4758AB;">distinct</span>()</span></code></pre></div>
<pre><code>##                                                                                        Name
## 1                                                                   Where the Crawdads Sing
## 2                                                                     The Girl on the Train
## 3                                                                                  Becoming
## 4                                                                                 Gone Girl
## 5                                                                    The Fault in Our Stars
## 6                                                                  The Nightingale: A Novel
## 7  Fifty Shades of Grey: Book One of the Fifty Shades Trilogy (Fifty Shades of Grey Series)
## 8                                                                               The Martian
## 9                                                               All the Light We Cannot See
## 10                                                                            The Alchemist
##    Reviews
## 1    87841
## 2    79446
## 3    61133
## 4    57271
## 5    50482
## 6    49288
## 7    47265
## 8    39459
## 9    36348
## 10   35799</code></pre>
</section>
<section id="are-the-number-of-reviews-changing-by-year" class="level2">
<h2 class="anchored" data-anchor-id="are-the-number-of-reviews-changing-by-year">Are the number of reviews changing by year?</h2>
<section id="linear-model" class="level3">
<h3 class="anchored" data-anchor-id="linear-model">Linear Model</h3>
<div class="sourceCode" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb21-2">  <span class="fu" style="color: #4758AB;">lm</span>(<span class="at" style="color: #657422;">formula =</span> Year <span class="sc" style="color: #5E5E5E;">~</span> Reviews) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb21-3">  <span class="fu" style="color: #4758AB;">summary</span>()</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Year ~ Reviews, data = .)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -5.5523 -2.5991 -0.3255  2.5354  5.6549 
## 
## Coefficients:
##              Estimate Std. Error   t value Pr(&gt;|t|)    
## (Intercept) 2.013e+03  1.861e-01 10816.121  &lt; 2e-16 ***
## Reviews     7.111e-05  1.112e-05     6.396 3.42e-10 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 3.056 on 548 degrees of freedom
## Multiple R-squared:  0.06946,    Adjusted R-squared:  0.06777 
## F-statistic: 40.91 on 1 and 548 DF,  p-value: 3.423e-10</code></pre>
</section>
<section id="data-viz" class="level3">
<h3 class="anchored" data-anchor-id="data-viz">Data Viz</h3>
<div class="sourceCode" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb23-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(Year, Reviews, <span class="at" style="color: #657422;">color =</span> Genre))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-3"> <span class="fu" style="color: #4758AB;">geom_jitter</span>()<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-4"> <span class="fu" style="color: #4758AB;">geom_smooth</span>(<span class="at" style="color: #657422;">method =</span> <span class="st" style="color: #20794D;">'lm'</span>, <span class="at" style="color: #657422;">formula =</span> y <span class="sc" style="color: #5E5E5E;">~</span> x )<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-5">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-6">    <span class="fu" style="color: #4758AB;">scale_color_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#ff9900"</span>, <span class="st" style="color: #20794D;">"#000000"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-7">    <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">2009</span>, <span class="dv" style="color: #AD0000;">2019</span>, <span class="at" style="color: #657422;">by =</span> <span class="dv" style="color: #AD0000;">1</span>))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-8">   <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb23-9">    <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb23-10">    <span class="at" style="color: #657422;">legend.title =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb23-11">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()</span>
<span id="cb23-12">  )</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-13-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
</section>
<section id="reviews-distribution" class="level1">
<h1>Reviews Distribution</h1>
<div class="sourceCode" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb24-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(Reviews, ..density..)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb24-3">  <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"#ff9900"</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">'black'</span>,<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">1000</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb24-4">    <span class="fu" style="color: #4758AB;">geom_density</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.5</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"#ff9900"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb24-5">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb24-6">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb24-7">    <span class="at" style="color: #657422;">panel.grid.major =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-14-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="user-ratings-vs-year" class="level1">
<h1>User Ratings vs Year</h1>
<section id="highest-rated-books" class="level2">
<h2 class="anchored" data-anchor-id="highest-rated-books">Highest Rated Books</h2>
<div class="sourceCode" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb25-2">  <span class="fu" style="color: #4758AB;">select</span>(Name, User.Rating) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb25-3">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(User.Rating)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb25-4">  <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">20</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb25-5">  <span class="fu" style="color: #4758AB;">distinct</span>()</span></code></pre></div>
<pre><code>##                                                                                               Name
## 1                                                         Brown Bear, Brown Bear, What Do You See?
## 2                         Dog Man and Cat Kid: From the Creator of Captain Underpants (Dog Man #4)
## 3              Dog Man: A Tale of Two Kitties: From the Creator of Captain Underpants (Dog Man #3)
## 4                  Dog Man: Brawl of the Wild: From the Creator of Captain Underpants (Dog Man #6)
## 5                           Dog Man: Fetch-22: From the Creator of Captain Underpants (Dog Man #8)
## 6            Dog Man: For Whom the Ball Rolls: From the Creator of Captain Underpants (Dog Man #7)
## 7                  Dog Man: Lord of the Fleas: From the Creator of Captain Underpants (Dog Man #5)
## 8  Goodnight, Goodnight Construction Site (Hardcover Books for Toddlers, Preschool Books for Kids)
## 9                                                                         Hamilton: The Revolution
## 10         Harry Potter and the Chamber of Secrets: The Illustrated Edition (Harry Potter, Book 2)
## 11         Harry Potter and the Goblet of Fire: The Illustrated Edition (Harry Potter, Book 4) (4)
## 12        Harry Potter and the Prisoner of Azkaban: The Illustrated Edition (Harry Potter, Book 3)
## 13           Harry Potter and the Sorcerer's Stone: The Illustrated Edition (Harry Potter, Book 1)
## 14                                                                    Humans of New York : Stories
## 15                       Jesus Calling: Enjoying Peace in His Presence (with Scripture References)
##    User.Rating
## 1          4.9
## 2          4.9
## 3          4.9
## 4          4.9
## 5          4.9
## 6          4.9
## 7          4.9
## 8          4.9
## 9          4.9
## 10         4.9
## 11         4.9
## 12         4.9
## 13         4.9
## 14         4.9
## 15         4.9</code></pre>
</section>
<section id="are-users-rating-the-bestsellers-differently-by-year" class="level2">
<h2 class="anchored" data-anchor-id="are-users-rating-the-bestsellers-differently-by-year">Are users rating the bestsellers differently by year?</h2>
<section id="linear-model-1" class="level3">
<h3 class="anchored" data-anchor-id="linear-model-1">Linear Model</h3>
<div class="sourceCode" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb27-2">  <span class="fu" style="color: #4758AB;">lm</span>(<span class="at" style="color: #657422;">formula =</span> Year <span class="sc" style="color: #5E5E5E;">~</span> Reviews) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb27-3">  <span class="fu" style="color: #4758AB;">summary</span>()</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Year ~ Reviews, data = .)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -5.5523 -2.5991 -0.3255  2.5354  5.6549 
## 
## Coefficients:
##              Estimate Std. Error   t value Pr(&gt;|t|)    
## (Intercept) 2.013e+03  1.861e-01 10816.121  &lt; 2e-16 ***
## Reviews     7.111e-05  1.112e-05     6.396 3.42e-10 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 3.056 on 548 degrees of freedom
## Multiple R-squared:  0.06946,    Adjusted R-squared:  0.06777 
## F-statistic: 40.91 on 1 and 548 DF,  p-value: 3.423e-10</code></pre>
</section>
<section id="data-viz-1" class="level3">
<h3 class="anchored" data-anchor-id="data-viz-1">Data Viz</h3>
<div class="sourceCode" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb29-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(Year, User.Rating, <span class="at" style="color: #657422;">color =</span> Genre))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb29-3"> <span class="fu" style="color: #4758AB;">geom_jitter</span>()<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb29-4"> <span class="fu" style="color: #4758AB;">geom_smooth</span>(<span class="at" style="color: #657422;">method =</span> <span class="st" style="color: #20794D;">'lm'</span>, <span class="at" style="color: #657422;">formula =</span> y <span class="sc" style="color: #5E5E5E;">~</span> x )<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb29-5">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb29-6">    <span class="fu" style="color: #4758AB;">scale_color_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#ff9900"</span>, <span class="st" style="color: #20794D;">"#000000"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb29-7">    <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">2009</span>, <span class="dv" style="color: #AD0000;">2019</span>, <span class="at" style="color: #657422;">by =</span> <span class="dv" style="color: #AD0000;">1</span>))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb29-8">   <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb29-9">    <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb29-10">    <span class="at" style="color: #657422;">legend.title =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb29-11">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()</span>
<span id="cb29-12">  )</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-17-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
</section>
<section id="ratings-distribution" class="level1">
<h1>Ratings Distribution</h1>
<div class="sourceCode" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb30-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(User.Rating, ..density..)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb30-3">  <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"#ff9900"</span>,</span>
<span id="cb30-4">                 <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">'black'</span>,</span>
<span id="cb30-5">                 <span class="at" style="color: #657422;">binwidth =</span> <span class="fl" style="color: #AD0000;">0.1</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb30-6">  <span class="fu" style="color: #4758AB;">geom_density</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.5</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"#ff9900"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb30-7">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb30-8">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">panel.grid.major =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-18-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="ratings-vs-reviews" class="level1">
<h1>Ratings vs Reviews</h1>
<div class="sourceCode" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="fu" style="color: #4758AB;">ggplot</span>(bestsellers) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb31-2">  <span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb31-3">    <span class="at" style="color: #657422;">x =</span> Reviews,</span>
<span id="cb31-4">    <span class="at" style="color: #657422;">y =</span> User.Rating,</span>
<span id="cb31-5">    <span class="at" style="color: #657422;">colour =</span> Genre,</span>
<span id="cb31-6">    <span class="at" style="color: #657422;">size =</span> Reviews</span>
<span id="cb31-7">  ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb31-8">  <span class="fu" style="color: #4758AB;">geom_jitter</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.45</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb31-9">  <span class="fu" style="color: #4758AB;">scale_color_manual</span>(</span>
<span id="cb31-10">    <span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="at" style="color: #657422;">Fiction =</span> <span class="st" style="color: #20794D;">"#ff9900"</span>,</span>
<span id="cb31-11">    <span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Non Fiction</span><span class="st" style="color: #20794D;">`</span> <span class="ot" style="color: #003B4F;">=</span> <span class="st" style="color: #20794D;">"#000000"</span>)</span>
<span id="cb31-12">  ) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb31-13">  <span class="fu" style="color: #4758AB;">theme_minimal</span>()</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-19-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="price" class="level1">
<h1>Price</h1>
<section id="is-there-a-substantial-change-in-price-over-the-years" class="level2">
<h2 class="anchored" data-anchor-id="is-there-a-substantial-change-in-price-over-the-years">Is there a substantial change in price over the years?</h2>
<section id="linear-model-2" class="level3">
<h3 class="anchored" data-anchor-id="linear-model-2">Linear Model</h3>
<div class="sourceCode" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb32-2">  <span class="fu" style="color: #4758AB;">lm</span>(<span class="at" style="color: #657422;">formula =</span> Year <span class="sc" style="color: #5E5E5E;">~</span> Price) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb32-3">  <span class="fu" style="color: #4758AB;">summary</span>()</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Year ~ Price, data = .)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -5.5439 -2.6449 -0.0944  2.7708  5.6248 
## 
## Coefficients:
##               Estimate Std. Error  t value Pr(&gt;|t|)    
## (Intercept) 2014.58885    0.20945 9618.334  &lt; 2e-16 ***
## Price         -0.04495    0.01232   -3.648 0.000289 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 3.13 on 548 degrees of freedom
## Multiple R-squared:  0.02371,    Adjusted R-squared:  0.02193 
## F-statistic: 13.31 on 1 and 548 DF,  p-value: 0.0002895</code></pre>
<div class="sourceCode" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb34-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(Year, Price, <span class="at" style="color: #657422;">color =</span> Genre))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb34-3"> <span class="fu" style="color: #4758AB;">geom_jitter</span>()<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb34-4"> <span class="fu" style="color: #4758AB;">geom_smooth</span>(<span class="at" style="color: #657422;">method =</span> <span class="st" style="color: #20794D;">'lm'</span>, <span class="at" style="color: #657422;">formula =</span> y <span class="sc" style="color: #5E5E5E;">~</span> x )<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb34-5">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb34-6">    <span class="fu" style="color: #4758AB;">scale_color_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#ff9900"</span>, <span class="st" style="color: #20794D;">"#000000"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb34-7">    <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">2009</span>, <span class="dv" style="color: #AD0000;">2019</span>, <span class="at" style="color: #657422;">by =</span> <span class="dv" style="color: #AD0000;">1</span>))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb34-8">   <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb34-9">    <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb34-10">    <span class="at" style="color: #657422;">legend.title =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb34-11">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()</span>
<span id="cb34-12">  )</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-21-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
</section>
<section id="price-distribution" class="level1">
<h1>Price Distribution</h1>
<div class="sourceCode" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb35-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(Price, ..density..)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb35-3">  <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"#ff9900"</span>,</span>
<span id="cb35-4">                 <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">'black'</span>,</span>
<span id="cb35-5">                 <span class="at" style="color: #657422;">binwidth =</span> <span class="fl" style="color: #AD0000;">1.3</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb35-6">  <span class="fu" style="color: #4758AB;">geom_density</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.5</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"#ff9900"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb35-7">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb35-8">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">panel.grid.major =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-22-1.png" class="img-fluid"><!-- --></p>
<section id="most-expensive-books" class="level2">
<h2 class="anchored" data-anchor-id="most-expensive-books">Most Expensive Books</h2>
<div class="sourceCode" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb36-2">  <span class="fu" style="color: #4758AB;">select</span>(Name, Price) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb36-3">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(Price)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb36-4">  <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">20</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb36-5">  <span class="fu" style="color: #4758AB;">distinct</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb36-6">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span><span class="fu" style="color: #4758AB;">reorder</span>(Name, Price), <span class="at" style="color: #657422;">y =</span> Price,</span>
<span id="cb36-7">              <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(Price <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">max</span>(Price), <span class="st" style="color: #20794D;">"red"</span>,<span class="st" style="color: #20794D;">"grey"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb36-8">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb36-9">  <span class="fu" style="color: #4758AB;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb36-10">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#000000"</span>, <span class="st" style="color: #20794D;">"#ff9900"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb36-11">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb36-12">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb36-13">    <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb36-14">    <span class="at" style="color: #657422;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb36-15">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb36-16">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()</span>
<span id="cb36-17">  )</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-23-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
<section id="authors" class="level1">
<h1>Authors</h1>
</section>
<section id="most-instances-on-the-best-seller-list" class="level1">
<h1>Most Instances on the best seller list</h1>
<div class="sourceCode" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb37-2">  <span class="fu" style="color: #4758AB;">group_by</span>(Author) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb37-3">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">count =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb37-4">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(count)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb37-5">  <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">10</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb37-6">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span><span class="fu" style="color: #4758AB;">reorder</span>(Author, count), <span class="at" style="color: #657422;">y =</span> count,</span>
<span id="cb37-7">              <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(count <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">max</span>(count), <span class="st" style="color: #20794D;">"red"</span>,<span class="st" style="color: #20794D;">"grey"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb37-8">  <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">13</span>, <span class="at" style="color: #657422;">by =</span> <span class="dv" style="color: #AD0000;">1</span>))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb37-9">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb37-10">  <span class="fu" style="color: #4758AB;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb37-11">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#000000"</span>, <span class="st" style="color: #20794D;">"#ff9900"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb37-12">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb37-13">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb37-14">    <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb37-15">    <span class="at" style="color: #657422;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb37-16">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb37-17">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()</span>
<span id="cb37-18">  )</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-24-1.png" class="img-fluid"><!-- --></p>
<section id="what-were-their-books" class="level3">
<h3 class="anchored" data-anchor-id="what-were-their-books">What were their books?</h3>
<div class="sourceCode" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb38-2">  <span class="fu" style="color: #4758AB;">filter</span>(Author<span class="sc" style="color: #5E5E5E;">==</span><span class="st" style="color: #20794D;">"Jeff Kinney"</span>)</span></code></pre></div>
<pre><code>##                                                  Name      Author User.Rating
## 1          Cabin Fever (Diary of a Wimpy Kid, Book 6) Jeff Kinney         4.8
## 2             Diary of a Wimpy Kid: Hard Luck, Book 8 Jeff Kinney         4.8
## 3       Diary of a Wimpy Kid: The Last Straw (Book 3) Jeff Kinney         4.8
## 4                 Diary of a Wimpy Kid: The Long Haul Jeff Kinney         4.8
## 5  Dog Days (Diary of a Wimpy Kid, Book 4) (Volume 4) Jeff Kinney         4.8
## 6              Double Down (Diary of a Wimpy Kid #11) Jeff Kinney         4.8
## 7               Old School (Diary of a Wimpy Kid #10) Jeff Kinney         4.8
## 8                                         The Getaway Jeff Kinney         4.8
## 9         The Meltdown (Diary of a Wimpy Kid Book 13) Jeff Kinney         4.8
## 10     The Third Wheel (Diary of a Wimpy Kid, Book 7) Jeff Kinney         4.7
## 11      The Ugly Truth (Diary of a Wimpy Kid, Book 5) Jeff Kinney         4.8
## 12       Wrecking Ball (Diary of a Wimpy Kid Book 14) Jeff Kinney         4.9
##    Reviews Price Year   Genre
## 1     4505     0 2011 Fiction
## 2     6812     0 2013 Fiction
## 3     3837    15 2009 Fiction
## 4     6540    22 2014 Fiction
## 5     3181    12 2009 Fiction
## 6     5118    20 2016 Fiction
## 7     6169     7 2015 Fiction
## 8     5836     0 2017 Fiction
## 9     5898     8 2018 Fiction
## 10    6377     7 2012 Fiction
## 11    3796    12 2010 Fiction
## 12    9413     8 2019 Fiction</code></pre>
</section>
</section>
<section id="books" class="level1">
<h1>Books</h1>
<section id="most-instances-on-the-best-sellers-list" class="level2">
<h2 class="anchored" data-anchor-id="most-instances-on-the-best-sellers-list">Most instances on the best sellers list</h2>
<div class="sourceCode" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1">bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb40-2">  <span class="fu" style="color: #4758AB;">group_by</span>(Name) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb40-3">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">count =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb40-4">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(count)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb40-5">  <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">10</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb40-6">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span><span class="fu" style="color: #4758AB;">reorder</span>(Name, count), <span class="at" style="color: #657422;">y =</span> count,</span>
<span id="cb40-7">              <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(count <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">max</span>(count), <span class="st" style="color: #20794D;">"red"</span>,<span class="st" style="color: #20794D;">"grey"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb40-8">    <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">breaks =</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">13</span>, <span class="at" style="color: #657422;">by =</span> <span class="dv" style="color: #AD0000;">1</span>))<span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb40-9">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb40-10">  <span class="fu" style="color: #4758AB;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb40-11">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#000000"</span>, <span class="st" style="color: #20794D;">"#ff9900"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb40-12">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb40-13">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb40-14">    <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb40-15">    <span class="at" style="color: #657422;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb40-16">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb40-17">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()</span>
<span id="cb40-18">  )</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-26-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
<section id="k---means-clustering" class="level1">
<h1>K - Means Clustering</h1>
<div class="sourceCode" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1">data_kmeans <span class="ot" style="color: #003B4F;">&lt;-</span> bestsellers[<span class="dv" style="color: #AD0000;">3</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">6</span>]</span>
<span id="cb41-2">data_kmeans <span class="ot" style="color: #003B4F;">&lt;-</span> data_kmeans <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb41-3">  <span class="fu" style="color: #4758AB;">slice</span>(<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">20</span>)</span></code></pre></div>
<div class="sourceCode" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><span class="fu" style="color: #4758AB;">library</span>(factoextra)</span></code></pre></div>
<pre><code>## Welcome! Want to learn more? See two factoextra-related books at https://goo.gl/ve3WBa</code></pre>
<div class="sourceCode" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1">data_kmeans <span class="ot" style="color: #003B4F;">&lt;-</span> bestsellers[<span class="dv" style="color: #AD0000;">3</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">6</span>]</span>
<span id="cb44-2">data_kmeans <span class="ot" style="color: #003B4F;">&lt;-</span> data_kmeans <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb44-3">  <span class="fu" style="color: #4758AB;">slice</span>(<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">20</span>)</span>
<span id="cb44-4"></span>
<span id="cb44-5">data_kmeans_scaled <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">scale</span>(data_kmeans)</span>
<span id="cb44-6">data_kmeans <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">dist</span>(data_kmeans_scaled)</span>
<span id="cb44-7"><span class="fu" style="color: #4758AB;">fviz_nbclust</span>(data_kmeans_scaled, kmeans,</span>
<span id="cb44-8">             <span class="at" style="color: #657422;">method =</span> <span class="st" style="color: #20794D;">"wss"</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># wss means within sum squares</span></span>
<span id="cb44-9">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">subtitle =</span> <span class="st" style="color: #20794D;">"Elbow Method"</span>)</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-28-1.png" class="img-fluid"><!-- --></p>
<div class="sourceCode" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1">kmeans_output <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">kmeans</span>(data_kmeans_scaled, <span class="at" style="color: #657422;">centers =</span> <span class="dv" style="color: #AD0000;">3</span>, <span class="at" style="color: #657422;">nstart =</span> <span class="dv" style="color: #AD0000;">100</span>)</span>
<span id="cb45-2">kmeans_output.clusters <span class="ot" style="color: #003B4F;">&lt;-</span> kmeans_output<span class="sc" style="color: #5E5E5E;">$</span>cluster</span></code></pre></div>
<div class="sourceCode" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1">bestsellers_mini <span class="ot" style="color: #003B4F;">&lt;-</span> bestsellers <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb46-2">  <span class="fu" style="color: #4758AB;">slice</span>(<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">20</span>)</span></code></pre></div>
<div class="sourceCode" id="cb47" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><span class="fu" style="color: #4758AB;">rownames</span>(data_kmeans_scaled) <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">paste</span>(bestsellers_mini<span class="sc" style="color: #5E5E5E;">$</span>Name, <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="fu" style="color: #4758AB;">dim</span>(bestsellers_mini)[<span class="dv" style="color: #AD0000;">1</span>], <span class="at" style="color: #657422;">sep=</span><span class="st" style="color: #20794D;">"_"</span>)</span></code></pre></div>
<div class="sourceCode" id="cb48" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><span class="fu" style="color: #4758AB;">fviz_cluster</span>(<span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">data =</span> data_kmeans_scaled, <span class="at" style="color: #657422;">cluster =</span> kmeans_output.clusters)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb48-2">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb48-3">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">plot.subtitle =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">12</span>,</span>
<span id="cb48-4">                               <span class="at" style="color: #657422;">face =</span> <span class="st" style="color: #20794D;">"italic"</span>),</span>
<span id="cb48-5">  <span class="at" style="color: #657422;">plot.caption =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">9</span>),</span>
<span id="cb48-6">  <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">15</span>,</span>
<span id="cb48-7">                            <span class="at" style="color: #657422;">face =</span> <span class="st" style="color: #20794D;">"bold"</span>)</span>
<span id="cb48-8">) <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">labs</span>(</span>
<span id="cb48-9">  <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"Cluster"</span>,</span>
<span id="cb48-10">  <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"Cluster"</span>,</span>
<span id="cb48-11">  <span class="at" style="color: #657422;">shape =</span> <span class="st" style="color: #20794D;">"Cluster"</span>,</span>
<span id="cb48-12">)</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-32-1.png" class="img-fluid"><!-- --></p>
<div class="sourceCode" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1">test <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">table</span>(kmeans_output.clusters, bestsellers_mini<span class="sc" style="color: #5E5E5E;">$</span>Name)</span>
<span id="cb49-2"><span class="fu" style="color: #4758AB;">as.data.frame</span>(test)</span></code></pre></div>
<pre><code>##    kmeans_output.clusters
## 1                       1
## 2                       2
## 3                       3
## 4                       1
## 5                       2
## 6                       3
## 7                       1
## 8                       2
## 9                       3
## 10                      1
## 11                      2
## 12                      3
## 13                      1
## 14                      2
## 15                      3
## 16                      1
## 17                      2
## 18                      3
## 19                      1
## 20                      2
## 21                      3
## 22                      1
## 23                      2
## 24                      3
## 25                      1
## 26                      2
## 27                      3
## 28                      1
## 29                      2
## 30                      3
## 31                      1
## 32                      2
## 33                      3
## 34                      1
## 35                      2
## 36                      3
## 37                      1
## 38                      2
## 39                      3
## 40                      1
## 41                      2
## 42                      3
## 43                      1
## 44                      2
## 45                      3
## 46                      1
## 47                      2
## 48                      3
## 49                      1
## 50                      2
## 51                      3
## 52                      1
## 53                      2
## 54                      3
## 55                      1
## 56                      2
## 57                      3
##                                                                                                                     Var2
## 1                                                                                          10-Day Green Smoothie Cleanse
## 2                                                                                          10-Day Green Smoothie Cleanse
## 3                                                                                          10-Day Green Smoothie Cleanse
## 4                                                                                                      11/22/63: A Novel
## 5                                                                                                      11/22/63: A Novel
## 6                                                                                                      11/22/63: A Novel
## 7                                                                                12 Rules for Life: An Antidote to Chaos
## 8                                                                                12 Rules for Life: An Antidote to Chaos
## 9                                                                                12 Rules for Life: An Antidote to Chaos
## 10                                                                                                1984 (Signet Classics)
## 11                                                                                                1984 (Signet Classics)
## 12                                                                                                1984 (Signet Classics)
## 13                                                    5,000 Awesome Facts (About Everything!) (National Geographic Kids)
## 14                                                    5,000 Awesome Facts (About Everything!) (National Geographic Kids)
## 15                                                    5,000 Awesome Facts (About Everything!) (National Geographic Kids)
## 16                                                                         A Dance with Dragons (A Song of Ice and Fire)
## 17                                                                         A Dance with Dragons (A Song of Ice and Fire)
## 18                                                                         A Dance with Dragons (A Song of Ice and Fire)
## 19                    A Game of Thrones / A Clash of Kings / A Storm of Swords / A Feast of Crows / A Dance with Dragons
## 20                    A Game of Thrones / A Clash of Kings / A Storm of Swords / A Feast of Crows / A Dance with Dragons
## 21                    A Game of Thrones / A Clash of Kings / A Storm of Swords / A Feast of Crows / A Dance with Dragons
## 22                                                                                        A Gentleman in Moscow: A Novel
## 23                                                                                        A Gentleman in Moscow: A Novel
## 24                                                                                        A Gentleman in Moscow: A Novel
## 25                                                                         A Higher Loyalty: Truth, Lies, and Leadership
## 26                                                                         A Higher Loyalty: Truth, Lies, and Leadership
## 27                                                                         A Higher Loyalty: Truth, Lies, and Leadership
## 28                                                                                             A Man Called Ove: A Novel
## 29                                                                                             A Man Called Ove: A Novel
## 30                                                                                             A Man Called Ove: A Novel
## 31                        A Patriot's History of the United States: From Columbus's Great Discovery to the War on Terror
## 32                        A Patriot's History of the United States: From Columbus's Great Discovery to the War on Terror
## 33                        A Patriot's History of the United States: From Columbus's Great Discovery to the War on Terror
## 34                                                                                               A Stolen Life: A Memoir
## 35                                                                                               A Stolen Life: A Memoir
## 36                                                                                               A Stolen Life: A Memoir
## 37                                                                                      A Wrinkle in Time (Time Quintet)
## 38                                                                                      A Wrinkle in Time (Time Quintet)
## 39                                                                                      A Wrinkle in Time (Time Quintet)
## 40          Act Like a Lady, Think Like a Man: What Men Really Think About Love, Relationships, Intimacy, and Commitment
## 41          Act Like a Lady, Think Like a Man: What Men Really Think About Love, Relationships, Intimacy, and Commitment
## 42          Act Like a Lady, Think Like a Man: What Men Really Think About Love, Relationships, Intimacy, and Commitment
## 43     Adult Coloring Book Designs: Stress Relief Coloring Book: Garden Designs, Mandalas, Animals, and Paisley Patterns
## 44     Adult Coloring Book Designs: Stress Relief Coloring Book: Garden Designs, Mandalas, Animals, and Paisley Patterns
## 45     Adult Coloring Book Designs: Stress Relief Coloring Book: Garden Designs, Mandalas, Animals, and Paisley Patterns
## 46                                                                  Adult Coloring Book: Stress Relieving Animal Designs
## 47                                                                  Adult Coloring Book: Stress Relieving Animal Designs
## 48                                                                  Adult Coloring Book: Stress Relieving Animal Designs
## 49                                                                        Adult Coloring Book: Stress Relieving Patterns
## 50                                                                        Adult Coloring Book: Stress Relieving Patterns
## 51                                                                        Adult Coloring Book: Stress Relieving Patterns
## 52 Adult Coloring Books: A Coloring Book for Adults Featuring Mandalas and Henna Inspired Flowers, Animals, and Paisley…
## 53 Adult Coloring Books: A Coloring Book for Adults Featuring Mandalas and Henna Inspired Flowers, Animals, and Paisley…
## 54 Adult Coloring Books: A Coloring Book for Adults Featuring Mandalas and Henna Inspired Flowers, Animals, and Paisley…
## 55                                                                                                    Alexander Hamilton
## 56                                                                                                    Alexander Hamilton
## 57                                                                                                    Alexander Hamilton
##    Freq
## 1     0
## 2     0
## 3     1
## 4     1
## 5     0
## 6     0
## 7     0
## 8     0
## 9     1
## 10    0
## 11    0
## 12    1
## 13    0
## 14    0
## 15    1
## 16    0
## 17    1
## 18    0
## 19    1
## 20    0
## 21    0
## 22    0
## 23    0
## 24    1
## 25    0
## 26    0
## 27    1
## 28    0
## 29    0
## 30    2
## 31    0
## 32    1
## 33    0
## 34    1
## 35    0
## 36    0
## 37    0
## 38    1
## 39    0
## 40    1
## 41    0
## 42    0
## 43    0
## 44    1
## 45    0
## 46    0
## 47    1
## 48    0
## 49    0
## 50    1
## 51    0
## 52    0
## 53    1
## 54    0
## 55    0
## 56    0
## 57    1</code></pre>
</section>
<section id="hierarchical-clustering" class="level1">
<h1>Hierarchical clustering</h1>
<div class="sourceCode" id="cb51" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1">res <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">hcut</span>(data_kmeans_scaled, <span class="at" style="color: #657422;">k =</span> <span class="dv" style="color: #AD0000;">4</span>, <span class="at" style="color: #657422;">stand =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)</span>
<span id="cb51-2"><span class="co" style="color: #5E5E5E;"># Visualize</span></span>
<span id="cb51-3"><span class="fu" style="color: #4758AB;">fviz_dend</span>(res, <span class="at" style="color: #657422;">rect =</span> <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="at" style="color: #657422;">cex =</span> <span class="fl" style="color: #AD0000;">0.3</span>,</span>
<span id="cb51-4">          <span class="at" style="color: #657422;">k_colors =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#00AFBB"</span>,<span class="st" style="color: #20794D;">"#2E9FDF"</span>, <span class="st" style="color: #20794D;">"#E7B800"</span>, <span class="st" style="color: #20794D;">"#FC4E07"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb51-5">  <span class="fu" style="color: #4758AB;">theme_minimal</span>()</span></code></pre></div>
<pre><code>## Warning: `guides(&lt;scale&gt; = FALSE)` is deprecated. Please use `guides(&lt;scale&gt; =
## "none")` instead.</code></pre>
<p><img src="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/best_files/figure-gfm/unnamed-chunk-34-1.png" class="img-fluid"><!-- --></p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {Amazon {Bestsellers} {Data} {Analysis}},
  date = {2022-04-26},
  url = {https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/amazon-bestsellers-data-analysis.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“Amazon Bestsellers Data Analysis.”</span>
April 26, 2022. <a href="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/amazon-bestsellers-data-analysis.html">https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/amazon-bestsellers-data-analysis.html</a>.
</div></div></section></div> ]]></description>
  <category>Algorithm</category>
  <category>Data-Analysis</category>
  <category>K-Means</category>
  <guid>https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/amazon-bestsellers-data-analysis.html</guid>
  <pubDate>Tue, 26 Apr 2022 05:00:00 GMT</pubDate>
  <media:content url="https://karatsidhu.com/posts/amazon-bestsellers-data-analysis/images/logo.png" medium="image" type="image/png" height="122" width="144"/>
</item>
<item>
  <title>Netflix Original Movies - EDA</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/netflix-original-movies-eda/netflix-original-movies-eda.html</link>
  <description><![CDATA[ 




<section id="netflix-movies" class="level1">
<h1>Netflix Movies</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/https:/c.tenor.com/QJNoPeq9WmUAAAAC/netflix-intro-netflix.gif" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">netflix-intro-netflix.gif (498×278) (tenor.com</figcaption><p></p>
</figure>
</div>
<section id="loading-libraries" class="level2">
<h2 class="anchored" data-anchor-id="loading-libraries">Loading libraries</h2>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">suppressPackageStartupMessages</span>(<span class="fu" style="color: #4758AB;">library</span>(tidyverse))</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">suppressPackageStartupMessages</span>(<span class="fu" style="color: #4758AB;">library</span>(lubridate))</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">suppressPackageStartupMessages</span>(<span class="fu" style="color: #4758AB;">library</span>(showtext))</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;">showtext.auto</span>()</span></code></pre></div>
<pre><code>## 'showtext.auto()' is now renamed to 'showtext_auto()'
## The old version still works, but consider using the new function in future code</code></pre>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;">font_add_google</span>(<span class="st" style="color: #20794D;">"Bebas Neue"</span>, <span class="st" style="color: #20794D;">"Bebas Neue"</span>)</span></code></pre></div>
</section>
<section id="loading-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-data">Loading data</h2>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">netflix <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">read.csv</span>(<span class="st" style="color: #20794D;">"NetflixOriginals.csv"</span>)</span></code></pre></div>
</section>
<section id="looking-at-the-data-in-brief" class="level2">
<h2 class="anchored" data-anchor-id="looking-at-the-data-in-brief">Looking at the data in brief</h2>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">head</span>(netflix, <span class="dv" style="color: #AD0000;">4</span>)</span></code></pre></div>
<pre><code>##             Title                 Genre          Premiere Runtime IMDB.Score
## 1 Enter the Anime           Documentary    August 5, 2019      58        2.5
## 2     Dark Forces              Thriller   August 21, 2020      81        2.6
## 3         The App Science fiction/Drama December 26, 2019      79        2.6
## 4  The Open House       Horror thriller  January 19, 2018      94        3.2
##           Language
## 1 English/Japanese
## 2          Spanish
## 3          Italian
## 4          English</code></pre>
<section id="type-of-datatype-in-each-column" class="level3">
<h3 class="anchored" data-anchor-id="type-of-datatype-in-each-column">Type of datatype in each column</h3>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;">as.tibble</span>(<span class="fu" style="color: #4758AB;">sapply</span>(netflix, class))</span></code></pre></div>
<pre><code>## Warning: `as.tibble()` was deprecated in tibble 2.0.0.
## Please use `as_tibble()` instead.
## The signature and semantics have changed, see `?as_tibble`.
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.

## # A tibble: 6 × 1
##   value    
##   &lt;chr&gt;    
## 1 character
## 2 character
## 3 character
## 4 integer  
## 5 numeric  
## 6 character</code></pre>
</section>
<section id="does-the-data-contain-any-na-values" class="level3">
<h3 class="anchored" data-anchor-id="does-the-data-contain-any-na-values">Does the data contain any N/A values?</h3>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;">any</span>(<span class="fu" style="color: #4758AB;">is.na</span>(netflix))</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</section>
</section>
<section id="converting-the-premier-from-chr-to-datetime" class="level2">
<h2 class="anchored" data-anchor-id="converting-the-premier-from-chr-to-datetime">Converting the `premier` from chr to datetime</h2>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">netflix <span class="ot" style="color: #003B4F;">&lt;-</span> netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">Released =</span> <span class="fu" style="color: #4758AB;">mdy</span>(Premiere))</span></code></pre></div>
</section>
<section id="getting-each-year-month-and-date-separated" class="level2">
<h2 class="anchored" data-anchor-id="getting-each-year-month-and-date-separated">Getting each year, month and date separated</h2>
<section id="also-adding-the-corresponding-day-of-the-week-for-each-release" class="level3">
<h3 class="anchored" data-anchor-id="also-adding-the-corresponding-day-of-the-week-for-each-release">Also adding the corresponding day of the week for each release</h3>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">netflix <span class="ot" style="color: #003B4F;">&lt;-</span> netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">Year =</span> <span class="fu" style="color: #4758AB;">year</span>(Released)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">Month =</span> <span class="fu" style="color: #4758AB;">month</span>(Released, <span class="at" style="color: #657422;">label =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">Date =</span> <span class="fu" style="color: #4758AB;">day</span>(Released)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb12-5">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">Day =</span> <span class="fu" style="color: #4758AB;">wday</span>(Released, <span class="at" style="color: #657422;">label =</span> <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="at" style="color: #657422;">abbr =</span> <span class="cn" style="color: #8f5902;">FALSE</span>))</span></code></pre></div>
</section>
</section>
<section id="when-the-movies-were-released" class="level2">
<h2 class="anchored" data-anchor-id="when-the-movies-were-released">When the movies were released</h2>
<section id="number-of-movies-released-each-year" class="level3">
<h3 class="anchored" data-anchor-id="number-of-movies-released-each-year">Number of Movies released each year</h3>
<div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb13-2">  <span class="fu" style="color: #4758AB;">group_by</span>(Year) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb13-3">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">total =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb13-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb13-5">    <span class="at" style="color: #657422;">x =</span> Year,</span>
<span id="cb13-6">    <span class="at" style="color: #657422;">y =</span> total,</span>
<span id="cb13-7">    <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(total <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">max</span>(total), <span class="st" style="color: #20794D;">"red"</span>,<span class="st" style="color: #20794D;">"grey"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb13-8">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb13-9">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Netflix Movies released each year"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb13-10">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb13-11">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"#2d2d2d"</span>, <span class="st" style="color: #20794D;">"#E50914"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb13-12">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb13-13">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb13-14">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb13-15">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb13-16">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">35</span>,</span>
<span id="cb13-17">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb13-18">    ),</span>
<span id="cb13-19">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb13-20">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb13-21">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb13-22">    <span class="at" style="color: #657422;">panel.grid.minor  =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb13-23">    <span class="at" style="color: #657422;">text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">20</span>))</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-8-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="number-of-movies-released-each-month" class="level3">
<h3 class="anchored" data-anchor-id="number-of-movies-released-each-month">Number of Movies released each month</h3>
<div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb14-2">  <span class="fu" style="color: #4758AB;">group_by</span>(Month) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb14-3">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">total =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb14-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb14-5">    <span class="at" style="color: #657422;">x =</span> Month,</span>
<span id="cb14-6">    <span class="at" style="color: #657422;">y =</span> total,</span>
<span id="cb14-7">    <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(total <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">max</span>(total), <span class="st" style="color: #20794D;">"red"</span>,<span class="st" style="color: #20794D;">"grey"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb14-8">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb14-9">    <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Netflix Movies released each month"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb14-10">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb14-11">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>( <span class="st" style="color: #20794D;">"#2d2d2d"</span>, <span class="st" style="color: #20794D;">"#E50914"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb14-12">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb14-13">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb14-14">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb14-15">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb14-16">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">30</span>,</span>
<span id="cb14-17">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb14-18">    ),</span>
<span id="cb14-19">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb14-20">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb14-21">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb14-22">    <span class="at" style="color: #657422;">text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">20</span>))</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-9-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="number-of-movies-released-by-date-of-the-month" class="level3">
<h3 class="anchored" data-anchor-id="number-of-movies-released-by-date-of-the-month">Number of Movies released by date of the month</h3>
<div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-2">  <span class="fu" style="color: #4758AB;">group_by</span>(Date) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-3">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">total =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb15-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb15-5">    <span class="at" style="color: #657422;">x =</span> Date,</span>
<span id="cb15-6">    <span class="at" style="color: #657422;">y =</span> total,</span>
<span id="cb15-7">    <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(total <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">max</span>(total), <span class="st" style="color: #20794D;">"red"</span>,<span class="st" style="color: #20794D;">"grey"</span>)))  <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-8">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-9">    <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Netflix Movies released by Date of each month"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-10">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-11">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>( <span class="st" style="color: #20794D;">"#2d2d2d"</span>, <span class="st" style="color: #20794D;">"#E50914"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb15-12">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb15-13">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb15-14">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb15-15">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb15-16">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">30</span>,</span>
<span id="cb15-17">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb15-18">    ),</span>
<span id="cb15-19">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb15-20">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb15-21">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb15-22">    <span class="at" style="color: #657422;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb15-23">    <span class="at" style="color: #657422;">text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">20</span>))</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-10-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="number-of-movies-released-each-day-of-the-week" class="level3">
<h3 class="anchored" data-anchor-id="number-of-movies-released-each-day-of-the-week">Number of Movies released each day of the week</h3>
<div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-2">  <span class="fu" style="color: #4758AB;">group_by</span>(Day) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-3">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">total =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb16-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb16-5">    <span class="at" style="color: #657422;">x =</span> Day,</span>
<span id="cb16-6">    <span class="at" style="color: #657422;">y =</span> total,</span>
<span id="cb16-7">    <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(total <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">max</span>(total), <span class="st" style="color: #20794D;">"red"</span>,<span class="st" style="color: #20794D;">"black"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-8">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-9">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Netflix Movies released by day of the week"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-10">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-11">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>( <span class="st" style="color: #20794D;">"#2d2d2d"</span>, <span class="st" style="color: #20794D;">"#E50914"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb16-12">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb16-13">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb16-14">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb16-15">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb16-16">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">30</span>,</span>
<span id="cb16-17">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb16-18">    ),</span>
<span id="cb16-19">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb16-20">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb16-21">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb16-22">    <span class="at" style="color: #657422;">text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">20</span>))</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-11-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
<section id="most-popular-genres" class="level2">
<h2 class="anchored" data-anchor-id="most-popular-genres">Most Popular Genres</h2>
<section id="most-popular-genres-1" class="level3">
<h3 class="anchored" data-anchor-id="most-popular-genres-1">5 Most Popular Genres</h3>
<div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb17-2">  <span class="fu" style="color: #4758AB;">group_by</span>(Genre) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb17-3">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">Movies =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb17-4">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(Movies)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb17-5">  <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">5</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb17-6">   <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb17-7">    <span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">reorder</span>(Genre, <span class="sc" style="color: #5E5E5E;">-</span>Movies),</span>
<span id="cb17-8">    <span class="at" style="color: #657422;">y =</span> Movies,</span>
<span id="cb17-9">    <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(Movies <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">max</span>(Movies), <span class="st" style="color: #20794D;">"red"</span>, <span class="st" style="color: #20794D;">"black"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb17-10">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb17-11">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Most Popular Genres"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb17-12">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb17-13">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>( <span class="st" style="color: #20794D;">"#2d2d2d"</span>, <span class="st" style="color: #20794D;">"#E50914"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb17-14">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb17-15">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb17-16">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb17-17">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb17-18">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">30</span>,</span>
<span id="cb17-19">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb17-20">    ),</span>
<span id="cb17-21">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb17-22">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb17-23">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb17-24">    <span class="at" style="color: #657422;">text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">20</span>))</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-12-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
<section id="most-popular-languages" class="level2">
<h2 class="anchored" data-anchor-id="most-popular-languages">Most Popular Languages</h2>
<section id="most-popular-languages-1" class="level3">
<h3 class="anchored" data-anchor-id="most-popular-languages-1">5 Most Popular Languages</h3>
<div class="sourceCode" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb18-2">  <span class="fu" style="color: #4758AB;">group_by</span>(Language) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb18-3">  <span class="fu" style="color: #4758AB;">summarise</span>(<span class="at" style="color: #657422;">Movies =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb18-4">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(Movies)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb18-5">  <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">5</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb18-6">   <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb18-7">    <span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">reorder</span>(Language, <span class="sc" style="color: #5E5E5E;">-</span>Movies),</span>
<span id="cb18-8">    <span class="at" style="color: #657422;">y =</span> Movies,</span>
<span id="cb18-9">    <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(Movies <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">max</span>(Movies), <span class="st" style="color: #20794D;">"red"</span>, <span class="st" style="color: #20794D;">"black"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-10">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-11">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Most Popular Languages"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-12">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-13">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>( <span class="st" style="color: #20794D;">"#2d2d2d"</span>, <span class="st" style="color: #20794D;">"#E50914"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb18-14">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb18-15">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb18-16">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb18-17">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb18-18">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">30</span>,</span>
<span id="cb18-19">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb18-20">    ),</span>
<span id="cb18-21">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb18-22">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb18-23">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb18-24">    <span class="at" style="color: #657422;">text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">20</span>))</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-13-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
<section id="imdb-scores" class="level2">
<h2 class="anchored" data-anchor-id="imdb-scores">IMDB Scores</h2>
<section id="how-were-most-movies-rated" class="level3">
<h3 class="anchored" data-anchor-id="how-were-most-movies-rated">How were most movies rated?</h3>
<div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb19-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> <span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-3">  <span class="fu" style="color: #4758AB;">geom_dotplot</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="fl" style="color: #AD0000;">0.1</span>,</span>
<span id="cb19-4">               <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"#2d2d2d"</span>,</span>
<span id="cb19-5">               <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"#e9ecef"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-6">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"IMDB Score Distribution"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-7">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb19-8">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb19-9">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb19-10">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb19-11">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb19-12">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">25</span>,</span>
<span id="cb19-13">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb19-14">    ),</span>
<span id="cb19-15">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb19-16">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb19-17">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()</span>
<span id="cb19-18">  ) </span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-14-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="highest-rated-movies" class="level3">
<h3 class="anchored" data-anchor-id="highest-rated-movies">Highest Rated Movies</h3>
<div class="sourceCode" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb20-2">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb20-3">  <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">5</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb20-4">   <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb20-5">    <span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">reorder</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Title</span><span class="st" style="color: #20794D;">`</span>, <span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span>),</span>
<span id="cb20-6">    <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span>,</span>
<span id="cb20-7">    <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span> <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">max</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span>), <span class="st" style="color: #20794D;">"red"</span>, <span class="st" style="color: #20794D;">"black"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb20-8">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb20-9">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Highest Rated Movies"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb20-10">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb20-11">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>( <span class="st" style="color: #20794D;">"#2d2d2d"</span>, <span class="st" style="color: #20794D;">"#E50914"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb20-12">  <span class="fu" style="color: #4758AB;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb20-13">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb20-14">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb20-15">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb20-16">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb20-17">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">25</span>,</span>
<span id="cb20-18">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb20-19">    ),</span>
<span id="cb20-20">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb20-21">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb20-22">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-15-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="lowest-rated-movies" class="level3">
<h3 class="anchored" data-anchor-id="lowest-rated-movies">Lowest Rated Movies</h3>
<div class="sourceCode" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb21-2">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(<span class="sc" style="color: #5E5E5E;">-</span><span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb21-3">  <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">5</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb21-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb21-5">    <span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">reorder</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Title</span><span class="st" style="color: #20794D;">`</span>, <span class="sc" style="color: #5E5E5E;">-</span><span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span>),</span>
<span id="cb21-6">    <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span>,</span>
<span id="cb21-7">    <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span> <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">min</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span>), <span class="st" style="color: #20794D;">"red"</span>, <span class="st" style="color: #20794D;">"black"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb21-8">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb21-9">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Lowest Rated Movies"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb21-10">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb21-11">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>( <span class="st" style="color: #20794D;">"#2d2d2d"</span>, <span class="st" style="color: #20794D;">"#E50914"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb21-12">  <span class="fu" style="color: #4758AB;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb21-13">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb21-14">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb21-15">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb21-16">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb21-17">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">25</span>,</span>
<span id="cb21-18">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb21-19">    ),</span>
<span id="cb21-20">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb21-21">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb21-22">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-16-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
<section id="runtime" class="level2">
<h2 class="anchored" data-anchor-id="runtime">Runtime</h2>
<section id="how-long-are-the-movies" class="level3">
<h3 class="anchored" data-anchor-id="how-long-are-the-movies">How long are the movies?</h3>
<div class="sourceCode" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb22-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> Runtime)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb22-3">  <span class="fu" style="color: #4758AB;">geom_dotplot</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="fl" style="color: #AD0000;">2.25</span>,</span>
<span id="cb22-4">               <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"#2d2d2d"</span>,</span>
<span id="cb22-5">               <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"#e9ecef"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb22-6">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Movie Runtime"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb22-7">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb22-8">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb22-9">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb22-10">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb22-11">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb22-12">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">25</span>,</span>
<span id="cb22-13">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb22-14">    ),</span>
<span id="cb22-15">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb22-16">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb22-17">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>()</span>
<span id="cb22-18">  ) </span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-17-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="longest-movies" class="level3">
<h3 class="anchored" data-anchor-id="longest-movies">Longest Movies</h3>
<div class="sourceCode" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb23-2">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(Runtime)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb23-3">  <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">5</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb23-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb23-5">    <span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">reorder</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Title</span><span class="st" style="color: #20794D;">`</span>, <span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Runtime</span><span class="st" style="color: #20794D;">`</span>),</span>
<span id="cb23-6">    <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Runtime</span><span class="st" style="color: #20794D;">`</span>,</span>
<span id="cb23-7">    <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(Runtime <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">max</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Runtime</span><span class="st" style="color: #20794D;">`</span>), <span class="st" style="color: #20794D;">"red"</span>, <span class="st" style="color: #20794D;">"black"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-8">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-9">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Longest Movies"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-10">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-11">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>( <span class="st" style="color: #20794D;">"#2d2d2d"</span>, <span class="st" style="color: #20794D;">"#E50914"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-12">  <span class="fu" style="color: #4758AB;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb23-13">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb23-14">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb23-15">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb23-16">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb23-17">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">25</span>,</span>
<span id="cb23-18">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb23-19">    ),</span>
<span id="cb23-20">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb23-21">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb23-22">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-18-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="shortest-movies" class="level3">
<h3 class="anchored" data-anchor-id="shortest-movies">Shortest Movies</h3>
<div class="sourceCode" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb24-2">  <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(<span class="sc" style="color: #5E5E5E;">-</span>Runtime)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb24-3">  <span class="fu" style="color: #4758AB;">head</span>(<span class="dv" style="color: #AD0000;">5</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb24-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(</span>
<span id="cb24-5">    <span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">reorder</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Title</span><span class="st" style="color: #20794D;">`</span>, <span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Runtime</span><span class="st" style="color: #20794D;">`</span>),</span>
<span id="cb24-6">    <span class="at" style="color: #657422;">y =</span> <span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Runtime</span><span class="st" style="color: #20794D;">`</span>,</span>
<span id="cb24-7">    <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(Runtime <span class="sc" style="color: #5E5E5E;">==</span> <span class="fu" style="color: #4758AB;">min</span>(<span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">Runtime</span><span class="st" style="color: #20794D;">`</span>), <span class="st" style="color: #20794D;">"red"</span>, <span class="st" style="color: #20794D;">"black"</span>))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb24-8">  <span class="fu" style="color: #4758AB;">geom_col</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb24-9">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Shortest Movies"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb24-10">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb24-11">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>( <span class="st" style="color: #20794D;">"#2d2d2d"</span>, <span class="st" style="color: #20794D;">"#E50914"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb24-12">  <span class="fu" style="color: #4758AB;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb24-13">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb24-14">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb24-15">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb24-16">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb24-17">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">25</span>,</span>
<span id="cb24-18">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb24-19">    ),</span>
<span id="cb24-20">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb24-21">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb24-22">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb24-23">    <span class="at" style="color: #657422;">text =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">20</span>))</span></code></pre></div>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-19-1.png" class="img-fluid"><!-- --></p>
</section>
</section>
<section id="runtime-vs-imdb-score" class="level2">
<h2 class="anchored" data-anchor-id="runtime-vs-imdb-score">Runtime vs IMDB-Score</h2>
<div class="sourceCode" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">netflix <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb25-2">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x=</span><span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span>, <span class="at" style="color: #657422;">y=</span> Runtime)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb25-3">  <span class="fu" style="color: #4758AB;">geom_point</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb25-4">  <span class="fu" style="color: #4758AB;">geom_smooth</span>(<span class="at" style="color: #657422;">method =</span> lm,<span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb25-5">  <span class="fu" style="color: #4758AB;">labs</span>(<span class="at" style="color: #657422;">title =</span> <span class="st" style="color: #20794D;">"Runtime vs IMDB Rating"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb25-6">  <span class="fu" style="color: #4758AB;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb25-7">  <span class="fu" style="color: #4758AB;">scale_fill_manual</span>(<span class="at" style="color: #657422;">values =</span> <span class="fu" style="color: #4758AB;">c</span>( <span class="st" style="color: #20794D;">"#2d2d2d"</span>, <span class="st" style="color: #20794D;">"#E50914"</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb25-8">  <span class="fu" style="color: #4758AB;">theme</span>(</span>
<span id="cb25-9">    <span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>,</span>
<span id="cb25-10">    <span class="at" style="color: #657422;">plot.title =</span> <span class="fu" style="color: #4758AB;">element_text</span>(</span>
<span id="cb25-11">      <span class="at" style="color: #657422;">family =</span> <span class="st" style="color: #20794D;">"Bebas Neue"</span>,</span>
<span id="cb25-12">      <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">25</span>,</span>
<span id="cb25-13">      <span class="at" style="color: #657422;">colour =</span> <span class="st" style="color: #20794D;">"#E50914"</span></span>
<span id="cb25-14">    ),</span>
<span id="cb25-15">    <span class="at" style="color: #657422;">axis.title.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb25-16">    <span class="at" style="color: #657422;">axis.title.y =</span> <span class="fu" style="color: #4758AB;">element_blank</span>(),</span>
<span id="cb25-17">    <span class="at" style="color: #657422;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;">element_blank</span>())</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'</code></pre>
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/nefllix_files/figure-gfm/unnamed-chunk-20-1.png" class="img-fluid"><!-- --></p>
</section>
<section id="basic-statistical-analysis" class="level2">
<h2 class="anchored" data-anchor-id="basic-statistical-analysis">Basic Statistical Analysis</h2>
<section id="linear-models" class="level3">
<h3 class="anchored" data-anchor-id="linear-models">Linear Models</h3>
<div class="sourceCode" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">model <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">lm</span>(<span class="at" style="color: #657422;">data =</span> netflix, <span class="at" style="color: #657422;">formula =</span> Runtime <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">`</span><span class="at" style="color: #657422;">IMDB.Score</span><span class="st" style="color: #20794D;">`</span>)</span>
<span id="cb27-2"><span class="fu" style="color: #4758AB;">summary</span>(model)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Runtime ~ IMDB.Score, data = netflix)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -91.399  -7.439   3.398  14.467 117.195 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  100.849      7.453  13.531   &lt;2e-16 ***
## IMDB.Score    -1.159      1.174  -0.987    0.324    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 27.76 on 582 degrees of freedom
## Multiple R-squared:  0.001673,   Adjusted R-squared:  -4.283e-05 
## F-statistic: 0.975 on 1 and 582 DF,  p-value: 0.3238</code></pre>
</section>
<section id="correlation-test" class="level3">
<h3 class="anchored" data-anchor-id="correlation-test">Correlation Test</h3>
<div class="sourceCode" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1">res <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">cor.test</span>(netflix<span class="sc" style="color: #5E5E5E;">$</span>Runtime, netflix<span class="sc" style="color: #5E5E5E;">$</span>IMDB.Score, </span>
<span id="cb29-2">                    <span class="at" style="color: #657422;">method =</span> <span class="st" style="color: #20794D;">"pearson"</span>)</span>
<span id="cb29-3">res</span></code></pre></div>
<pre><code>## 
##  Pearson's product-moment correlation
## 
## data:  netflix$Runtime and netflix$IMDB.Score
## t = -0.98744, df = 582, p-value = 0.3238
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  -0.12162699  0.04037194
## sample estimates:
##         cor 
## -0.04089629</code></pre>
</section>
<section id="p-value" class="level3">
<h3 class="anchored" data-anchor-id="p-value">P-value</h3>
<div class="sourceCode" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1">res<span class="sc" style="color: #5E5E5E;">$</span>p.value</span></code></pre></div>
<pre><code>## [1] 0.3238393</code></pre>
</section>
<section id="correlation-coefficient" class="level3">
<h3 class="anchored" data-anchor-id="correlation-coefficient">Correlation Coefficient</h3>
<div class="sourceCode" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1">res<span class="sc" style="color: #5E5E5E;">$</span>estimate</span></code></pre></div>
<pre><code>##         cor 
## -0.04089629</code></pre>
</section>
</section>
<section id="thank-you" class="level2">
<h2 class="anchored" data-anchor-id="thank-you">Thank you!</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://karatsidhu.com/posts/netflix-original-movies-eda/https:/c.tenor.com/07cmziHz9hQAAAAC/curb-your-enthusiasm-curb-your-enthusiasm-outro.gif" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">end</figcaption><p></p>
</figure>
</div>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2022,
  author = {Karat Sidhu},
  editor = {},
  title = {Netflix {Original} {Movies} - {EDA}},
  date = {2022-04-21},
  url = {https://karatsidhu.com/posts/netflix-original-movies-eda/netflix-original-movies-eda.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2022" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2022. <span>“Netflix Original Movies - EDA.”</span> April
21, 2022. <a href="https://karatsidhu.com/posts/netflix-original-movies-eda/netflix-original-movies-eda.html">https://karatsidhu.com/posts/netflix-original-movies-eda/netflix-original-movies-eda.html</a>.
</div></div></section></div> ]]></description>
  <category>GGplot2</category>
  <category>Data-Analysis</category>
  <guid>https://karatsidhu.com/posts/netflix-original-movies-eda/netflix-original-movies-eda.html</guid>
  <pubDate>Thu, 21 Apr 2022 05:00:00 GMT</pubDate>
  <media:content url="https://c.tenor.com/QJNoPeq9WmUAAAAC/netflix-intro-netflix.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Welcome to karat_codes</title>
  <dc:creator>Karat Sidhu</dc:creator>
  <link>https://karatsidhu.com/posts/welcome/welcome.html</link>
  <description><![CDATA[ 




<p>This is a new blog that I made with distill package in R</p>
<p>Its based on a custom css theme that I am constantly tweaking.</p>
<p>Source code for everything available on my github.</p>
<p>github.com/SidhuK</p>



<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{sidhu2020,
  author = {Karat Sidhu},
  editor = {},
  title = {Welcome to Karat\_codes},
  date = {2020-05-21},
  url = {https://karatsidhu.com/posts/welcome/welcome.html},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-sidhu2020" class="csl-entry quarto-appendix-citeas">
Karat Sidhu. 2020. <span>“Welcome to Karat_codes.”</span> May 21, 2020.
<a href="https://karatsidhu.com/posts/welcome/welcome.html">https://karatsidhu.com/posts/welcome/welcome.html</a>.
</div></div></section></div> ]]></description>
  <category>misc</category>
  <guid>https://karatsidhu.com/posts/welcome/welcome.html</guid>
  <pubDate>Thu, 21 May 2020 05:00:00 GMT</pubDate>
</item>
</channel>
</rss>
